var Am=c=>{throw TypeError(c)};var ph=(c,t,e)=>t.has(c)||Am("Cannot "+e);var Yt=(c,t,e)=>(ph(c,t,"read from private field"),e?e.call(c):t.get(c)),On=(c,t,e)=>t.has(c)?Am("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(c):t.set(c,e),Ye=(c,t,e,s)=>(ph(c,t,"write to private field"),s?s.call(c,e):t.set(c,e),e),kn=(c,t,e)=>(ph(c,t,"access private method"),e);var Sm=(c,t,e,s)=>({set _(a){Ye(c,t,a,e)},get _(){return Yt(c,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function DA(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var gh={exports:{}},vr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function LA(){if(wm)return vr;wm=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:c,type:s,key:l,ref:a!==void 0?a:null,props:o}}return vr.Fragment=t,vr.jsx=e,vr.jsxs=e,vr}var Em;function NA(){return Em||(Em=1,gh.exports=LA()),gh.exports}var P=NA(),mh={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m;function OA(){if(_m)return Et;_m=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function E(L,X,Z){this.props=L,this.context=X,this.refs=w,this.updater=Z||A}E.prototype.isReactComponent={},E.prototype.setState=function(L,X){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,X,"setState")},E.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function x(){}x.prototype=E.prototype;function R(L,X,Z){this.props=L,this.context=X,this.refs=w,this.updater=Z||A}var T=R.prototype=new x;T.constructor=R,v(T,E.prototype),T.isPureReactComponent=!0;var D=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function F(L,X,Z,Q,nt,bt){return Z=bt.ref,{$$typeof:c,type:L,key:X,ref:Z!==void 0?Z:null,props:bt}}function V(L,X){return F(L.type,X,void 0,void 0,void 0,L.props)}function $(L){return typeof L=="object"&&L!==null&&L.$$typeof===c}function J(L){var X={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Z){return X[Z]})}var tt=/\/+/g;function st(L,X){return typeof L=="object"&&L!==null&&L.key!=null?J(""+L.key):X.toString(36)}function ct(){}function at(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(ct,ct):(L.status="pending",L.then(function(X){L.status==="pending"&&(L.status="fulfilled",L.value=X)},function(X){L.status==="pending"&&(L.status="rejected",L.reason=X)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ut(L,X,Z,Q,nt){var bt=typeof L;(bt==="undefined"||bt==="boolean")&&(L=null);var ot=!1;if(L===null)ot=!0;else switch(bt){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(L.$$typeof){case c:case t:ot=!0;break;case g:return ot=L._init,ut(ot(L._payload),X,Z,Q,nt)}}if(ot)return nt=nt(L),ot=Q===""?"."+st(L,0):Q,D(nt)?(Z="",ot!=null&&(Z=ot.replace(tt,"$&/")+"/"),ut(nt,X,Z,"",function(ue){return ue})):nt!=null&&($(nt)&&(nt=V(nt,Z+(nt.key==null||L&&L.key===nt.key?"":(""+nt.key).replace(tt,"$&/")+"/")+ot)),X.push(nt)),1;ot=0;var St=Q===""?".":Q+":";if(D(L))for(var Dt=0;Dt<L.length;Dt++)Q=L[Dt],bt=St+st(Q,Dt),ot+=ut(Q,X,Z,bt,nt);else if(Dt=b(L),typeof Dt=="function")for(L=Dt.call(L),Dt=0;!(Q=L.next()).done;)Q=Q.value,bt=St+st(Q,Dt++),ot+=ut(Q,X,Z,bt,nt);else if(bt==="object"){if(typeof L.then=="function")return ut(at(L),X,Z,Q,nt);throw X=String(L),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ot}function N(L,X,Z){if(L==null)return L;var Q=[],nt=0;return ut(L,Q,"","",function(bt){return X.call(Z,bt,nt++)}),Q}function H(L){if(L._status===-1){var X=L._result;X=X(),X.then(function(Z){(L._status===0||L._status===-1)&&(L._status=1,L._result=Z)},function(Z){(L._status===0||L._status===-1)&&(L._status=2,L._result=Z)}),L._status===-1&&(L._status=0,L._result=X)}if(L._status===1)return L._result.default;throw L._result}var et=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function yt(){}return Et.Children={map:N,forEach:function(L,X,Z){N(L,function(){X.apply(this,arguments)},Z)},count:function(L){var X=0;return N(L,function(){X++}),X},toArray:function(L){return N(L,function(X){return X})||[]},only:function(L){if(!$(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Et.Component=E,Et.Fragment=e,Et.Profiler=a,Et.PureComponent=R,Et.StrictMode=s,Et.Suspense=d,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Et.__COMPILER_RUNTIME={__proto__:null,c:function(L){return C.H.useMemoCache(L)}},Et.cache=function(L){return function(){return L.apply(null,arguments)}},Et.cloneElement=function(L,X,Z){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Q=v({},L.props),nt=L.key,bt=void 0;if(X!=null)for(ot in X.ref!==void 0&&(bt=void 0),X.key!==void 0&&(nt=""+X.key),X)!U.call(X,ot)||ot==="key"||ot==="__self"||ot==="__source"||ot==="ref"&&X.ref===void 0||(Q[ot]=X[ot]);var ot=arguments.length-2;if(ot===1)Q.children=Z;else if(1<ot){for(var St=Array(ot),Dt=0;Dt<ot;Dt++)St[Dt]=arguments[Dt+2];Q.children=St}return F(L.type,nt,void 0,void 0,bt,Q)},Et.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Et.createElement=function(L,X,Z){var Q,nt={},bt=null;if(X!=null)for(Q in X.key!==void 0&&(bt=""+X.key),X)U.call(X,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(nt[Q]=X[Q]);var ot=arguments.length-2;if(ot===1)nt.children=Z;else if(1<ot){for(var St=Array(ot),Dt=0;Dt<ot;Dt++)St[Dt]=arguments[Dt+2];nt.children=St}if(L&&L.defaultProps)for(Q in ot=L.defaultProps,ot)nt[Q]===void 0&&(nt[Q]=ot[Q]);return F(L,bt,void 0,void 0,null,nt)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(L){return{$$typeof:h,render:L}},Et.isValidElement=$,Et.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:H}},Et.memo=function(L,X){return{$$typeof:p,type:L,compare:X===void 0?null:X}},Et.startTransition=function(L){var X=C.T,Z={};C.T=Z;try{var Q=L(),nt=C.S;nt!==null&&nt(Z,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(yt,et)}catch(bt){et(bt)}finally{C.T=X}},Et.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Et.use=function(L){return C.H.use(L)},Et.useActionState=function(L,X,Z){return C.H.useActionState(L,X,Z)},Et.useCallback=function(L,X){return C.H.useCallback(L,X)},Et.useContext=function(L){return C.H.useContext(L)},Et.useDebugValue=function(){},Et.useDeferredValue=function(L,X){return C.H.useDeferredValue(L,X)},Et.useEffect=function(L,X,Z){var Q=C.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(L,X)},Et.useId=function(){return C.H.useId()},Et.useImperativeHandle=function(L,X,Z){return C.H.useImperativeHandle(L,X,Z)},Et.useInsertionEffect=function(L,X){return C.H.useInsertionEffect(L,X)},Et.useLayoutEffect=function(L,X){return C.H.useLayoutEffect(L,X)},Et.useMemo=function(L,X){return C.H.useMemo(L,X)},Et.useOptimistic=function(L,X){return C.H.useOptimistic(L,X)},Et.useReducer=function(L,X,Z){return C.H.useReducer(L,X,Z)},Et.useRef=function(L){return C.H.useRef(L)},Et.useState=function(L){return C.H.useState(L)},Et.useSyncExternalStore=function(L,X,Z){return C.H.useSyncExternalStore(L,X,Z)},Et.useTransition=function(){return C.H.useTransition()},Et.version="19.1.1",Et}var xm;function Jh(){return xm||(xm=1,mh.exports=OA()),mh.exports}var k=Jh(),yh={exports:{}},Ar={},bh={exports:{}},vh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function kA(){return Tm||(Tm=1,(function(c){function t(N,H){var et=N.length;N.push(H);t:for(;0<et;){var yt=et-1>>>1,L=N[yt];if(0<a(L,H))N[yt]=H,N[et]=L,et=yt;else break t}}function e(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var H=N[0],et=N.pop();if(et!==H){N[0]=et;t:for(var yt=0,L=N.length,X=L>>>1;yt<X;){var Z=2*(yt+1)-1,Q=N[Z],nt=Z+1,bt=N[nt];if(0>a(Q,et))nt<L&&0>a(bt,Q)?(N[yt]=bt,N[nt]=et,yt=nt):(N[yt]=Q,N[Z]=et,yt=Z);else if(nt<L&&0>a(bt,et))N[yt]=bt,N[nt]=et,yt=nt;else break t}}return H}function a(N,H){var et=N.sortIndex-H.sortIndex;return et!==0?et:N.id-H.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;c.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();c.unstable_now=function(){return l.now()-h}}var d=[],p=[],g=1,y=null,b=3,A=!1,v=!1,w=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function D(N){for(var H=e(p);H!==null;){if(H.callback===null)s(p);else if(H.startTime<=N)s(p),H.sortIndex=H.expirationTime,t(d,H);else break;H=e(p)}}function C(N){if(w=!1,D(N),!v)if(e(d)!==null)v=!0,U||(U=!0,st());else{var H=e(p);H!==null&&ut(C,H.startTime-N)}}var U=!1,F=-1,V=5,$=-1;function J(){return E?!0:!(c.unstable_now()-$<V)}function tt(){if(E=!1,U){var N=c.unstable_now();$=N;var H=!0;try{t:{v=!1,w&&(w=!1,R(F),F=-1),A=!0;var et=b;try{e:{for(D(N),y=e(d);y!==null&&!(y.expirationTime>N&&J());){var yt=y.callback;if(typeof yt=="function"){y.callback=null,b=y.priorityLevel;var L=yt(y.expirationTime<=N);if(N=c.unstable_now(),typeof L=="function"){y.callback=L,D(N),H=!0;break e}y===e(d)&&s(d),D(N)}else s(d);y=e(d)}if(y!==null)H=!0;else{var X=e(p);X!==null&&ut(C,X.startTime-N),H=!1}}break t}finally{y=null,b=et,A=!1}H=void 0}}finally{H?st():U=!1}}}var st;if(typeof T=="function")st=function(){T(tt)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,at=ct.port2;ct.port1.onmessage=tt,st=function(){at.postMessage(null)}}else st=function(){x(tt,0)};function ut(N,H){F=x(function(){N(c.unstable_now())},H)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(N){N.callback=null},c.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<N?Math.floor(1e3/N):5},c.unstable_getCurrentPriorityLevel=function(){return b},c.unstable_next=function(N){switch(b){case 1:case 2:case 3:var H=3;break;default:H=b}var et=b;b=H;try{return N()}finally{b=et}},c.unstable_requestPaint=function(){E=!0},c.unstable_runWithPriority=function(N,H){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var et=b;b=N;try{return H()}finally{b=et}},c.unstable_scheduleCallback=function(N,H,et){var yt=c.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?yt+et:yt):et=yt,N){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=et+L,N={id:g++,callback:H,priorityLevel:N,startTime:et,expirationTime:L,sortIndex:-1},et>yt?(N.sortIndex=et,t(p,N),e(d)===null&&N===e(p)&&(w?(R(F),F=-1):w=!0,ut(C,et-yt))):(N.sortIndex=L,t(d,N),v||A||(v=!0,U||(U=!0,st()))),N},c.unstable_shouldYield=J,c.unstable_wrapCallback=function(N){var H=b;return function(){var et=b;b=H;try{return N.apply(this,arguments)}finally{b=et}}}})(vh)),vh}var Rm;function PA(){return Rm||(Rm=1,bh.exports=kA()),bh.exports}var Ah={exports:{}},Ne={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function BA(){if(Cm)return Ne;Cm=1;var c=Jh();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var l=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Ne.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ne.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(d,p,null,g)},Ne.flushSync=function(d){var p=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=p,s.p=g,s.d.f()}},Ne.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},Ne.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Ne.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Ne.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=h(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},Ne.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Ne.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=h(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},Ne.requestFormReset=function(d){s.d.r(d)},Ne.unstable_batchedUpdates=function(d,p){return d(p)},Ne.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},Ne.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ne.version="19.1.1",Ne}var Mm;function FA(){if(Mm)return Ah.exports;Mm=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),Ah.exports=BA(),Ah.exports}var Dm;function UA(){if(Dm)return Ar;Dm=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c=PA(),t=Jh(),e=FA();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,r=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(r=i.return),n=i.return;while(n)}return i.tag===3?r:null}function l(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function h(n){if(o(n)!==n)throw Error(s(188))}function d(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(s(188));return i!==n?null:n}for(var r=n,u=i;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){r=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return h(f),n;if(m===u)return h(f),i;m=m.sibling}throw Error(s(188))}if(r.return!==u.return)r=f,u=m;else{for(var S=!1,_=f.child;_;){if(_===r){S=!0,r=f,u=m;break}if(_===u){S=!0,u=f,r=m;break}_=_.sibling}if(!S){for(_=m.child;_;){if(_===r){S=!0,r=m,u=f;break}if(_===u){S=!0,u=m,r=f;break}_=_.sibling}if(!S)throw Error(s(189))}}if(r.alternate!==u)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),T=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function st(n){return n===null||typeof n!="object"?null:(n=tt&&n[tt]||n["@@iterator"],typeof n=="function"?n:null)}var ct=Symbol.for("react.client.reference");function at(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ct?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case v:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case C:return"Suspense";case U:return"SuspenseList";case $:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case T:return(n.displayName||"Context")+".Provider";case R:return(n._context.displayName||"Context")+".Consumer";case D:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case F:return i=n.displayName||null,i!==null?i:at(n.type)||"Memo";case V:i=n._payload,n=n._init;try{return at(n(i))}catch{}}return null}var ut=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},yt=[],L=-1;function X(n){return{current:n}}function Z(n){0>L||(n.current=yt[L],yt[L]=null,L--)}function Q(n,i){L++,yt[L]=n.current,n.current=i}var nt=X(null),bt=X(null),ot=X(null),St=X(null);function Dt(n,i){switch(Q(ot,i),Q(bt,n),Q(nt,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?$g(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=$g(i),n=Kg(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Z(nt),Q(nt,n)}function ue(){Z(nt),Z(bt),Z(ot)}function jt(n){n.memoizedState!==null&&Q(St,n);var i=nt.current,r=Kg(i,n.type);i!==r&&(Q(bt,n),Q(nt,r))}function He(n){bt.current===n&&(Z(nt),Z(bt)),St.current===n&&(Z(St),pr._currentValue=et)}var Ze=Object.prototype.hasOwnProperty,Lt=c.unstable_scheduleCallback,Ft=c.unstable_cancelCallback,ie=c.unstable_shouldYield,he=c.unstable_requestPaint,xe=c.unstable_now,Ii=c.unstable_getCurrentPriorityLevel,As=c.unstable_ImmediatePriority,to=c.unstable_UserBlockingPriority,qn=c.unstable_NormalPriority,tc=c.unstable_LowPriority,eo=c.unstable_IdlePriority,ec=c.log,nc=c.unstable_setDisableYieldValue,zi=null,Zt=null;function Fe(n){if(typeof ec=="function"&&nc(n),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(zi,n)}catch{}}var Jt=Math.clz32?Math.clz32:mv,wa=Math.log,gv=Math.LN2;function mv(n){return n>>>=0,n===0?32:31-(wa(n)/gv|0)|0}var no=256,io=4194304;function Hi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function so(n,i,r){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var _=u&134217727;return _!==0?(u=_&~m,u!==0?f=Hi(u):(S&=_,S!==0?f=Hi(S):r||(r=_&~n,r!==0&&(f=Hi(r))))):(_=u&~m,_!==0?f=Hi(_):S!==0?f=Hi(S):r||(r=u&~n,r!==0&&(f=Hi(r)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,r=i&-i,m>=r||m===32&&(r&4194048)!==0)?i:f}function Ea(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function yv(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dd(){var n=no;return no<<=1,(no&4194048)===0&&(no=256),n}function Ld(){var n=io;return io<<=1,(io&62914560)===0&&(io=4194304),n}function ic(n){for(var i=[],r=0;31>r;r++)i.push(n);return i}function _a(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function bv(n,i,r,u,f,m){var S=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var _=n.entanglements,M=n.expirationTimes,z=n.hiddenUpdates;for(r=S&~r;0<r;){var Y=31-Jt(r),W=1<<Y;_[Y]=0,M[Y]=-1;var j=z[Y];if(j!==null)for(z[Y]=null,Y=0;Y<j.length;Y++){var G=j[Y];G!==null&&(G.lane&=-536870913)}r&=~W}u!==0&&Nd(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(S&~i))}function Nd(n,i,r){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-Jt(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|r&4194090}function Od(n,i){var r=n.entangledLanes|=i;for(n=n.entanglements;r;){var u=31-Jt(r),f=1<<u;f&i|n[u]&i&&(n[u]|=i),r&=~f}}function sc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ac(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function kd(){var n=H.p;return n!==0?n:(n=window.event,n===void 0?32:pm(n.type))}function vv(n,i){var r=H.p;try{return H.p=n,i()}finally{H.p=r}}var fi=Math.random().toString(36).slice(2),De="__reactFiber$"+fi,je="__reactProps$"+fi,Ss="__reactContainer$"+fi,rc="__reactEvents$"+fi,Av="__reactListeners$"+fi,Sv="__reactHandles$"+fi,Pd="__reactResources$"+fi,xa="__reactMarker$"+fi;function oc(n){delete n[De],delete n[je],delete n[rc],delete n[Av],delete n[Sv]}function ws(n){var i=n[De];if(i)return i;for(var r=n.parentNode;r;){if(i=r[Ss]||r[De]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(n=Jg(n);n!==null;){if(r=n[De])return r;n=Jg(n)}return i}n=r,r=n.parentNode}return null}function Es(n){if(n=n[De]||n[Ss]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Ta(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function _s(n){var i=n[Pd];return i||(i=n[Pd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ve(n){n[xa]=!0}var Bd=new Set,Fd={};function ji(n,i){xs(n,i),xs(n+"Capture",i)}function xs(n,i){for(Fd[n]=i,n=0;n<i.length;n++)Bd.add(i[n])}var wv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ud={},Id={};function Ev(n){return Ze.call(Id,n)?!0:Ze.call(Ud,n)?!1:wv.test(n)?Id[n]=!0:(Ud[n]=!0,!1)}function ao(n,i,r){if(Ev(i))if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+r)}}function ro(n,i,r){if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+r)}}function Vn(n,i,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(i,r,""+u)}}var lc,zd;function Ts(n){if(lc===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);lc=i&&i[1]||"",zd=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lc+n+zd}var cc=!1;function uc(n,i){if(!n||cc)return"";cc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var j=G}Reflect.construct(n,[],W)}else{try{W.call()}catch(G){j=G}n.call(W.prototype)}}else{try{throw Error()}catch(G){j=G}(W=n())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&j&&typeof G.stack=="string")return[G.stack,j.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),S=m[0],_=m[1];if(S&&_){var M=S.split(`
`),z=_.split(`
`);for(f=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(u===M.length||f===z.length)for(u=M.length-1,f=z.length-1;1<=u&&0<=f&&M[u]!==z[f];)f--;for(;1<=u&&0<=f;u--,f--)if(M[u]!==z[f]){if(u!==1||f!==1)do if(u--,f--,0>f||M[u]!==z[f]){var Y=`
`+M[u].replace(" at new "," at ");return n.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",n.displayName)),Y}while(1<=u&&0<=f);break}}}finally{cc=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?Ts(r):""}function _v(n){switch(n.tag){case 26:case 27:case 5:return Ts(n.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 15:return uc(n.type,!1);case 11:return uc(n.type.render,!1);case 1:return uc(n.type,!0);case 31:return Ts("Activity");default:return""}}function Hd(n){try{var i="";do i+=_v(n),n=n.return;while(n);return i}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function un(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function jd(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function xv(n){var i=jd(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var f=r.get,m=r.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(S){u=""+S,m.call(this,S)}}),Object.defineProperty(n,i,{enumerable:r.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function oo(n){n._valueTracker||(n._valueTracker=xv(n))}function Gd(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var r=i.getValue(),u="";return n&&(u=jd(n)?n.checked?"true":"false":n.value),n=u,n!==r?(i.setValue(n),!0):!1}function lo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Tv=/[\n"\\]/g;function hn(n){return n.replace(Tv,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function hc(n,i,r,u,f,m,S,_){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),i!=null?S==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+un(i)):n.value!==""+un(i)&&(n.value=""+un(i)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),i!=null?dc(n,S,un(i)):r!=null?dc(n,S,un(r)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.name=""+un(_):n.removeAttribute("name")}function qd(n,i,r,u,f,m,S,_){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;r=r!=null?""+un(r):"",i=i!=null?""+un(i):r,_||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=_?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S)}function dc(n,i,r){i==="number"&&lo(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Rs(n,i,r,u){if(n=n.options,i){i={};for(var f=0;f<r.length;f++)i["$"+r[f]]=!0;for(r=0;r<n.length;r++)f=i.hasOwnProperty("$"+n[r].value),n[r].selected!==f&&(n[r].selected=f),f&&u&&(n[r].defaultSelected=!0)}else{for(r=""+un(r),i=null,f=0;f<n.length;f++){if(n[f].value===r){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Vd(n,i,r){if(i!=null&&(i=""+un(i),i!==n.value&&(n.value=i),r==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=r!=null?""+un(r):""}function Xd(n,i,r,u){if(i==null){if(u!=null){if(r!=null)throw Error(s(92));if(ut(u)){if(1<u.length)throw Error(s(93));u=u[0]}r=u}r==null&&(r=""),i=r}r=un(i),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u)}function Cs(n,i){if(i){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=i;return}}n.textContent=i}var Rv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yd(n,i,r){var u=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,r):typeof r!="number"||r===0||Rv.has(i)?i==="float"?n.cssFloat=r:n[i]=(""+r).trim():n[i]=r+"px"}function $d(n,i,r){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&r[f]!==u&&Yd(n,f,u)}else for(var m in i)i.hasOwnProperty(m)&&Yd(n,m,i[m])}function fc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function co(n){return Mv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var pc=null;function gc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ms=null,Ds=null;function Kd(n){var i=Es(n);if(i&&(n=i.stateNode)){var r=n[je]||null;t:switch(n=i.stateNode,i.type){case"input":if(hc(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+hn(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var u=r[i];if(u!==n&&u.form===n.form){var f=u[je]||null;if(!f)throw Error(s(90));hc(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<r.length;i++)u=r[i],u.form===n.form&&Gd(u)}break t;case"textarea":Vd(n,r.value,r.defaultValue);break t;case"select":i=r.value,i!=null&&Rs(n,!!r.multiple,i,!1)}}}var mc=!1;function Wd(n,i,r){if(mc)return n(i,r);mc=!0;try{var u=n(i);return u}finally{if(mc=!1,(Ms!==null||Ds!==null)&&(Ko(),Ms&&(i=Ms,n=Ds,Ds=Ms=null,Kd(i),n)))for(i=0;i<n.length;i++)Kd(n[i])}}function Ra(n,i){var r=n.stateNode;if(r===null)return null;var u=r[je]||null;if(u===null)return null;r=u[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(s(231,i,typeof r));return r}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=!1;if(Xn)try{var Ca={};Object.defineProperty(Ca,"passive",{get:function(){yc=!0}}),window.addEventListener("test",Ca,Ca),window.removeEventListener("test",Ca,Ca)}catch{yc=!1}var pi=null,bc=null,uo=null;function Qd(){if(uo)return uo;var n,i=bc,r=i.length,u,f="value"in pi?pi.value:pi.textContent,m=f.length;for(n=0;n<r&&i[n]===f[n];n++);var S=r-n;for(u=1;u<=S&&i[r-u]===f[m-u];u++);return uo=f.slice(n,1<u?1-u:void 0)}function ho(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function fo(){return!0}function Zd(){return!1}function Ge(n){function i(r,u,f,m,S){this._reactName=r,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var _ in n)n.hasOwnProperty(_)&&(r=n[_],this[_]=r?r(m):m[_]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?fo:Zd,this.isPropagationStopped=Zd,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),i}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=Ge(Gi),Ma=g({},Gi,{view:0,detail:0}),Dv=Ge(Ma),vc,Ac,Da,go=g({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Da&&(Da&&n.type==="mousemove"?(vc=n.screenX-Da.screenX,Ac=n.screenY-Da.screenY):Ac=vc=0,Da=n),vc)},movementY:function(n){return"movementY"in n?n.movementY:Ac}}),Jd=Ge(go),Lv=g({},go,{dataTransfer:0}),Nv=Ge(Lv),Ov=g({},Ma,{relatedTarget:0}),Sc=Ge(Ov),kv=g({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Pv=Ge(kv),Bv=g({},Gi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Fv=Ge(Bv),Uv=g({},Gi,{data:0}),tf=Ge(Uv),Iv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jv(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Hv[n])?!!i[n]:!1}function wc(){return jv}var Gv=g({},Ma,{key:function(n){if(n.key){var i=Iv[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ho(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(n){return n.type==="keypress"?ho(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ho(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qv=Ge(Gv),Vv=g({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ef=Ge(Vv),Xv=g({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),Yv=Ge(Xv),$v=g({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kv=Ge($v),Wv=g({},go,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Qv=Ge(Wv),Zv=g({},Gi,{newState:0,oldState:0}),Jv=Ge(Zv),t0=[9,13,27,32],Ec=Xn&&"CompositionEvent"in window,La=null;Xn&&"documentMode"in document&&(La=document.documentMode);var e0=Xn&&"TextEvent"in window&&!La,nf=Xn&&(!Ec||La&&8<La&&11>=La),sf=" ",af=!1;function rf(n,i){switch(n){case"keyup":return t0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function of(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ls=!1;function n0(n,i){switch(n){case"compositionend":return of(i);case"keypress":return i.which!==32?null:(af=!0,sf);case"textInput":return n=i.data,n===sf&&af?null:n;default:return null}}function i0(n,i){if(Ls)return n==="compositionend"||!Ec&&rf(n,i)?(n=Qd(),uo=bc=pi=null,Ls=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return nf&&i.locale!=="ko"?null:i.data;default:return null}}var s0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!s0[n.type]:i==="textarea"}function cf(n,i,r,u){Ms?Ds?Ds.push(u):Ds=[u]:Ms=u,i=el(i,"onChange"),0<i.length&&(r=new po("onChange","change",null,r,u),n.push({event:r,listeners:i}))}var Na=null,Oa=null;function a0(n){Gg(n,0)}function mo(n){var i=Ta(n);if(Gd(i))return n}function uf(n,i){if(n==="change")return i}var hf=!1;if(Xn){var _c;if(Xn){var xc="oninput"in document;if(!xc){var df=document.createElement("div");df.setAttribute("oninput","return;"),xc=typeof df.oninput=="function"}_c=xc}else _c=!1;hf=_c&&(!document.documentMode||9<document.documentMode)}function ff(){Na&&(Na.detachEvent("onpropertychange",pf),Oa=Na=null)}function pf(n){if(n.propertyName==="value"&&mo(Oa)){var i=[];cf(i,Oa,n,gc(n)),Wd(a0,i)}}function r0(n,i,r){n==="focusin"?(ff(),Na=i,Oa=r,Na.attachEvent("onpropertychange",pf)):n==="focusout"&&ff()}function o0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return mo(Oa)}function l0(n,i){if(n==="click")return mo(i)}function c0(n,i){if(n==="input"||n==="change")return mo(i)}function u0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Je=typeof Object.is=="function"?Object.is:u0;function ka(n,i){if(Je(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var r=Object.keys(n),u=Object.keys(i);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var f=r[u];if(!Ze.call(i,f)||!Je(n[f],i[f]))return!1}return!0}function gf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function mf(n,i){var r=gf(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=i&&u>=i)return{node:r,offset:i-n};n=u}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=gf(r)}}function yf(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?yf(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function bf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=lo(n.document);i instanceof n.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)n=i.contentWindow;else break;i=lo(n.document)}return i}function Tc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var h0=Xn&&"documentMode"in document&&11>=document.documentMode,Ns=null,Rc=null,Pa=null,Cc=!1;function vf(n,i,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Cc||Ns==null||Ns!==lo(u)||(u=Ns,"selectionStart"in u&&Tc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pa&&ka(Pa,u)||(Pa=u,u=el(Rc,"onSelect"),0<u.length&&(i=new po("onSelect","select",null,i,r),n.push({event:i,listeners:u}),i.target=Ns)))}function qi(n,i){var r={};return r[n.toLowerCase()]=i.toLowerCase(),r["Webkit"+n]="webkit"+i,r["Moz"+n]="moz"+i,r}var Os={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionrun:qi("Transition","TransitionRun"),transitionstart:qi("Transition","TransitionStart"),transitioncancel:qi("Transition","TransitionCancel"),transitionend:qi("Transition","TransitionEnd")},Mc={},Af={};Xn&&(Af=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function Vi(n){if(Mc[n])return Mc[n];if(!Os[n])return n;var i=Os[n],r;for(r in i)if(i.hasOwnProperty(r)&&r in Af)return Mc[n]=i[r];return n}var Sf=Vi("animationend"),wf=Vi("animationiteration"),Ef=Vi("animationstart"),d0=Vi("transitionrun"),f0=Vi("transitionstart"),p0=Vi("transitioncancel"),_f=Vi("transitionend"),xf=new Map,Dc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dc.push("scrollEnd");function wn(n,i){xf.set(n,i),ji(i,[n])}var Tf=new WeakMap;function dn(n,i){if(typeof n=="object"&&n!==null){var r=Tf.get(n);return r!==void 0?r:(i={value:n,source:i,stack:Hd(i)},Tf.set(n,i),i)}return{value:n,source:i,stack:Hd(i)}}var fn=[],ks=0,Lc=0;function yo(){for(var n=ks,i=Lc=ks=0;i<n;){var r=fn[i];fn[i++]=null;var u=fn[i];fn[i++]=null;var f=fn[i];fn[i++]=null;var m=fn[i];if(fn[i++]=null,u!==null&&f!==null){var S=u.pending;S===null?f.next=f:(f.next=S.next,S.next=f),u.pending=f}m!==0&&Rf(r,f,m)}}function bo(n,i,r,u){fn[ks++]=n,fn[ks++]=i,fn[ks++]=r,fn[ks++]=u,Lc|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Nc(n,i,r,u){return bo(n,i,r,u),vo(n)}function Ps(n,i){return bo(n,null,null,i),vo(n)}function Rf(n,i,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var f=!1,m=n.return;m!==null;)m.childLanes|=r,u=m.alternate,u!==null&&(u.childLanes|=r),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&i!==null&&(f=31-Jt(r),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=r|536870912),m):null}function vo(n){if(50<rr)throw rr=0,Uu=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Bs={};function g0(n,i,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(n,i,r,u){return new g0(n,i,r,u)}function Oc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Yn(n,i){var r=n.alternate;return r===null?(r=tn(n.tag,i,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=i,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,i=n.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function Cf(n,i){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,i=r.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Ao(n,i,r,u,f,m){var S=0;if(u=n,typeof n=="function")Oc(n)&&(S=1);else if(typeof n=="string")S=yA(n,r,nt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case $:return n=tn(31,r,i,f),n.elementType=$,n.lanes=m,n;case v:return Xi(r.children,f,m,i);case w:S=8,f|=24;break;case E:return n=tn(12,r,i,f|2),n.elementType=E,n.lanes=m,n;case C:return n=tn(13,r,i,f),n.elementType=C,n.lanes=m,n;case U:return n=tn(19,r,i,f),n.elementType=U,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:case T:S=10;break t;case R:S=9;break t;case D:S=11;break t;case F:S=14;break t;case V:S=16,u=null;break t}S=29,r=Error(s(130,n===null?"null":typeof n,"")),u=null}return i=tn(S,r,i,f),i.elementType=n,i.type=u,i.lanes=m,i}function Xi(n,i,r,u){return n=tn(7,n,u,i),n.lanes=r,n}function kc(n,i,r){return n=tn(6,n,null,i),n.lanes=r,n}function Pc(n,i,r){return i=tn(4,n.children!==null?n.children:[],n.key,i),i.lanes=r,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Fs=[],Us=0,So=null,wo=0,pn=[],gn=0,Yi=null,$n=1,Kn="";function $i(n,i){Fs[Us++]=wo,Fs[Us++]=So,So=n,wo=i}function Mf(n,i,r){pn[gn++]=$n,pn[gn++]=Kn,pn[gn++]=Yi,Yi=n;var u=$n;n=Kn;var f=32-Jt(u)-1;u&=~(1<<f),r+=1;var m=32-Jt(i)+f;if(30<m){var S=f-f%5;m=(u&(1<<S)-1).toString(32),u>>=S,f-=S,$n=1<<32-Jt(i)+f|r<<f|u,Kn=m+n}else $n=1<<m|r<<f|u,Kn=n}function Bc(n){n.return!==null&&($i(n,1),Mf(n,1,0))}function Fc(n){for(;n===So;)So=Fs[--Us],Fs[Us]=null,wo=Fs[--Us],Fs[Us]=null;for(;n===Yi;)Yi=pn[--gn],pn[gn]=null,Kn=pn[--gn],pn[gn]=null,$n=pn[--gn],pn[gn]=null}var Ue=null,te=null,kt=!1,Ki=null,Cn=!1,Uc=Error(s(519));function Wi(n){var i=Error(s(418,""));throw Ua(dn(i,n)),Uc}function Df(n){var i=n.stateNode,r=n.type,u=n.memoizedProps;switch(i[De]=n,i[je]=u,r){case"dialog":Rt("cancel",i),Rt("close",i);break;case"iframe":case"object":case"embed":Rt("load",i);break;case"video":case"audio":for(r=0;r<lr.length;r++)Rt(lr[r],i);break;case"source":Rt("error",i);break;case"img":case"image":case"link":Rt("error",i),Rt("load",i);break;case"details":Rt("toggle",i);break;case"input":Rt("invalid",i),qd(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),oo(i);break;case"select":Rt("invalid",i);break;case"textarea":Rt("invalid",i),Xd(i,u.value,u.defaultValue,u.children),oo(i)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||u.suppressHydrationWarning===!0||Yg(i.textContent,r)?(u.popover!=null&&(Rt("beforetoggle",i),Rt("toggle",i)),u.onScroll!=null&&Rt("scroll",i),u.onScrollEnd!=null&&Rt("scrollend",i),u.onClick!=null&&(i.onclick=nl),i=!0):i=!1,i||Wi(n)}function Lf(n){for(Ue=n.return;Ue;)switch(Ue.tag){case 5:case 13:Cn=!1;return;case 27:case 3:Cn=!0;return;default:Ue=Ue.return}}function Ba(n){if(n!==Ue)return!1;if(!kt)return Lf(n),kt=!0,!1;var i=n.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||th(n.type,n.memoizedProps)),r=!r),r&&te&&Wi(n),Lf(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));t:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){te=_n(n.nextSibling);break t}i--}else r!=="$"&&r!=="$!"&&r!=="$?"||i++;n=n.nextSibling}te=null}}else i===27?(i=te,Di(n.type)?(n=sh,sh=null,te=n):te=i):te=Ue?_n(n.stateNode.nextSibling):null;return!0}function Fa(){te=Ue=null,kt=!1}function Nf(){var n=Ki;return n!==null&&(Xe===null?Xe=n:Xe.push.apply(Xe,n),Ki=null),n}function Ua(n){Ki===null?Ki=[n]:Ki.push(n)}var Ic=X(null),Qi=null,Wn=null;function gi(n,i,r){Q(Ic,i._currentValue),i._currentValue=r}function Qn(n){n._currentValue=Ic.current,Z(Ic)}function zc(n,i,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===r)break;n=n.return}}function Hc(n,i,r,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var S=f.child;m=m.firstContext;t:for(;m!==null;){var _=m;m=f;for(var M=0;M<i.length;M++)if(_.context===i[M]){m.lanes|=r,_=m.alternate,_!==null&&(_.lanes|=r),zc(m.return,r,n),u||(S=null);break t}m=_.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(s(341));S.lanes|=r,m=S.alternate,m!==null&&(m.lanes|=r),zc(S,r,n),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===n){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function Ia(n,i,r,u){n=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var _=f.type;Je(f.pendingProps.value,S.value)||(n!==null?n.push(_):n=[_])}}else if(f===St.current){if(S=f.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(pr):n=[pr])}f=f.return}n!==null&&Hc(i,n,r,u),i.flags|=262144}function Eo(n){for(n=n.firstContext;n!==null;){if(!Je(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Zi(n){Qi=n,Wn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Le(n){return Of(Qi,n)}function _o(n,i){return Qi===null&&Zi(n),Of(n,i)}function Of(n,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},Wn===null){if(n===null)throw Error(s(308));Wn=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Wn=Wn.next=i;return r}var m0=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(r){return r()})}},y0=c.unstable_scheduleCallback,b0=c.unstable_NormalPriority,me={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jc(){return{controller:new m0,data:new Map,refCount:0}}function za(n){n.refCount--,n.refCount===0&&y0(b0,function(){n.controller.abort()})}var Ha=null,Gc=0,Is=0,zs=null;function v0(n,i){if(Ha===null){var r=Ha=[];Gc=0,Is=Vu(),zs={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Gc++,i.then(kf,kf),i}function kf(){if(--Gc===0&&Ha!==null){zs!==null&&(zs.status="fulfilled");var n=Ha;Ha=null,Is=0,zs=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function A0(n,i){var r=[],u={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<r.length;f++)(0,r[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),u}var Pf=N.S;N.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&v0(n,i),Pf!==null&&Pf(n,i)};var Ji=X(null);function qc(){var n=Ji.current;return n!==null?n:Vt.pooledCache}function xo(n,i){i===null?Q(Ji,Ji.current):Q(Ji,i.pool)}function Bf(){var n=qc();return n===null?null:{parent:me._currentValue,pool:n}}var ja=Error(s(460)),Ff=Error(s(474)),To=Error(s(542)),Vc={then:function(){}};function Uf(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ro(){}function If(n,i,r){switch(r=n[r],r===void 0?n.push(i):r!==i&&(i.then(Ro,Ro),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Hf(n),n;default:if(typeof i.status=="string")i.then(Ro,Ro);else{if(n=Vt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Hf(n),n}throw Ga=i,ja}}var Ga=null;function zf(){if(Ga===null)throw Error(s(459));var n=Ga;return Ga=null,n}function Hf(n){if(n===ja||n===To)throw Error(s(483))}var mi=!1;function Xc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yc(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function yi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function bi(n,i,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Pt&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=vo(n),Rf(n,null,r),i}return bo(n,u,i,r),vo(n)}function qa(n,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,r|=u,i.lanes=r,Od(n,r)}}function $c(n,i){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=S:m=m.next=S,r=r.next}while(r!==null);m===null?f=m=i:m=m.next=i}else f=m=i;r={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=i:n.next=i,r.lastBaseUpdate=i}var Kc=!1;function Va(){if(Kc){var n=zs;if(n!==null)throw n}}function Xa(n,i,r,u){Kc=!1;var f=n.updateQueue;mi=!1;var m=f.firstBaseUpdate,S=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var M=_,z=M.next;M.next=null,S===null?m=z:S.next=z,S=M;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,_=Y.lastBaseUpdate,_!==S&&(_===null?Y.firstBaseUpdate=z:_.next=z,Y.lastBaseUpdate=M))}if(m!==null){var W=f.baseState;S=0,Y=z=M=null,_=m;do{var j=_.lane&-536870913,G=j!==_.lane;if(G?(Nt&j)===j:(u&j)===j){j!==0&&j===Is&&(Kc=!0),Y!==null&&(Y=Y.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var mt=n,ft=_;j=i;var zt=r;switch(ft.tag){case 1:if(mt=ft.payload,typeof mt=="function"){W=mt.call(zt,W,j);break t}W=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=ft.payload,j=typeof mt=="function"?mt.call(zt,W,j):mt,j==null)break t;W=g({},W,j);break t;case 2:mi=!0}}j=_.callback,j!==null&&(n.flags|=64,G&&(n.flags|=8192),G=f.callbacks,G===null?f.callbacks=[j]:G.push(j))}else G={lane:j,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Y===null?(z=Y=G,M=W):Y=Y.next=G,S|=j;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;G=_,_=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);Y===null&&(M=W),f.baseState=M,f.firstBaseUpdate=z,f.lastBaseUpdate=Y,m===null&&(f.shared.lanes=0),Ti|=S,n.lanes=S,n.memoizedState=W}}function jf(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Gf(n,i){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)jf(r[n],i)}var Hs=X(null),Co=X(0);function qf(n,i){n=si,Q(Co,n),Q(Hs,i),si=n|i.baseLanes}function Wc(){Q(Co,si),Q(Hs,Hs.current)}function Qc(){si=Co.current,Z(Hs),Z(Co)}var vi=0,_t=null,Ut=null,de=null,Mo=!1,js=!1,ts=!1,Do=0,Ya=0,Gs=null,S0=0;function se(){throw Error(s(321))}function Zc(n,i){if(i===null)return!1;for(var r=0;r<i.length&&r<n.length;r++)if(!Je(n[r],i[r]))return!1;return!0}function Jc(n,i,r,u,f,m){return vi=m,_t=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,N.H=n===null||n.memoizedState===null?Rp:Cp,ts=!1,m=r(u,f),ts=!1,js&&(m=Xf(i,r,u,f)),Vf(n),m}function Vf(n){N.H=Bo;var i=Ut!==null&&Ut.next!==null;if(vi=0,de=Ut=_t=null,Mo=!1,Ya=0,Gs=null,i)throw Error(s(300));n===null||Ae||(n=n.dependencies,n!==null&&Eo(n)&&(Ae=!0))}function Xf(n,i,r,u){_t=n;var f=0;do{if(js&&(Gs=null),Ya=0,js=!1,25<=f)throw Error(s(301));if(f+=1,de=Ut=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}N.H=C0,m=i(r,u)}while(js);return m}function w0(){var n=N.H,i=n.useState()[0];return i=typeof i.then=="function"?$a(i):i,n=n.useState()[0],(Ut!==null?Ut.memoizedState:null)!==n&&(_t.flags|=1024),i}function tu(){var n=Do!==0;return Do=0,n}function eu(n,i,r){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~r}function nu(n){if(Mo){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Mo=!1}vi=0,de=Ut=_t=null,js=!1,Ya=Do=0,Gs=null}function qe(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?_t.memoizedState=de=n:de=de.next=n,de}function fe(){if(Ut===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=Ut.next;var i=de===null?_t.memoizedState:de.next;if(i!==null)de=i,Ut=n;else{if(n===null)throw _t.alternate===null?Error(s(467)):Error(s(310));Ut=n,n={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},de===null?_t.memoizedState=de=n:de=de.next=n}return de}function iu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $a(n){var i=Ya;return Ya+=1,Gs===null&&(Gs=[]),n=If(Gs,n,i),i=_t,(de===null?i.memoizedState:de.next)===null&&(i=i.alternate,N.H=i===null||i.memoizedState===null?Rp:Cp),n}function Lo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return $a(n);if(n.$$typeof===T)return Le(n)}throw Error(s(438,String(n)))}function su(n){var i=null,r=_t.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var u=_t.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=iu(),_t.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(n),u=0;u<n;u++)r[u]=J;return i.index++,r}function Zn(n,i){return typeof i=="function"?i(n):i}function No(n){var i=fe();return au(i,Ut,n)}function au(n,i,r){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var S=f.next;f.next=m.next,m.next=S}i.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{i=f.next;var _=S=null,M=null,z=i,Y=!1;do{var W=z.lane&-536870913;if(W!==z.lane?(Nt&W)===W:(vi&W)===W){var j=z.revertLane;if(j===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),W===Is&&(Y=!0);else if((vi&j)===j){z=z.next,j===Is&&(Y=!0);continue}else W={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},M===null?(_=M=W,S=m):M=M.next=W,_t.lanes|=j,Ti|=j;W=z.action,ts&&r(m,W),m=z.hasEagerState?z.eagerState:r(m,W)}else j={lane:W,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},M===null?(_=M=j,S=m):M=M.next=j,_t.lanes|=W,Ti|=W;z=z.next}while(z!==null&&z!==i);if(M===null?S=m:M.next=_,!Je(m,n.memoizedState)&&(Ae=!0,Y&&(r=zs,r!==null)))throw r;n.memoizedState=m,n.baseState=S,n.baseQueue=M,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function ru(n){var i=fe(),r=i.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var u=r.dispatch,f=r.pending,m=i.memoizedState;if(f!==null){r.pending=null;var S=f=f.next;do m=n(m,S.action),S=S.next;while(S!==f);Je(m,i.memoizedState)||(Ae=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),r.lastRenderedState=m}return[m,u]}function Yf(n,i,r){var u=_t,f=fe(),m=kt;if(m){if(r===void 0)throw Error(s(407));r=r()}else r=i();var S=!Je((Ut||f).memoizedState,r);S&&(f.memoizedState=r,Ae=!0),f=f.queue;var _=Wf.bind(null,u,f,n);if(Ka(2048,8,_,[n]),f.getSnapshot!==i||S||de!==null&&de.memoizedState.tag&1){if(u.flags|=2048,qs(9,Oo(),Kf.bind(null,u,f,r,i),null),Vt===null)throw Error(s(349));m||(vi&124)!==0||$f(u,i,r)}return r}function $f(n,i,r){n.flags|=16384,n={getSnapshot:i,value:r},i=_t.updateQueue,i===null?(i=iu(),_t.updateQueue=i,i.stores=[n]):(r=i.stores,r===null?i.stores=[n]:r.push(n))}function Kf(n,i,r,u){i.value=r,i.getSnapshot=u,Qf(i)&&Zf(n)}function Wf(n,i,r){return r(function(){Qf(i)&&Zf(n)})}function Qf(n){var i=n.getSnapshot;n=n.value;try{var r=i();return!Je(n,r)}catch{return!0}}function Zf(n){var i=Ps(n,2);i!==null&&rn(i,n,2)}function ou(n){var i=qe();if(typeof n=="function"){var r=n;if(n=r(),ts){Fe(!0);try{r()}finally{Fe(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:n},i}function Jf(n,i,r,u){return n.baseState=r,au(n,Ut,typeof u=="function"?u:Zn)}function E0(n,i,r,u,f){if(Po(n))throw Error(s(485));if(n=i.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};N.T!==null?r(!0):m.isTransition=!1,u(m),r=i.pending,r===null?(m.next=i.pending=m,tp(i,m)):(m.next=r.next,i.pending=r.next=m)}}function tp(n,i){var r=i.action,u=i.payload,f=n.state;if(i.isTransition){var m=N.T,S={};N.T=S;try{var _=r(f,u),M=N.S;M!==null&&M(S,_),ep(n,i,_)}catch(z){lu(n,i,z)}finally{N.T=m}}else try{m=r(f,u),ep(n,i,m)}catch(z){lu(n,i,z)}}function ep(n,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){np(n,i,u)},function(u){return lu(n,i,u)}):np(n,i,r)}function np(n,i,r){i.status="fulfilled",i.value=r,ip(i),n.state=r,i=n.pending,i!==null&&(r=i.next,r===i?n.pending=null:(r=r.next,i.next=r,tp(n,r)))}function lu(n,i,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=r,ip(i),i=i.next;while(i!==u)}n.action=null}function ip(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function sp(n,i){return i}function ap(n,i){if(kt){var r=Vt.formState;if(r!==null){t:{var u=_t;if(kt){if(te){e:{for(var f=te,m=Cn;f.nodeType!==8;){if(!m){f=null;break e}if(f=_n(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){te=_n(f.nextSibling),u=f.data==="F!";break t}}Wi(u)}u=!1}u&&(i=r[0])}}return r=qe(),r.memoizedState=r.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sp,lastRenderedState:i},r.queue=u,r=_p.bind(null,_t,u),u.dispatch=r,u=ou(!1),m=fu.bind(null,_t,!1,u.queue),u=qe(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,r=E0.bind(null,_t,f,m,r),f.dispatch=r,u.memoizedState=n,[i,r,!1]}function rp(n){var i=fe();return op(i,Ut,n)}function op(n,i,r){if(i=au(n,i,sp)[0],n=No(Zn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=$a(i)}catch(S){throw S===ja?To:S}else u=i;i=fe();var f=i.queue,m=f.dispatch;return r!==i.memoizedState&&(_t.flags|=2048,qs(9,Oo(),_0.bind(null,f,r),null)),[u,m,n]}function _0(n,i){n.action=i}function lp(n){var i=fe(),r=Ut;if(r!==null)return op(i,r,n);fe(),i=i.memoizedState,r=fe();var u=r.queue.dispatch;return r.memoizedState=n,[i,u,!1]}function qs(n,i,r,u){return n={tag:n,create:r,deps:u,inst:i,next:null},i=_t.updateQueue,i===null&&(i=iu(),_t.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,i.lastEffect=n),n}function Oo(){return{destroy:void 0,resource:void 0}}function cp(){return fe().memoizedState}function ko(n,i,r,u){var f=qe();u=u===void 0?null:u,_t.flags|=n,f.memoizedState=qs(1|i,Oo(),r,u)}function Ka(n,i,r,u){var f=fe();u=u===void 0?null:u;var m=f.memoizedState.inst;Ut!==null&&u!==null&&Zc(u,Ut.memoizedState.deps)?f.memoizedState=qs(i,m,r,u):(_t.flags|=n,f.memoizedState=qs(1|i,m,r,u))}function up(n,i){ko(8390656,8,n,i)}function hp(n,i){Ka(2048,8,n,i)}function dp(n,i){return Ka(4,2,n,i)}function fp(n,i){return Ka(4,4,n,i)}function pp(n,i){if(typeof i=="function"){n=n();var r=i(n);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function gp(n,i,r){r=r!=null?r.concat([n]):null,Ka(4,4,pp.bind(null,i,n),r)}function cu(){}function mp(n,i){var r=fe();i=i===void 0?null:i;var u=r.memoizedState;return i!==null&&Zc(i,u[1])?u[0]:(r.memoizedState=[n,i],n)}function yp(n,i){var r=fe();i=i===void 0?null:i;var u=r.memoizedState;if(i!==null&&Zc(i,u[1]))return u[0];if(u=n(),ts){Fe(!0);try{n()}finally{Fe(!1)}}return r.memoizedState=[u,i],u}function uu(n,i,r){return r===void 0||(vi&1073741824)!==0?n.memoizedState=i:(n.memoizedState=r,n=Ag(),_t.lanes|=n,Ti|=n,r)}function bp(n,i,r,u){return Je(r,i)?r:Hs.current!==null?(n=uu(n,r,u),Je(n,i)||(Ae=!0),n):(vi&42)===0?(Ae=!0,n.memoizedState=r):(n=Ag(),_t.lanes|=n,Ti|=n,i)}function vp(n,i,r,u,f){var m=H.p;H.p=m!==0&&8>m?m:8;var S=N.T,_={};N.T=_,fu(n,!1,i,r);try{var M=f(),z=N.S;if(z!==null&&z(_,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Y=A0(M,u);Wa(n,i,Y,an(n))}else Wa(n,i,u,an(n))}catch(W){Wa(n,i,{then:function(){},status:"rejected",reason:W},an())}finally{H.p=m,N.T=S}}function x0(){}function hu(n,i,r,u){if(n.tag!==5)throw Error(s(476));var f=Ap(n).queue;vp(n,f,i,et,r===null?x0:function(){return Sp(n),r(u)})}function Ap(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:et},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:r},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Sp(n){var i=Ap(n).next.queue;Wa(n,i,{},an())}function du(){return Le(pr)}function wp(){return fe().memoizedState}function Ep(){return fe().memoizedState}function T0(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var r=an();n=yi(r);var u=bi(i,n,r);u!==null&&(rn(u,i,r),qa(u,i,r)),i={cache:jc()},n.payload=i;return}i=i.return}}function R0(n,i,r){var u=an();r={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Po(n)?xp(i,r):(r=Nc(n,i,r,u),r!==null&&(rn(r,n,u),Tp(r,i,u)))}function _p(n,i,r){var u=an();Wa(n,i,r,u)}function Wa(n,i,r,u){var f={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Po(n))xp(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var S=i.lastRenderedState,_=m(S,r);if(f.hasEagerState=!0,f.eagerState=_,Je(_,S))return bo(n,i,f,0),Vt===null&&yo(),!1}catch{}finally{}if(r=Nc(n,i,f,u),r!==null)return rn(r,n,u),Tp(r,i,u),!0}return!1}function fu(n,i,r,u){if(u={lane:2,revertLane:Vu(),action:u,hasEagerState:!1,eagerState:null,next:null},Po(n)){if(i)throw Error(s(479))}else i=Nc(n,r,u,2),i!==null&&rn(i,n,2)}function Po(n){var i=n.alternate;return n===_t||i!==null&&i===_t}function xp(n,i){js=Mo=!0;var r=n.pending;r===null?i.next=i:(i.next=r.next,r.next=i),n.pending=i}function Tp(n,i,r){if((r&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,r|=u,i.lanes=r,Od(n,r)}}var Bo={readContext:Le,use:Lo,useCallback:se,useContext:se,useEffect:se,useImperativeHandle:se,useLayoutEffect:se,useInsertionEffect:se,useMemo:se,useReducer:se,useRef:se,useState:se,useDebugValue:se,useDeferredValue:se,useTransition:se,useSyncExternalStore:se,useId:se,useHostTransitionStatus:se,useFormState:se,useActionState:se,useOptimistic:se,useMemoCache:se,useCacheRefresh:se},Rp={readContext:Le,use:Lo,useCallback:function(n,i){return qe().memoizedState=[n,i===void 0?null:i],n},useContext:Le,useEffect:up,useImperativeHandle:function(n,i,r){r=r!=null?r.concat([n]):null,ko(4194308,4,pp.bind(null,i,n),r)},useLayoutEffect:function(n,i){return ko(4194308,4,n,i)},useInsertionEffect:function(n,i){ko(4,2,n,i)},useMemo:function(n,i){var r=qe();i=i===void 0?null:i;var u=n();if(ts){Fe(!0);try{n()}finally{Fe(!1)}}return r.memoizedState=[u,i],u},useReducer:function(n,i,r){var u=qe();if(r!==void 0){var f=r(i);if(ts){Fe(!0);try{r(i)}finally{Fe(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=R0.bind(null,_t,n),[u.memoizedState,n]},useRef:function(n){var i=qe();return n={current:n},i.memoizedState=n},useState:function(n){n=ou(n);var i=n.queue,r=_p.bind(null,_t,i);return i.dispatch=r,[n.memoizedState,r]},useDebugValue:cu,useDeferredValue:function(n,i){var r=qe();return uu(r,n,i)},useTransition:function(){var n=ou(!1);return n=vp.bind(null,_t,n.queue,!0,!1),qe().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,r){var u=_t,f=qe();if(kt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=i(),Vt===null)throw Error(s(349));(Nt&124)!==0||$f(u,i,r)}f.memoizedState=r;var m={value:r,getSnapshot:i};return f.queue=m,up(Wf.bind(null,u,m,n),[n]),u.flags|=2048,qs(9,Oo(),Kf.bind(null,u,m,r,i),null),r},useId:function(){var n=qe(),i=Vt.identifierPrefix;if(kt){var r=Kn,u=$n;r=(u&~(1<<32-Jt(u)-1)).toString(32)+r,i="«"+i+"R"+r,r=Do++,0<r&&(i+="H"+r.toString(32)),i+="»"}else r=S0++,i="«"+i+"r"+r.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:du,useFormState:ap,useActionState:ap,useOptimistic:function(n){var i=qe();i.memoizedState=i.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=fu.bind(null,_t,!0,r),r.dispatch=i,[n,i]},useMemoCache:su,useCacheRefresh:function(){return qe().memoizedState=T0.bind(null,_t)}},Cp={readContext:Le,use:Lo,useCallback:mp,useContext:Le,useEffect:hp,useImperativeHandle:gp,useInsertionEffect:dp,useLayoutEffect:fp,useMemo:yp,useReducer:No,useRef:cp,useState:function(){return No(Zn)},useDebugValue:cu,useDeferredValue:function(n,i){var r=fe();return bp(r,Ut.memoizedState,n,i)},useTransition:function(){var n=No(Zn)[0],i=fe().memoizedState;return[typeof n=="boolean"?n:$a(n),i]},useSyncExternalStore:Yf,useId:wp,useHostTransitionStatus:du,useFormState:rp,useActionState:rp,useOptimistic:function(n,i){var r=fe();return Jf(r,Ut,n,i)},useMemoCache:su,useCacheRefresh:Ep},C0={readContext:Le,use:Lo,useCallback:mp,useContext:Le,useEffect:hp,useImperativeHandle:gp,useInsertionEffect:dp,useLayoutEffect:fp,useMemo:yp,useReducer:ru,useRef:cp,useState:function(){return ru(Zn)},useDebugValue:cu,useDeferredValue:function(n,i){var r=fe();return Ut===null?uu(r,n,i):bp(r,Ut.memoizedState,n,i)},useTransition:function(){var n=ru(Zn)[0],i=fe().memoizedState;return[typeof n=="boolean"?n:$a(n),i]},useSyncExternalStore:Yf,useId:wp,useHostTransitionStatus:du,useFormState:lp,useActionState:lp,useOptimistic:function(n,i){var r=fe();return Ut!==null?Jf(r,Ut,n,i):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:su,useCacheRefresh:Ep},Vs=null,Qa=0;function Fo(n){var i=Qa;return Qa+=1,Vs===null&&(Vs=[]),If(Vs,n,i)}function Za(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Uo(n,i){throw i.$$typeof===y?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Mp(n){var i=n._init;return i(n._payload)}function Dp(n){function i(B,O){if(n){var I=B.deletions;I===null?(B.deletions=[O],B.flags|=16):I.push(O)}}function r(B,O){if(!n)return null;for(;O!==null;)i(B,O),O=O.sibling;return null}function u(B){for(var O=new Map;B!==null;)B.key!==null?O.set(B.key,B):O.set(B.index,B),B=B.sibling;return O}function f(B,O){return B=Yn(B,O),B.index=0,B.sibling=null,B}function m(B,O,I){return B.index=I,n?(I=B.alternate,I!==null?(I=I.index,I<O?(B.flags|=67108866,O):I):(B.flags|=67108866,O)):(B.flags|=1048576,O)}function S(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function _(B,O,I,K){return O===null||O.tag!==6?(O=kc(I,B.mode,K),O.return=B,O):(O=f(O,I),O.return=B,O)}function M(B,O,I,K){var rt=I.type;return rt===v?Y(B,O,I.props.children,K,I.key):O!==null&&(O.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===V&&Mp(rt)===O.type)?(O=f(O,I.props),Za(O,I),O.return=B,O):(O=Ao(I.type,I.key,I.props,null,B.mode,K),Za(O,I),O.return=B,O)}function z(B,O,I,K){return O===null||O.tag!==4||O.stateNode.containerInfo!==I.containerInfo||O.stateNode.implementation!==I.implementation?(O=Pc(I,B.mode,K),O.return=B,O):(O=f(O,I.children||[]),O.return=B,O)}function Y(B,O,I,K,rt){return O===null||O.tag!==7?(O=Xi(I,B.mode,K,rt),O.return=B,O):(O=f(O,I),O.return=B,O)}function W(B,O,I){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=kc(""+O,B.mode,I),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case b:return I=Ao(O.type,O.key,O.props,null,B.mode,I),Za(I,O),I.return=B,I;case A:return O=Pc(O,B.mode,I),O.return=B,O;case V:var K=O._init;return O=K(O._payload),W(B,O,I)}if(ut(O)||st(O))return O=Xi(O,B.mode,I,null),O.return=B,O;if(typeof O.then=="function")return W(B,Fo(O),I);if(O.$$typeof===T)return W(B,_o(B,O),I);Uo(B,O)}return null}function j(B,O,I,K){var rt=O!==null?O.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return rt!==null?null:_(B,O,""+I,K);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return I.key===rt?M(B,O,I,K):null;case A:return I.key===rt?z(B,O,I,K):null;case V:return rt=I._init,I=rt(I._payload),j(B,O,I,K)}if(ut(I)||st(I))return rt!==null?null:Y(B,O,I,K,null);if(typeof I.then=="function")return j(B,O,Fo(I),K);if(I.$$typeof===T)return j(B,O,_o(B,I),K);Uo(B,I)}return null}function G(B,O,I,K,rt){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return B=B.get(I)||null,_(O,B,""+K,rt);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case b:return B=B.get(K.key===null?I:K.key)||null,M(O,B,K,rt);case A:return B=B.get(K.key===null?I:K.key)||null,z(O,B,K,rt);case V:var xt=K._init;return K=xt(K._payload),G(B,O,I,K,rt)}if(ut(K)||st(K))return B=B.get(I)||null,Y(O,B,K,rt,null);if(typeof K.then=="function")return G(B,O,I,Fo(K),rt);if(K.$$typeof===T)return G(B,O,I,_o(O,K),rt);Uo(O,K)}return null}function mt(B,O,I,K){for(var rt=null,xt=null,lt=O,pt=O=0,we=null;lt!==null&&pt<I.length;pt++){lt.index>pt?(we=lt,lt=null):we=lt.sibling;var Ot=j(B,lt,I[pt],K);if(Ot===null){lt===null&&(lt=we);break}n&&lt&&Ot.alternate===null&&i(B,lt),O=m(Ot,O,pt),xt===null?rt=Ot:xt.sibling=Ot,xt=Ot,lt=we}if(pt===I.length)return r(B,lt),kt&&$i(B,pt),rt;if(lt===null){for(;pt<I.length;pt++)lt=W(B,I[pt],K),lt!==null&&(O=m(lt,O,pt),xt===null?rt=lt:xt.sibling=lt,xt=lt);return kt&&$i(B,pt),rt}for(lt=u(lt);pt<I.length;pt++)we=G(lt,B,pt,I[pt],K),we!==null&&(n&&we.alternate!==null&&lt.delete(we.key===null?pt:we.key),O=m(we,O,pt),xt===null?rt=we:xt.sibling=we,xt=we);return n&&lt.forEach(function(Pi){return i(B,Pi)}),kt&&$i(B,pt),rt}function ft(B,O,I,K){if(I==null)throw Error(s(151));for(var rt=null,xt=null,lt=O,pt=O=0,we=null,Ot=I.next();lt!==null&&!Ot.done;pt++,Ot=I.next()){lt.index>pt?(we=lt,lt=null):we=lt.sibling;var Pi=j(B,lt,Ot.value,K);if(Pi===null){lt===null&&(lt=we);break}n&&lt&&Pi.alternate===null&&i(B,lt),O=m(Pi,O,pt),xt===null?rt=Pi:xt.sibling=Pi,xt=Pi,lt=we}if(Ot.done)return r(B,lt),kt&&$i(B,pt),rt;if(lt===null){for(;!Ot.done;pt++,Ot=I.next())Ot=W(B,Ot.value,K),Ot!==null&&(O=m(Ot,O,pt),xt===null?rt=Ot:xt.sibling=Ot,xt=Ot);return kt&&$i(B,pt),rt}for(lt=u(lt);!Ot.done;pt++,Ot=I.next())Ot=G(lt,B,pt,Ot.value,K),Ot!==null&&(n&&Ot.alternate!==null&&lt.delete(Ot.key===null?pt:Ot.key),O=m(Ot,O,pt),xt===null?rt=Ot:xt.sibling=Ot,xt=Ot);return n&&lt.forEach(function(MA){return i(B,MA)}),kt&&$i(B,pt),rt}function zt(B,O,I,K){if(typeof I=="object"&&I!==null&&I.type===v&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case b:t:{for(var rt=I.key;O!==null;){if(O.key===rt){if(rt=I.type,rt===v){if(O.tag===7){r(B,O.sibling),K=f(O,I.props.children),K.return=B,B=K;break t}}else if(O.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===V&&Mp(rt)===O.type){r(B,O.sibling),K=f(O,I.props),Za(K,I),K.return=B,B=K;break t}r(B,O);break}else i(B,O);O=O.sibling}I.type===v?(K=Xi(I.props.children,B.mode,K,I.key),K.return=B,B=K):(K=Ao(I.type,I.key,I.props,null,B.mode,K),Za(K,I),K.return=B,B=K)}return S(B);case A:t:{for(rt=I.key;O!==null;){if(O.key===rt)if(O.tag===4&&O.stateNode.containerInfo===I.containerInfo&&O.stateNode.implementation===I.implementation){r(B,O.sibling),K=f(O,I.children||[]),K.return=B,B=K;break t}else{r(B,O);break}else i(B,O);O=O.sibling}K=Pc(I,B.mode,K),K.return=B,B=K}return S(B);case V:return rt=I._init,I=rt(I._payload),zt(B,O,I,K)}if(ut(I))return mt(B,O,I,K);if(st(I)){if(rt=st(I),typeof rt!="function")throw Error(s(150));return I=rt.call(I),ft(B,O,I,K)}if(typeof I.then=="function")return zt(B,O,Fo(I),K);if(I.$$typeof===T)return zt(B,O,_o(B,I),K);Uo(B,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,O!==null&&O.tag===6?(r(B,O.sibling),K=f(O,I),K.return=B,B=K):(r(B,O),K=kc(I,B.mode,K),K.return=B,B=K),S(B)):r(B,O)}return function(B,O,I,K){try{Qa=0;var rt=zt(B,O,I,K);return Vs=null,rt}catch(lt){if(lt===ja||lt===To)throw lt;var xt=tn(29,lt,null,B.mode);return xt.lanes=K,xt.return=B,xt}finally{}}}var Xs=Dp(!0),Lp=Dp(!1),mn=X(null),Mn=null;function Ai(n){var i=n.alternate;Q(ye,ye.current&1),Q(mn,n),Mn===null&&(i===null||Hs.current!==null||i.memoizedState!==null)&&(Mn=n)}function Np(n){if(n.tag===22){if(Q(ye,ye.current),Q(mn,n),Mn===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Mn=n)}}else Si()}function Si(){Q(ye,ye.current),Q(mn,mn.current)}function Jn(n){Z(mn),Mn===n&&(Mn=null),Z(ye)}var ye=X(0);function Io(n){for(var i=n;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||ih(r)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function pu(n,i,r,u){i=n.memoizedState,r=r(u,i),r=r==null?i:g({},i,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var gu={enqueueSetState:function(n,i,r){n=n._reactInternals;var u=an(),f=yi(u);f.payload=i,r!=null&&(f.callback=r),i=bi(n,f,u),i!==null&&(rn(i,n,u),qa(i,n,u))},enqueueReplaceState:function(n,i,r){n=n._reactInternals;var u=an(),f=yi(u);f.tag=1,f.payload=i,r!=null&&(f.callback=r),i=bi(n,f,u),i!==null&&(rn(i,n,u),qa(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var r=an(),u=yi(r);u.tag=2,i!=null&&(u.callback=i),i=bi(n,u,r),i!==null&&(rn(i,n,r),qa(i,n,r))}};function Op(n,i,r,u,f,m,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,S):i.prototype&&i.prototype.isPureReactComponent?!ka(r,u)||!ka(f,m):!0}function kp(n,i,r,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,u),i.state!==n&&gu.enqueueReplaceState(i,i.state,null)}function es(n,i){var r=i;if("ref"in i){r={};for(var u in i)u!=="ref"&&(r[u]=i[u])}if(n=n.defaultProps){r===i&&(r=g({},r));for(var f in n)r[f]===void 0&&(r[f]=n[f])}return r}var zo=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Pp(n){zo(n)}function Bp(n){console.error(n)}function Fp(n){zo(n)}function Ho(n,i){try{var r=n.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Up(n,i,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function mu(n,i,r){return r=yi(r),r.tag=3,r.payload={element:null},r.callback=function(){Ho(n,i)},r}function Ip(n){return n=yi(n),n.tag=3,n}function zp(n,i,r,u){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){Up(i,r,u)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Up(i,r,u),typeof f!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var _=u.stack;this.componentDidCatch(u.value,{componentStack:_!==null?_:""})})}function M0(n,i,r,u,f){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=r.alternate,i!==null&&Ia(i,r,f,!0),r=mn.current,r!==null){switch(r.tag){case 13:return Mn===null?zu():r.alternate===null&&ee===0&&(ee=3),r.flags&=-257,r.flags|=65536,r.lanes=f,u===Vc?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([u]):i.add(u),ju(n,u,f)),!1;case 22:return r.flags|=65536,u===Vc?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([u]):r.add(u)),ju(n,u,f)),!1}throw Error(s(435,r.tag))}return ju(n,u,f),zu(),!1}if(kt)return i=mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Uc&&(n=Error(s(422),{cause:u}),Ua(dn(n,r)))):(u!==Uc&&(i=Error(s(423),{cause:u}),Ua(dn(i,r))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=dn(u,r),f=mu(n.stateNode,u,f),$c(n,f),ee!==4&&(ee=2)),!1;var m=Error(s(520),{cause:u});if(m=dn(m,r),ar===null?ar=[m]:ar.push(m),ee!==4&&(ee=2),i===null)return!0;u=dn(u,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,n=f&-f,r.lanes|=n,n=mu(r.stateNode,u,n),$c(r,n),!1;case 1:if(i=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ri===null||!Ri.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Ip(f),zp(f,n,r,u),$c(r,f),!1}r=r.return}while(r!==null);return!1}var Hp=Error(s(461)),Ae=!1;function Te(n,i,r,u){i.child=n===null?Lp(i,null,r,u):Xs(i,n.child,r,u)}function jp(n,i,r,u,f){r=r.render;var m=i.ref;if("ref"in u){var S={};for(var _ in u)_!=="ref"&&(S[_]=u[_])}else S=u;return Zi(i),u=Jc(n,i,r,S,m,f),_=tu(),n!==null&&!Ae?(eu(n,i,f),ti(n,i,f)):(kt&&_&&Bc(i),i.flags|=1,Te(n,i,u,f),i.child)}function Gp(n,i,r,u,f){if(n===null){var m=r.type;return typeof m=="function"&&!Oc(m)&&m.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=m,qp(n,i,m,u,f)):(n=Ao(r.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!_u(n,f)){var S=m.memoizedProps;if(r=r.compare,r=r!==null?r:ka,r(S,u)&&n.ref===i.ref)return ti(n,i,f)}return i.flags|=1,n=Yn(m,u),n.ref=i.ref,n.return=i,i.child=n}function qp(n,i,r,u,f){if(n!==null){var m=n.memoizedProps;if(ka(m,u)&&n.ref===i.ref)if(Ae=!1,i.pendingProps=u=m,_u(n,f))(n.flags&131072)!==0&&(Ae=!0);else return i.lanes=n.lanes,ti(n,i,f)}return yu(n,i,r,u,f)}function Vp(n,i,r){var u=i.pendingProps,f=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|r:r,n!==null){for(f=i.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return Xp(n,i,u,r)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&xo(i,m!==null?m.cachePool:null),m!==null?qf(i,m):Wc(),Np(i);else return i.lanes=i.childLanes=536870912,Xp(n,i,m!==null?m.baseLanes|r:r,r)}else m!==null?(xo(i,m.cachePool),qf(i,m),Si(),i.memoizedState=null):(n!==null&&xo(i,null),Wc(),Si());return Te(n,i,f,r),i.child}function Xp(n,i,r,u){var f=qc();return f=f===null?null:{parent:me._currentValue,pool:f},i.memoizedState={baseLanes:r,cachePool:f},n!==null&&xo(i,null),Wc(),Np(i),n!==null&&Ia(n,i,u,!0),null}function jo(n,i){var r=i.ref;if(r===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(n===null||n.ref!==r)&&(i.flags|=4194816)}}function yu(n,i,r,u,f){return Zi(i),r=Jc(n,i,r,u,void 0,f),u=tu(),n!==null&&!Ae?(eu(n,i,f),ti(n,i,f)):(kt&&u&&Bc(i),i.flags|=1,Te(n,i,r,f),i.child)}function Yp(n,i,r,u,f,m){return Zi(i),i.updateQueue=null,r=Xf(i,u,r,f),Vf(n),u=tu(),n!==null&&!Ae?(eu(n,i,m),ti(n,i,m)):(kt&&u&&Bc(i),i.flags|=1,Te(n,i,r,m),i.child)}function $p(n,i,r,u,f){if(Zi(i),i.stateNode===null){var m=Bs,S=r.contextType;typeof S=="object"&&S!==null&&(m=Le(S)),m=new r(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=gu,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},Xc(i),S=r.contextType,m.context=typeof S=="object"&&S!==null?Le(S):Bs,m.state=i.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(pu(i,r,S,u),m.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&gu.enqueueReplaceState(m,m.state,null),Xa(i,u,m,f),Va(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){m=i.stateNode;var _=i.memoizedProps,M=es(r,_);m.props=M;var z=m.context,Y=r.contextType;S=Bs,typeof Y=="object"&&Y!==null&&(S=Le(Y));var W=r.getDerivedStateFromProps;Y=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,Y||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_||z!==S)&&kp(i,m,u,S),mi=!1;var j=i.memoizedState;m.state=j,Xa(i,u,m,f),Va(),z=i.memoizedState,_||j!==z||mi?(typeof W=="function"&&(pu(i,r,W,u),z=i.memoizedState),(M=mi||Op(i,r,M,u,j,z,S))?(Y||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=z),m.props=u,m.state=z,m.context=S,u=M):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,Yc(n,i),S=i.memoizedProps,Y=es(r,S),m.props=Y,W=i.pendingProps,j=m.context,z=r.contextType,M=Bs,typeof z=="object"&&z!==null&&(M=Le(z)),_=r.getDerivedStateFromProps,(z=typeof _=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==W||j!==M)&&kp(i,m,u,M),mi=!1,j=i.memoizedState,m.state=j,Xa(i,u,m,f),Va();var G=i.memoizedState;S!==W||j!==G||mi||n!==null&&n.dependencies!==null&&Eo(n.dependencies)?(typeof _=="function"&&(pu(i,r,_,u),G=i.memoizedState),(Y=mi||Op(i,r,Y,u,j,G,M)||n!==null&&n.dependencies!==null&&Eo(n.dependencies))?(z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,G,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,G,M)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===n.memoizedProps&&j===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&j===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=G),m.props=u,m.state=G,m.context=M,u=Y):(typeof m.componentDidUpdate!="function"||S===n.memoizedProps&&j===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&j===n.memoizedState||(i.flags|=1024),u=!1)}return m=u,jo(n,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&u?(i.child=Xs(i,n.child,null,f),i.child=Xs(i,null,r,f)):Te(n,i,r,f),i.memoizedState=m.state,n=i.child):n=ti(n,i,f),n}function Kp(n,i,r,u){return Fa(),i.flags|=256,Te(n,i,r,u),i.child}var bu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vu(n){return{baseLanes:n,cachePool:Bf()}}function Au(n,i,r){return n=n!==null?n.childLanes&~r:0,i&&(n|=yn),n}function Wp(n,i,r){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,S;if((S=m)||(S=n!==null&&n.memoizedState===null?!1:(ye.current&2)!==0),S&&(f=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,n===null){if(kt){if(f?Ai(i):Si(),kt){var _=te,M;if(M=_){t:{for(M=_,_=Cn;M.nodeType!==8;){if(!_){_=null;break t}if(M=_n(M.nextSibling),M===null){_=null;break t}}_=M}_!==null?(i.memoizedState={dehydrated:_,treeContext:Yi!==null?{id:$n,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},M=tn(18,null,null,0),M.stateNode=_,M.return=i,i.child=M,Ue=i,te=null,M=!0):M=!1}M||Wi(i)}if(_=i.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return ih(_)?i.lanes=32:i.lanes=536870912,null;Jn(i)}return _=u.children,u=u.fallback,f?(Si(),f=i.mode,_=Go({mode:"hidden",children:_},f),u=Xi(u,f,r,null),_.return=i,u.return=i,_.sibling=u,i.child=_,f=i.child,f.memoizedState=vu(r),f.childLanes=Au(n,S,r),i.memoizedState=bu,u):(Ai(i),Su(i,_))}if(M=n.memoizedState,M!==null&&(_=M.dehydrated,_!==null)){if(m)i.flags&256?(Ai(i),i.flags&=-257,i=wu(n,i,r)):i.memoizedState!==null?(Si(),i.child=n.child,i.flags|=128,i=null):(Si(),f=u.fallback,_=i.mode,u=Go({mode:"visible",children:u.children},_),f=Xi(f,_,r,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,Xs(i,n.child,null,r),u=i.child,u.memoizedState=vu(r),u.childLanes=Au(n,S,r),i.memoizedState=bu,i=f);else if(Ai(i),ih(_)){if(S=_.nextSibling&&_.nextSibling.dataset,S)var z=S.dgst;S=z,u=Error(s(419)),u.stack="",u.digest=S,Ua({value:u,source:null,stack:null}),i=wu(n,i,r)}else if(Ae||Ia(n,i,r,!1),S=(r&n.childLanes)!==0,Ae||S){if(S=Vt,S!==null&&(u=r&-r,u=(u&42)!==0?1:sc(u),u=(u&(S.suspendedLanes|r))!==0?0:u,u!==0&&u!==M.retryLane))throw M.retryLane=u,Ps(n,u),rn(S,n,u),Hp;_.data==="$?"||zu(),i=wu(n,i,r)}else _.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=M.treeContext,te=_n(_.nextSibling),Ue=i,kt=!0,Ki=null,Cn=!1,n!==null&&(pn[gn++]=$n,pn[gn++]=Kn,pn[gn++]=Yi,$n=n.id,Kn=n.overflow,Yi=i),i=Su(i,u.children),i.flags|=4096);return i}return f?(Si(),f=u.fallback,_=i.mode,M=n.child,z=M.sibling,u=Yn(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,z!==null?f=Yn(z,f):(f=Xi(f,_,r,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,_=n.child.memoizedState,_===null?_=vu(r):(M=_.cachePool,M!==null?(z=me._currentValue,M=M.parent!==z?{parent:z,pool:z}:M):M=Bf(),_={baseLanes:_.baseLanes|r,cachePool:M}),f.memoizedState=_,f.childLanes=Au(n,S,r),i.memoizedState=bu,u):(Ai(i),r=n.child,n=r.sibling,r=Yn(r,{mode:"visible",children:u.children}),r.return=i,r.sibling=null,n!==null&&(S=i.deletions,S===null?(i.deletions=[n],i.flags|=16):S.push(n)),i.child=r,i.memoizedState=null,r)}function Su(n,i){return i=Go({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Go(n,i){return n=tn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function wu(n,i,r){return Xs(i,n.child,null,r),n=Su(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Qp(n,i,r){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),zc(n.return,i,r)}function Eu(n,i,r,u,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=r,m.tailMode=f)}function Zp(n,i,r){var u=i.pendingProps,f=u.revealOrder,m=u.tail;if(Te(n,i,u.children,r),u=ye.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Qp(n,r,i);else if(n.tag===19)Qp(n,r,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(Q(ye,u),f){case"forwards":for(r=i.child,f=null;r!==null;)n=r.alternate,n!==null&&Io(n)===null&&(f=r),r=r.sibling;r=f,r===null?(f=i.child,i.child=null):(f=r.sibling,r.sibling=null),Eu(i,!1,f,r,m);break;case"backwards":for(r=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Io(n)===null){i.child=f;break}n=f.sibling,f.sibling=r,r=f,f=n}Eu(i,!0,r,null,m);break;case"together":Eu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ti(n,i,r){if(n!==null&&(i.dependencies=n.dependencies),Ti|=i.lanes,(r&i.childLanes)===0)if(n!==null){if(Ia(n,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,r=Yn(n,n.pendingProps),i.child=r,r.return=i;n.sibling!==null;)n=n.sibling,r=r.sibling=Yn(n,n.pendingProps),r.return=i;r.sibling=null}return i.child}function _u(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Eo(n)))}function D0(n,i,r){switch(i.tag){case 3:Dt(i,i.stateNode.containerInfo),gi(i,me,n.memoizedState.cache),Fa();break;case 27:case 5:jt(i);break;case 4:Dt(i,i.stateNode.containerInfo);break;case 10:gi(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ai(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Wp(n,i,r):(Ai(i),n=ti(n,i,r),n!==null?n.sibling:null);Ai(i);break;case 19:var f=(n.flags&128)!==0;if(u=(r&i.childLanes)!==0,u||(Ia(n,i,r,!1),u=(r&i.childLanes)!==0),f){if(u)return Zp(n,i,r);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Q(ye,ye.current),u)break;return null;case 22:case 23:return i.lanes=0,Vp(n,i,r);case 24:gi(i,me,n.memoizedState.cache)}return ti(n,i,r)}function Jp(n,i,r){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ae=!0;else{if(!_u(n,r)&&(i.flags&128)===0)return Ae=!1,D0(n,i,r);Ae=(n.flags&131072)!==0}else Ae=!1,kt&&(i.flags&1048576)!==0&&Mf(i,wo,i.index);switch(i.lanes=0,i.tag){case 16:t:{n=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")Oc(u)?(n=es(u,n),i.tag=1,i=$p(null,i,u,n,r)):(i.tag=0,i=yu(null,i,u,n,r));else{if(u!=null){if(f=u.$$typeof,f===D){i.tag=11,i=jp(null,i,u,n,r);break t}else if(f===F){i.tag=14,i=Gp(null,i,u,n,r);break t}}throw i=at(u)||u,Error(s(306,i,""))}}return i;case 0:return yu(n,i,i.type,i.pendingProps,r);case 1:return u=i.type,f=es(u,i.pendingProps),$p(n,i,u,f,r);case 3:t:{if(Dt(i,i.stateNode.containerInfo),n===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,Yc(n,i),Xa(i,u,null,r);var S=i.memoizedState;if(u=S.cache,gi(i,me,u),u!==m.cache&&Hc(i,[me],r,!0),Va(),u=S.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Kp(n,i,u,r);break t}else if(u!==f){f=dn(Error(s(424)),i),Ua(f),i=Kp(n,i,u,r);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(te=_n(n.firstChild),Ue=i,kt=!0,Ki=null,Cn=!0,r=Lp(i,null,u,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Fa(),u===f){i=ti(n,i,r);break t}Te(n,i,u,r)}i=i.child}return i;case 26:return jo(n,i),n===null?(r=im(i.type,null,i.pendingProps,null))?i.memoizedState=r:kt||(r=i.type,n=i.pendingProps,u=il(ot.current).createElement(r),u[De]=i,u[je]=n,Ce(u,r,n),ve(u),i.stateNode=u):i.memoizedState=im(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return jt(i),n===null&&kt&&(u=i.stateNode=tm(i.type,i.pendingProps,ot.current),Ue=i,Cn=!0,f=te,Di(i.type)?(sh=f,te=_n(u.firstChild)):te=f),Te(n,i,i.pendingProps.children,r),jo(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&kt&&((f=u=te)&&(u=sA(u,i.type,i.pendingProps,Cn),u!==null?(i.stateNode=u,Ue=i,te=_n(u.firstChild),Cn=!1,f=!0):f=!1),f||Wi(i)),jt(i),f=i.type,m=i.pendingProps,S=n!==null?n.memoizedProps:null,u=m.children,th(f,m)?u=null:S!==null&&th(f,S)&&(i.flags|=32),i.memoizedState!==null&&(f=Jc(n,i,w0,null,null,r),pr._currentValue=f),jo(n,i),Te(n,i,u,r),i.child;case 6:return n===null&&kt&&((n=r=te)&&(r=aA(r,i.pendingProps,Cn),r!==null?(i.stateNode=r,Ue=i,te=null,n=!0):n=!1),n||Wi(i)),null;case 13:return Wp(n,i,r);case 4:return Dt(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Xs(i,null,u,r):Te(n,i,u,r),i.child;case 11:return jp(n,i,i.type,i.pendingProps,r);case 7:return Te(n,i,i.pendingProps,r),i.child;case 8:return Te(n,i,i.pendingProps.children,r),i.child;case 12:return Te(n,i,i.pendingProps.children,r),i.child;case 10:return u=i.pendingProps,gi(i,i.type,u.value),Te(n,i,u.children,r),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,Zi(i),f=Le(f),u=u(f),i.flags|=1,Te(n,i,u,r),i.child;case 14:return Gp(n,i,i.type,i.pendingProps,r);case 15:return qp(n,i,i.type,i.pendingProps,r);case 19:return Zp(n,i,r);case 31:return u=i.pendingProps,r=i.mode,u={mode:u.mode,children:u.children},n===null?(r=Go(u,r),r.ref=i.ref,i.child=r,r.return=i,i=r):(r=Yn(n.child,u),r.ref=i.ref,i.child=r,r.return=i,i=r),i;case 22:return Vp(n,i,r);case 24:return Zi(i),u=Le(me),n===null?(f=qc(),f===null&&(f=Vt,m=jc(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),i.memoizedState={parent:u,cache:f},Xc(i),gi(i,me,f)):((n.lanes&r)!==0&&(Yc(n,i),Xa(i,null,null,r),Va()),f=n.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),gi(i,me,u)):(u=m.cache,gi(i,me,u),u!==f.cache&&Hc(i,[me],r,!0))),Te(n,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ei(n){n.flags|=4}function tg(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!lm(i)){if(i=mn.current,i!==null&&((Nt&4194048)===Nt?Mn!==null:(Nt&62914560)!==Nt&&(Nt&536870912)===0||i!==Mn))throw Ga=Vc,Ff;n.flags|=8192}}function qo(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Ld():536870912,n.lanes|=i,Ws|=i)}function Ja(n,i){if(!kt)switch(n.tailMode){case"hidden":i=n.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Kt(n){var i=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(i)for(var f=n.child;f!==null;)r|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)r|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=r,i}function L0(n,i,r){var u=i.pendingProps;switch(Fc(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(i),null;case 1:return Kt(i),null;case 3:return r=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Qn(me),ue(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ba(i)?ei(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Nf())),Kt(i),null;case 26:return r=i.memoizedState,n===null?(ei(i),r!==null?(Kt(i),tg(i,r)):(Kt(i),i.flags&=-16777217)):r?r!==n.memoizedState?(ei(i),Kt(i),tg(i,r)):(Kt(i),i.flags&=-16777217):(n.memoizedProps!==u&&ei(i),Kt(i),i.flags&=-16777217),null;case 27:He(i),r=ot.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&ei(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Kt(i),null}n=nt.current,Ba(i)?Df(i):(n=tm(f,u,r),i.stateNode=n,ei(i))}return Kt(i),null;case 5:if(He(i),r=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&ei(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Kt(i),null}if(n=nt.current,Ba(i))Df(i);else{switch(f=il(ot.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(r,{is:u.is}):f.createElement(r)}}n[De]=i,n[je]=u;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;t:switch(Ce(n,r,u),r){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&ei(i)}}return Kt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&ei(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(n=ot.current,Ba(i)){if(n=i.stateNode,r=i.memoizedProps,u=null,f=Ue,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[De]=i,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Yg(n.nodeValue,r)),n||Wi(i)}else n=il(n).createTextNode(u),n[De]=i,i.stateNode=n}return Kt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ba(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[De]=i}else Fa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Kt(i),f=!1}else f=Nf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Jn(i),i):(Jn(i),null)}if(Jn(i),(i.flags&128)!==0)return i.lanes=r,i;if(r=u!==null,n=n!==null&&n.memoizedState!==null,r){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return r!==n&&r&&(i.child.flags|=8192),qo(i,i.updateQueue),Kt(i),null;case 4:return ue(),n===null&&Ku(i.stateNode.containerInfo),Kt(i),null;case 10:return Qn(i.type),Kt(i),null;case 19:if(Z(ye),f=i.memoizedState,f===null)return Kt(i),null;if(u=(i.flags&128)!==0,m=f.rendering,m===null)if(u)Ja(f,!1);else{if(ee!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=Io(n),m!==null){for(i.flags|=128,Ja(f,!1),n=m.updateQueue,i.updateQueue=n,qo(i,n),i.subtreeFlags=0,n=r,r=i.child;r!==null;)Cf(r,n),r=r.sibling;return Q(ye,ye.current&1|2),i.child}n=n.sibling}f.tail!==null&&xe()>Yo&&(i.flags|=128,u=!0,Ja(f,!1),i.lanes=4194304)}else{if(!u)if(n=Io(m),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,qo(i,n),Ja(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!kt)return Kt(i),null}else 2*xe()-f.renderingStartTime>Yo&&r!==536870912&&(i.flags|=128,u=!0,Ja(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(n=f.last,n!==null?n.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=xe(),i.sibling=null,n=ye.current,Q(ye,u?n&1|2:n&1),i):(Kt(i),null);case 22:case 23:return Jn(i),Qc(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(r&536870912)!==0&&(i.flags&128)===0&&(Kt(i),i.subtreeFlags&6&&(i.flags|=8192)):Kt(i),r=i.updateQueue,r!==null&&qo(i,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==r&&(i.flags|=2048),n!==null&&Z(Ji),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Qn(me),Kt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function N0(n,i){switch(Fc(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Qn(me),ue(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return He(i),null;case 13:if(Jn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Fa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Z(ye),null;case 4:return ue(),null;case 10:return Qn(i.type),null;case 22:case 23:return Jn(i),Qc(),n!==null&&Z(Ji),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Qn(me),null;case 25:return null;default:return null}}function eg(n,i){switch(Fc(i),i.tag){case 3:Qn(me),ue();break;case 26:case 27:case 5:He(i);break;case 4:ue();break;case 13:Jn(i);break;case 19:Z(ye);break;case 10:Qn(i.type);break;case 22:case 23:Jn(i),Qc(),n!==null&&Z(Ji);break;case 24:Qn(me)}}function tr(n,i){try{var r=i.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var f=u.next;r=f;do{if((r.tag&n)===n){u=void 0;var m=r.create,S=r.inst;u=m(),S.destroy=u}r=r.next}while(r!==f)}}catch(_){Gt(i,i.return,_)}}function wi(n,i,r){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var S=u.inst,_=S.destroy;if(_!==void 0){S.destroy=void 0,f=i;var M=r,z=_;try{z()}catch(Y){Gt(f,M,Y)}}}u=u.next}while(u!==m)}}catch(Y){Gt(i,i.return,Y)}}function ng(n){var i=n.updateQueue;if(i!==null){var r=n.stateNode;try{Gf(i,r)}catch(u){Gt(n,n.return,u)}}}function ig(n,i,r){r.props=es(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){Gt(n,i,u)}}function er(n,i){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(f){Gt(n,i,f)}}function Dn(n,i){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(f){Gt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Gt(n,i,f)}else r.current=null}function sg(n){var i=n.type,r=n.memoizedProps,u=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break t;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(f){Gt(n,n.return,f)}}function xu(n,i,r){try{var u=n.stateNode;J0(u,n.type,r,i),u[je]=i}catch(f){Gt(n,n.return,f)}}function ag(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Di(n.type)||n.tag===4}function Tu(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||ag(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Di(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ru(n,i,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(n),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=nl));else if(u!==4&&(u===27&&Di(n.type)&&(r=n.stateNode,i=null),n=n.child,n!==null))for(Ru(n,i,r),n=n.sibling;n!==null;)Ru(n,i,r),n=n.sibling}function Vo(n,i,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?r.insertBefore(n,i):r.appendChild(n);else if(u!==4&&(u===27&&Di(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Vo(n,i,r),n=n.sibling;n!==null;)Vo(n,i,r),n=n.sibling}function rg(n){var i=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Ce(i,u,r),i[De]=n,i[je]=r}catch(m){Gt(n,n.return,m)}}var ni=!1,ae=!1,Cu=!1,og=typeof WeakSet=="function"?WeakSet:Set,Se=null;function O0(n,i){if(n=n.containerInfo,Zu=cl,n=bf(n),Tc(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else t:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var S=0,_=-1,M=-1,z=0,Y=0,W=n,j=null;e:for(;;){for(var G;W!==r||f!==0&&W.nodeType!==3||(_=S+f),W!==m||u!==0&&W.nodeType!==3||(M=S+u),W.nodeType===3&&(S+=W.nodeValue.length),(G=W.firstChild)!==null;)j=W,W=G;for(;;){if(W===n)break e;if(j===r&&++z===f&&(_=S),j===m&&++Y===u&&(M=S),(G=W.nextSibling)!==null)break;W=j,j=W.parentNode}W=G}r=_===-1||M===-1?null:{start:_,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ju={focusedElem:n,selectionRange:r},cl=!1,Se=i;Se!==null;)if(i=Se,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Se=n;else for(;Se!==null;){switch(i=Se,m=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,r=i,f=m.memoizedProps,m=m.memoizedState,u=r.stateNode;try{var mt=es(r.type,f,r.elementType===r.type);n=u.getSnapshotBeforeUpdate(mt,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(ft){Gt(r,r.return,ft)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,r=n.nodeType,r===9)nh(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":nh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Se=n;break}Se=i.return}}function lg(n,i,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Ei(n,r),u&4&&tr(5,r);break;case 1:if(Ei(n,r),u&4)if(n=r.stateNode,i===null)try{n.componentDidMount()}catch(S){Gt(r,r.return,S)}else{var f=es(r.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Gt(r,r.return,S)}}u&64&&ng(r),u&512&&er(r,r.return);break;case 3:if(Ei(n,r),u&64&&(n=r.updateQueue,n!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Gf(n,i)}catch(S){Gt(r,r.return,S)}}break;case 27:i===null&&u&4&&rg(r);case 26:case 5:Ei(n,r),i===null&&u&4&&sg(r),u&512&&er(r,r.return);break;case 12:Ei(n,r);break;case 13:Ei(n,r),u&4&&hg(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=j0.bind(null,r),rA(n,r))));break;case 22:if(u=r.memoizedState!==null||ni,!u){i=i!==null&&i.memoizedState!==null||ae,f=ni;var m=ae;ni=u,(ae=i)&&!m?_i(n,r,(r.subtreeFlags&8772)!==0):Ei(n,r),ni=f,ae=m}break;case 30:break;default:Ei(n,r)}}function cg(n){var i=n.alternate;i!==null&&(n.alternate=null,cg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&oc(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Xt=null,Ve=!1;function ii(n,i,r){for(r=r.child;r!==null;)ug(n,i,r),r=r.sibling}function ug(n,i,r){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(zi,r)}catch{}switch(r.tag){case 26:ae||Dn(r,i),ii(n,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ae||Dn(r,i);var u=Xt,f=Ve;Di(r.type)&&(Xt=r.stateNode,Ve=!1),ii(n,i,r),ur(r.stateNode),Xt=u,Ve=f;break;case 5:ae||Dn(r,i);case 6:if(u=Xt,f=Ve,Xt=null,ii(n,i,r),Xt=u,Ve=f,Xt!==null)if(Ve)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(r.stateNode)}catch(m){Gt(r,i,m)}else try{Xt.removeChild(r.stateNode)}catch(m){Gt(r,i,m)}break;case 18:Xt!==null&&(Ve?(n=Xt,Zg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),br(n)):Zg(Xt,r.stateNode));break;case 4:u=Xt,f=Ve,Xt=r.stateNode.containerInfo,Ve=!0,ii(n,i,r),Xt=u,Ve=f;break;case 0:case 11:case 14:case 15:ae||wi(2,r,i),ae||wi(4,r,i),ii(n,i,r);break;case 1:ae||(Dn(r,i),u=r.stateNode,typeof u.componentWillUnmount=="function"&&ig(r,i,u)),ii(n,i,r);break;case 21:ii(n,i,r);break;case 22:ae=(u=ae)||r.memoizedState!==null,ii(n,i,r),ae=u;break;default:ii(n,i,r)}}function hg(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{br(n)}catch(r){Gt(i,i.return,r)}}function k0(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new og),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new og),i;default:throw Error(s(435,n.tag))}}function Mu(n,i){var r=k0(n);i.forEach(function(u){var f=G0.bind(null,n,u);r.has(u)||(r.add(u),u.then(f,f))})}function en(n,i){var r=i.deletions;if(r!==null)for(var u=0;u<r.length;u++){var f=r[u],m=n,S=i,_=S;t:for(;_!==null;){switch(_.tag){case 27:if(Di(_.type)){Xt=_.stateNode,Ve=!1;break t}break;case 5:Xt=_.stateNode,Ve=!1;break t;case 3:case 4:Xt=_.stateNode.containerInfo,Ve=!0;break t}_=_.return}if(Xt===null)throw Error(s(160));ug(m,S,f),Xt=null,Ve=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)dg(i,n),i=i.sibling}var En=null;function dg(n,i){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:en(i,n),nn(n),u&4&&(wi(3,n,n.return),tr(3,n),wi(5,n,n.return));break;case 1:en(i,n),nn(n),u&512&&(ae||r===null||Dn(r,r.return)),u&64&&ni&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var f=En;if(en(i,n),nn(n),u&512&&(ae||r===null||Dn(r,r.return)),u&4){var m=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){t:{u=n.type,r=n.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[xa]||m[De]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Ce(m,u,r),m[De]=n,ve(m),u=m;break t;case"link":var S=rm("link","href",f).get(u+(r.href||""));if(S){for(var _=0;_<S.length;_++)if(m=S[_],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(_,1);break e}}m=f.createElement(u),Ce(m,u,r),f.head.appendChild(m);break;case"meta":if(S=rm("meta","content",f).get(u+(r.content||""))){for(_=0;_<S.length;_++)if(m=S[_],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(_,1);break e}}m=f.createElement(u),Ce(m,u,r),f.head.appendChild(m);break;default:throw Error(s(468,u))}m[De]=n,ve(m),u=m}n.stateNode=u}else om(f,n.type,n.stateNode);else n.stateNode=am(f,u,n.memoizedProps);else m!==u?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,u===null?om(f,n.type,n.stateNode):am(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&xu(n,n.memoizedProps,r.memoizedProps)}break;case 27:en(i,n),nn(n),u&512&&(ae||r===null||Dn(r,r.return)),r!==null&&u&4&&xu(n,n.memoizedProps,r.memoizedProps);break;case 5:if(en(i,n),nn(n),u&512&&(ae||r===null||Dn(r,r.return)),n.flags&32){f=n.stateNode;try{Cs(f,"")}catch(G){Gt(n,n.return,G)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,xu(n,f,r!==null?r.memoizedProps:f)),u&1024&&(Cu=!0);break;case 6:if(en(i,n),nn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(G){Gt(n,n.return,G)}}break;case 3:if(rl=null,f=En,En=sl(i.containerInfo),en(i,n),En=f,nn(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{br(i.containerInfo)}catch(G){Gt(n,n.return,G)}Cu&&(Cu=!1,fg(n));break;case 4:u=En,En=sl(n.stateNode.containerInfo),en(i,n),nn(n),En=u;break;case 12:en(i,n),nn(n);break;case 13:en(i,n),nn(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Pu=xe()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Mu(n,u)));break;case 22:f=n.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,z=ni,Y=ae;if(ni=z||f,ae=Y||M,en(i,n),ae=Y,ni=z,nn(n),u&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(r===null||M||ni||ae||ns(n)),r=null,i=n;;){if(i.tag===5||i.tag===26){if(r===null){M=r=i;try{if(m=M.stateNode,f)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{_=M.stateNode;var W=M.memoizedProps.style,j=W!=null&&W.hasOwnProperty("display")?W.display:null;_.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(G){Gt(M,M.return,G)}}}else if(i.tag===6){if(r===null){M=i;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(G){Gt(M,M.return,G)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Mu(n,r))));break;case 19:en(i,n),nn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Mu(n,u)));break;case 30:break;case 21:break;default:en(i,n),nn(n)}}function nn(n){var i=n.flags;if(i&2){try{for(var r,u=n.return;u!==null;){if(ag(u)){r=u;break}u=u.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var f=r.stateNode,m=Tu(n);Vo(n,m,f);break;case 5:var S=r.stateNode;r.flags&32&&(Cs(S,""),r.flags&=-33);var _=Tu(n);Vo(n,_,S);break;case 3:case 4:var M=r.stateNode.containerInfo,z=Tu(n);Ru(n,z,M);break;default:throw Error(s(161))}}catch(Y){Gt(n,n.return,Y)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function fg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;fg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Ei(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)lg(n,i.alternate,i),i=i.sibling}function ns(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:wi(4,i,i.return),ns(i);break;case 1:Dn(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&ig(i,i.return,r),ns(i);break;case 27:ur(i.stateNode);case 26:case 5:Dn(i,i.return),ns(i);break;case 22:i.memoizedState===null&&ns(i);break;case 30:ns(i);break;default:ns(i)}n=n.sibling}}function _i(n,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,m=i,S=m.flags;switch(m.tag){case 0:case 11:case 15:_i(f,m,r),tr(4,m);break;case 1:if(_i(f,m,r),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){Gt(u,u.return,z)}if(u=m,f=u.updateQueue,f!==null){var _=u.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)jf(M[f],_)}catch(z){Gt(u,u.return,z)}}r&&S&64&&ng(m),er(m,m.return);break;case 27:rg(m);case 26:case 5:_i(f,m,r),r&&u===null&&S&4&&sg(m),er(m,m.return);break;case 12:_i(f,m,r);break;case 13:_i(f,m,r),r&&S&4&&hg(f,m);break;case 22:m.memoizedState===null&&_i(f,m,r),er(m,m.return);break;case 30:break;default:_i(f,m,r)}i=i.sibling}}function Du(n,i){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&za(r))}function Lu(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&za(n))}function Ln(n,i,r,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)pg(n,i,r,u),i=i.sibling}function pg(n,i,r,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ln(n,i,r,u),f&2048&&tr(9,i);break;case 1:Ln(n,i,r,u);break;case 3:Ln(n,i,r,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&za(n)));break;case 12:if(f&2048){Ln(n,i,r,u),n=i.stateNode;try{var m=i.memoizedProps,S=m.id,_=m.onPostCommit;typeof _=="function"&&_(S,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){Gt(i,i.return,M)}}else Ln(n,i,r,u);break;case 13:Ln(n,i,r,u);break;case 23:break;case 22:m=i.stateNode,S=i.alternate,i.memoizedState!==null?m._visibility&2?Ln(n,i,r,u):nr(n,i):m._visibility&2?Ln(n,i,r,u):(m._visibility|=2,Ys(n,i,r,u,(i.subtreeFlags&10256)!==0)),f&2048&&Du(S,i);break;case 24:Ln(n,i,r,u),f&2048&&Lu(i.alternate,i);break;default:Ln(n,i,r,u)}}function Ys(n,i,r,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=n,S=i,_=r,M=u,z=S.flags;switch(S.tag){case 0:case 11:case 15:Ys(m,S,_,M,f),tr(8,S);break;case 23:break;case 22:var Y=S.stateNode;S.memoizedState!==null?Y._visibility&2?Ys(m,S,_,M,f):nr(m,S):(Y._visibility|=2,Ys(m,S,_,M,f)),f&&z&2048&&Du(S.alternate,S);break;case 24:Ys(m,S,_,M,f),f&&z&2048&&Lu(S.alternate,S);break;default:Ys(m,S,_,M,f)}i=i.sibling}}function nr(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=n,u=i,f=u.flags;switch(u.tag){case 22:nr(r,u),f&2048&&Du(u.alternate,u);break;case 24:nr(r,u),f&2048&&Lu(u.alternate,u);break;default:nr(r,u)}i=i.sibling}}var ir=8192;function $s(n){if(n.subtreeFlags&ir)for(n=n.child;n!==null;)gg(n),n=n.sibling}function gg(n){switch(n.tag){case 26:$s(n),n.flags&ir&&n.memoizedState!==null&&vA(En,n.memoizedState,n.memoizedProps);break;case 5:$s(n);break;case 3:case 4:var i=En;En=sl(n.stateNode.containerInfo),$s(n),En=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=ir,ir=16777216,$s(n),ir=i):$s(n));break;default:$s(n)}}function mg(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function sr(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var u=i[r];Se=u,bg(u,n)}mg(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)yg(n),n=n.sibling}function yg(n){switch(n.tag){case 0:case 11:case 15:sr(n),n.flags&2048&&wi(9,n,n.return);break;case 3:sr(n);break;case 12:sr(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Xo(n)):sr(n);break;default:sr(n)}}function Xo(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var u=i[r];Se=u,bg(u,n)}mg(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:wi(8,i,i.return),Xo(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Xo(i));break;default:Xo(i)}n=n.sibling}}function bg(n,i){for(;Se!==null;){var r=Se;switch(r.tag){case 0:case 11:case 15:wi(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:za(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,Se=u;else t:for(r=n;Se!==null;){u=Se;var f=u.sibling,m=u.return;if(cg(u),u===r){Se=null;break t}if(f!==null){f.return=m,Se=f;break t}Se=m}}}var P0={getCacheForType:function(n){var i=Le(me),r=i.data.get(n);return r===void 0&&(r=n(),i.data.set(n,r)),r}},B0=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Vt=null,Tt=null,Nt=0,Bt=0,sn=null,xi=!1,Ks=!1,Nu=!1,si=0,ee=0,Ti=0,is=0,Ou=0,yn=0,Ws=0,ar=null,Xe=null,ku=!1,Pu=0,Yo=1/0,$o=null,Ri=null,Re=0,Ci=null,Qs=null,Zs=0,Bu=0,Fu=null,vg=null,rr=0,Uu=null;function an(){if((Pt&2)!==0&&Nt!==0)return Nt&-Nt;if(N.T!==null){var n=Is;return n!==0?n:Vu()}return kd()}function Ag(){yn===0&&(yn=(Nt&536870912)===0||kt?Dd():536870912);var n=mn.current;return n!==null&&(n.flags|=32),yn}function rn(n,i,r){(n===Vt&&(Bt===2||Bt===9)||n.cancelPendingCommit!==null)&&(Js(n,0),Mi(n,Nt,yn,!1)),_a(n,r),((Pt&2)===0||n!==Vt)&&(n===Vt&&((Pt&2)===0&&(is|=r),ee===4&&Mi(n,Nt,yn,!1)),Nn(n))}function Sg(n,i,r){if((Pt&6)!==0)throw Error(s(327));var u=!r&&(i&124)===0&&(i&n.expiredLanes)===0||Ea(n,i),f=u?I0(n,i):Hu(n,i,!0),m=u;do{if(f===0){Ks&&!u&&Mi(n,i,0,!1);break}else{if(r=n.current.alternate,m&&!F0(r)){f=Hu(n,i,!1),m=!1;continue}if(f===2){if(m=i,n.errorRecoveryDisabledLanes&m)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;t:{var _=n;f=ar;var M=_.current.memoizedState.isDehydrated;if(M&&(Js(_,S).flags|=256),S=Hu(_,S,!1),S!==2){if(Nu&&!M){_.errorRecoveryDisabledLanes|=m,is|=m,f=4;break t}m=Xe,Xe=f,m!==null&&(Xe===null?Xe=m:Xe.push.apply(Xe,m))}f=S}if(m=!1,f!==2)continue}}if(f===1){Js(n,0),Mi(n,i,0,!0);break}t:{switch(u=n,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Mi(u,i,yn,!xi);break t;case 2:Xe=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Pu+300-xe(),10<f)){if(Mi(u,i,yn,!xi),so(u,0,!0)!==0)break t;u.timeoutHandle=Wg(wg.bind(null,u,r,Xe,$o,ku,i,yn,is,Ws,xi,m,2,-0,0),f);break t}wg(u,r,Xe,$o,ku,i,yn,is,Ws,xi,m,0,-0,0)}}break}while(!0);Nn(n)}function wg(n,i,r,u,f,m,S,_,M,z,Y,W,j,G){if(n.timeoutHandle=-1,W=i.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(fr={stylesheets:null,count:0,unsuspend:bA},gg(i),W=AA(),W!==null)){n.cancelPendingCommit=W(Mg.bind(null,n,i,m,r,u,f,S,_,M,Y,1,j,G)),Mi(n,m,S,!z);return}Mg(n,i,m,r,u,f,S,_,M)}function F0(n){for(var i=n;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var f=r[u],m=f.getSnapshot;f=f.value;try{if(!Je(m(),f))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Mi(n,i,r,u){i&=~Ou,i&=~is,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var m=31-Jt(f),S=1<<m;u[m]=-1,f&=~S}r!==0&&Nd(n,r,i)}function Ko(){return(Pt&6)===0?(or(0),!1):!0}function Iu(){if(Tt!==null){if(Bt===0)var n=Tt.return;else n=Tt,Wn=Qi=null,nu(n),Vs=null,Qa=0,n=Tt;for(;n!==null;)eg(n.alternate,n),n=n.return;Tt=null}}function Js(n,i){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,eA(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Iu(),Vt=n,Tt=r=Yn(n.current,null),Nt=i,Bt=0,sn=null,xi=!1,Ks=Ea(n,i),Nu=!1,Ws=yn=Ou=is=Ti=ee=0,Xe=ar=null,ku=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-Jt(u),m=1<<f;i|=n[f],u&=~m}return si=i,yo(),r}function Eg(n,i){_t=null,N.H=Bo,i===ja||i===To?(i=zf(),Bt=3):i===Ff?(i=zf(),Bt=4):Bt=i===Hp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,sn=i,Tt===null&&(ee=1,Ho(n,dn(i,n.current)))}function _g(){var n=N.H;return N.H=Bo,n===null?Bo:n}function xg(){var n=N.A;return N.A=P0,n}function zu(){ee=4,xi||(Nt&4194048)!==Nt&&mn.current!==null||(Ks=!0),(Ti&134217727)===0&&(is&134217727)===0||Vt===null||Mi(Vt,Nt,yn,!1)}function Hu(n,i,r){var u=Pt;Pt|=2;var f=_g(),m=xg();(Vt!==n||Nt!==i)&&($o=null,Js(n,i)),i=!1;var S=ee;t:do try{if(Bt!==0&&Tt!==null){var _=Tt,M=sn;switch(Bt){case 8:Iu(),S=6;break t;case 3:case 2:case 9:case 6:mn.current===null&&(i=!0);var z=Bt;if(Bt=0,sn=null,ta(n,_,M,z),r&&Ks){S=0;break t}break;default:z=Bt,Bt=0,sn=null,ta(n,_,M,z)}}U0(),S=ee;break}catch(Y){Eg(n,Y)}while(!0);return i&&n.shellSuspendCounter++,Wn=Qi=null,Pt=u,N.H=f,N.A=m,Tt===null&&(Vt=null,Nt=0,yo()),S}function U0(){for(;Tt!==null;)Tg(Tt)}function I0(n,i){var r=Pt;Pt|=2;var u=_g(),f=xg();Vt!==n||Nt!==i?($o=null,Yo=xe()+500,Js(n,i)):Ks=Ea(n,i);t:do try{if(Bt!==0&&Tt!==null){i=Tt;var m=sn;e:switch(Bt){case 1:Bt=0,sn=null,ta(n,i,m,1);break;case 2:case 9:if(Uf(m)){Bt=0,sn=null,Rg(i);break}i=function(){Bt!==2&&Bt!==9||Vt!==n||(Bt=7),Nn(n)},m.then(i,i);break t;case 3:Bt=7;break t;case 4:Bt=5;break t;case 7:Uf(m)?(Bt=0,sn=null,Rg(i)):(Bt=0,sn=null,ta(n,i,m,7));break;case 5:var S=null;switch(Tt.tag){case 26:S=Tt.memoizedState;case 5:case 27:var _=Tt;if(!S||lm(S)){Bt=0,sn=null;var M=_.sibling;if(M!==null)Tt=M;else{var z=_.return;z!==null?(Tt=z,Wo(z)):Tt=null}break e}}Bt=0,sn=null,ta(n,i,m,5);break;case 6:Bt=0,sn=null,ta(n,i,m,6);break;case 8:Iu(),ee=6;break t;default:throw Error(s(462))}}z0();break}catch(Y){Eg(n,Y)}while(!0);return Wn=Qi=null,N.H=u,N.A=f,Pt=r,Tt!==null?0:(Vt=null,Nt=0,yo(),ee)}function z0(){for(;Tt!==null&&!ie();)Tg(Tt)}function Tg(n){var i=Jp(n.alternate,n,si);n.memoizedProps=n.pendingProps,i===null?Wo(n):Tt=i}function Rg(n){var i=n,r=i.alternate;switch(i.tag){case 15:case 0:i=Yp(r,i,i.pendingProps,i.type,void 0,Nt);break;case 11:i=Yp(r,i,i.pendingProps,i.type.render,i.ref,Nt);break;case 5:nu(i);default:eg(r,i),i=Tt=Cf(i,si),i=Jp(r,i,si)}n.memoizedProps=n.pendingProps,i===null?Wo(n):Tt=i}function ta(n,i,r,u){Wn=Qi=null,nu(i),Vs=null,Qa=0;var f=i.return;try{if(M0(n,f,i,r,Nt)){ee=1,Ho(n,dn(r,n.current)),Tt=null;return}}catch(m){if(f!==null)throw Tt=f,m;ee=1,Ho(n,dn(r,n.current)),Tt=null;return}i.flags&32768?(kt||u===1?n=!0:Ks||(Nt&536870912)!==0?n=!1:(xi=n=!0,(u===2||u===9||u===3||u===6)&&(u=mn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Cg(i,n)):Wo(i)}function Wo(n){var i=n;do{if((i.flags&32768)!==0){Cg(i,xi);return}n=i.return;var r=L0(i.alternate,i,si);if(r!==null){Tt=r;return}if(i=i.sibling,i!==null){Tt=i;return}Tt=i=n}while(i!==null);ee===0&&(ee=5)}function Cg(n,i){do{var r=N0(n.alternate,n);if(r!==null){r.flags&=32767,Tt=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(n=n.sibling,n!==null)){Tt=n;return}Tt=n=r}while(n!==null);ee=6,Tt=null}function Mg(n,i,r,u,f,m,S,_,M){n.cancelPendingCommit=null;do Qo();while(Re!==0);if((Pt&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Lc,bv(n,r,m,S,_,M),n===Vt&&(Tt=Vt=null,Nt=0),Qs=i,Ci=n,Zs=r,Bu=m,Fu=f,vg=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,q0(qn,function(){return kg(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=N.T,N.T=null,f=H.p,H.p=2,S=Pt,Pt|=4;try{O0(n,i,r)}finally{Pt=S,H.p=f,N.T=u}}Re=1,Dg(),Lg(),Ng()}}function Dg(){if(Re===1){Re=0;var n=Ci,i=Qs,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=N.T,N.T=null;var u=H.p;H.p=2;var f=Pt;Pt|=4;try{dg(i,n);var m=Ju,S=bf(n.containerInfo),_=m.focusedElem,M=m.selectionRange;if(S!==_&&_&&_.ownerDocument&&yf(_.ownerDocument.documentElement,_)){if(M!==null&&Tc(_)){var z=M.start,Y=M.end;if(Y===void 0&&(Y=z),"selectionStart"in _)_.selectionStart=z,_.selectionEnd=Math.min(Y,_.value.length);else{var W=_.ownerDocument||document,j=W&&W.defaultView||window;if(j.getSelection){var G=j.getSelection(),mt=_.textContent.length,ft=Math.min(M.start,mt),zt=M.end===void 0?ft:Math.min(M.end,mt);!G.extend&&ft>zt&&(S=zt,zt=ft,ft=S);var B=mf(_,ft),O=mf(_,zt);if(B&&O&&(G.rangeCount!==1||G.anchorNode!==B.node||G.anchorOffset!==B.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var I=W.createRange();I.setStart(B.node,B.offset),G.removeAllRanges(),ft>zt?(G.addRange(I),G.extend(O.node,O.offset)):(I.setEnd(O.node,O.offset),G.addRange(I))}}}}for(W=[],G=_;G=G.parentNode;)G.nodeType===1&&W.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<W.length;_++){var K=W[_];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}cl=!!Zu,Ju=Zu=null}finally{Pt=f,H.p=u,N.T=r}}n.current=i,Re=2}}function Lg(){if(Re===2){Re=0;var n=Ci,i=Qs,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=N.T,N.T=null;var u=H.p;H.p=2;var f=Pt;Pt|=4;try{lg(n,i.alternate,i)}finally{Pt=f,H.p=u,N.T=r}}Re=3}}function Ng(){if(Re===4||Re===3){Re=0,he();var n=Ci,i=Qs,r=Zs,u=vg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Re=5:(Re=0,Qs=Ci=null,Og(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ri=null),ac(r),i=i.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(zi,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=N.T,f=H.p,H.p=2,N.T=null;try{for(var m=n.onRecoverableError,S=0;S<u.length;S++){var _=u[S];m(_.value,{componentStack:_.stack})}}finally{N.T=i,H.p=f}}(Zs&3)!==0&&Qo(),Nn(n),f=n.pendingLanes,(r&4194090)!==0&&(f&42)!==0?n===Uu?rr++:(rr=0,Uu=n):rr=0,or(0)}}function Og(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,za(i)))}function Qo(n){return Dg(),Lg(),Ng(),kg()}function kg(){if(Re!==5)return!1;var n=Ci,i=Bu;Bu=0;var r=ac(Zs),u=N.T,f=H.p;try{H.p=32>r?32:r,N.T=null,r=Fu,Fu=null;var m=Ci,S=Zs;if(Re=0,Qs=Ci=null,Zs=0,(Pt&6)!==0)throw Error(s(331));var _=Pt;if(Pt|=4,yg(m.current),pg(m,m.current,S,r),Pt=_,or(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(zi,m)}catch{}return!0}finally{H.p=f,N.T=u,Og(n,i)}}function Pg(n,i,r){i=dn(r,i),i=mu(n.stateNode,i,2),n=bi(n,i,2),n!==null&&(_a(n,2),Nn(n))}function Gt(n,i,r){if(n.tag===3)Pg(n,n,r);else for(;i!==null;){if(i.tag===3){Pg(i,n,r);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ri===null||!Ri.has(u))){n=dn(r,n),r=Ip(2),u=bi(i,r,2),u!==null&&(zp(r,u,i,n),_a(u,2),Nn(u));break}}i=i.return}}function ju(n,i,r){var u=n.pingCache;if(u===null){u=n.pingCache=new B0;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(r)||(Nu=!0,f.add(r),n=H0.bind(null,n,i,r),i.then(n,n))}function H0(n,i,r){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Vt===n&&(Nt&r)===r&&(ee===4||ee===3&&(Nt&62914560)===Nt&&300>xe()-Pu?(Pt&2)===0&&Js(n,0):Ou|=r,Ws===Nt&&(Ws=0)),Nn(n)}function Bg(n,i){i===0&&(i=Ld()),n=Ps(n,i),n!==null&&(_a(n,i),Nn(n))}function j0(n){var i=n.memoizedState,r=0;i!==null&&(r=i.retryLane),Bg(n,r)}function G0(n,i){var r=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(r=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),Bg(n,r)}function q0(n,i){return Lt(n,i)}var Zo=null,ea=null,Gu=!1,Jo=!1,qu=!1,ss=0;function Nn(n){n!==ea&&n.next===null&&(ea===null?Zo=ea=n:ea=ea.next=n),Jo=!0,Gu||(Gu=!0,X0())}function or(n,i){if(!qu&&Jo){qu=!0;do for(var r=!1,u=Zo;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var S=u.suspendedLanes,_=u.pingedLanes;m=(1<<31-Jt(42|n)+1)-1,m&=f&~(S&~_),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,zg(u,m))}else m=Nt,m=so(u,u===Vt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Ea(u,m)||(r=!0,zg(u,m));u=u.next}while(r);qu=!1}}function V0(){Fg()}function Fg(){Jo=Gu=!1;var n=0;ss!==0&&(tA()&&(n=ss),ss=0);for(var i=xe(),r=null,u=Zo;u!==null;){var f=u.next,m=Ug(u,i);m===0?(u.next=null,r===null?Zo=f:r.next=f,f===null&&(ea=r)):(r=u,(n!==0||(m&3)!==0)&&(Jo=!0)),u=f}or(n)}function Ug(n,i){for(var r=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var S=31-Jt(m),_=1<<S,M=f[S];M===-1?((_&r)===0||(_&u)!==0)&&(f[S]=yv(_,i)):M<=i&&(n.expiredLanes|=_),m&=~_}if(i=Vt,r=Nt,r=so(n,n===i?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===i&&(Bt===2||Bt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ft(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Ea(n,r)){if(i=r&-r,i===n.callbackPriority)return i;switch(u!==null&&Ft(u),ac(r)){case 2:case 8:r=to;break;case 32:r=qn;break;case 268435456:r=eo;break;default:r=qn}return u=Ig.bind(null,n),r=Lt(r,u),n.callbackPriority=i,n.callbackNode=r,i}return u!==null&&u!==null&&Ft(u),n.callbackPriority=2,n.callbackNode=null,2}function Ig(n,i){if(Re!==0&&Re!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Qo()&&n.callbackNode!==r)return null;var u=Nt;return u=so(n,n===Vt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Sg(n,u,i),Ug(n,xe()),n.callbackNode!=null&&n.callbackNode===r?Ig.bind(null,n):null)}function zg(n,i){if(Qo())return null;Sg(n,i,!0)}function X0(){nA(function(){(Pt&6)!==0?Lt(As,V0):Fg()})}function Vu(){return ss===0&&(ss=Dd()),ss}function Hg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:co(""+n)}function jg(n,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,n.id&&r.setAttribute("form",n.id),i.parentNode.insertBefore(r,i),n=new FormData(n),r.parentNode.removeChild(r),n}function Y0(n,i,r,u,f){if(i==="submit"&&r&&r.stateNode===f){var m=Hg((f[je]||null).action),S=u.submitter;S&&(i=(i=S[je]||null)?Hg(i.formAction):S.getAttribute("formAction"),i!==null&&(m=i,S=null));var _=new po("action","action",null,u,f);n.push({event:_,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ss!==0){var M=S?jg(f,S):new FormData(f);hu(r,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(_.preventDefault(),M=S?jg(f,S):new FormData(f),hu(r,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var Xu=0;Xu<Dc.length;Xu++){var Yu=Dc[Xu],$0=Yu.toLowerCase(),K0=Yu[0].toUpperCase()+Yu.slice(1);wn($0,"on"+K0)}wn(Sf,"onAnimationEnd"),wn(wf,"onAnimationIteration"),wn(Ef,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(d0,"onTransitionRun"),wn(f0,"onTransitionStart"),wn(p0,"onTransitionCancel"),wn(_f,"onTransitionEnd"),xs("onMouseEnter",["mouseout","mouseover"]),xs("onMouseLeave",["mouseout","mouseover"]),xs("onPointerEnter",["pointerout","pointerover"]),xs("onPointerLeave",["pointerout","pointerover"]),ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lr));function Gg(n,i){i=(i&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],f=u.event;u=u.listeners;t:{var m=void 0;if(i)for(var S=u.length-1;0<=S;S--){var _=u[S],M=_.instance,z=_.currentTarget;if(_=_.listener,M!==m&&f.isPropagationStopped())break t;m=_,f.currentTarget=z;try{m(f)}catch(Y){zo(Y)}f.currentTarget=null,m=M}else for(S=0;S<u.length;S++){if(_=u[S],M=_.instance,z=_.currentTarget,_=_.listener,M!==m&&f.isPropagationStopped())break t;m=_,f.currentTarget=z;try{m(f)}catch(Y){zo(Y)}f.currentTarget=null,m=M}}}}function Rt(n,i){var r=i[rc];r===void 0&&(r=i[rc]=new Set);var u=n+"__bubble";r.has(u)||(qg(i,n,2,!1),r.add(u))}function $u(n,i,r){var u=0;i&&(u|=4),qg(r,n,u,i)}var tl="_reactListening"+Math.random().toString(36).slice(2);function Ku(n){if(!n[tl]){n[tl]=!0,Bd.forEach(function(r){r!=="selectionchange"&&(W0.has(r)||$u(r,!1,n),$u(r,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[tl]||(i[tl]=!0,$u("selectionchange",!1,i))}}function qg(n,i,r,u){switch(pm(i)){case 2:var f=EA;break;case 8:f=_A;break;default:f=ch}r=f.bind(null,i,r,n),f=void 0,!yc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,r,{capture:!0,passive:f}):n.addEventListener(i,r,!0):f!==void 0?n.addEventListener(i,r,{passive:f}):n.addEventListener(i,r,!1)}function Wu(n,i,r,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)t:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var _=u.stateNode.containerInfo;if(_===f)break;if(S===4)for(S=u.return;S!==null;){var M=S.tag;if((M===3||M===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;_!==null;){if(S=ws(_),S===null)return;if(M=S.tag,M===5||M===6||M===26||M===27){u=m=S;continue t}_=_.parentNode}}u=u.return}Wd(function(){var z=m,Y=gc(r),W=[];t:{var j=xf.get(n);if(j!==void 0){var G=po,mt=n;switch(n){case"keypress":if(ho(r)===0)break t;case"keydown":case"keyup":G=qv;break;case"focusin":mt="focus",G=Sc;break;case"focusout":mt="blur",G=Sc;break;case"beforeblur":case"afterblur":G=Sc;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Nv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Yv;break;case Sf:case wf:case Ef:G=Pv;break;case _f:G=Kv;break;case"scroll":case"scrollend":G=Dv;break;case"wheel":G=Qv;break;case"copy":case"cut":case"paste":G=Fv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=ef;break;case"toggle":case"beforetoggle":G=Jv}var ft=(i&4)!==0,zt=!ft&&(n==="scroll"||n==="scrollend"),B=ft?j!==null?j+"Capture":null:j;ft=[];for(var O=z,I;O!==null;){var K=O;if(I=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||I===null||B===null||(K=Ra(O,B),K!=null&&ft.push(cr(O,K,I))),zt)break;O=O.return}0<ft.length&&(j=new G(j,mt,null,r,Y),W.push({event:j,listeners:ft}))}}if((i&7)===0){t:{if(j=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",j&&r!==pc&&(mt=r.relatedTarget||r.fromElement)&&(ws(mt)||mt[Ss]))break t;if((G||j)&&(j=Y.window===Y?Y:(j=Y.ownerDocument)?j.defaultView||j.parentWindow:window,G?(mt=r.relatedTarget||r.toElement,G=z,mt=mt?ws(mt):null,mt!==null&&(zt=o(mt),ft=mt.tag,mt!==zt||ft!==5&&ft!==27&&ft!==6)&&(mt=null)):(G=null,mt=z),G!==mt)){if(ft=Jd,K="onMouseLeave",B="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(ft=ef,K="onPointerLeave",B="onPointerEnter",O="pointer"),zt=G==null?j:Ta(G),I=mt==null?j:Ta(mt),j=new ft(K,O+"leave",G,r,Y),j.target=zt,j.relatedTarget=I,K=null,ws(Y)===z&&(ft=new ft(B,O+"enter",mt,r,Y),ft.target=I,ft.relatedTarget=zt,K=ft),zt=K,G&&mt)e:{for(ft=G,B=mt,O=0,I=ft;I;I=na(I))O++;for(I=0,K=B;K;K=na(K))I++;for(;0<O-I;)ft=na(ft),O--;for(;0<I-O;)B=na(B),I--;for(;O--;){if(ft===B||B!==null&&ft===B.alternate)break e;ft=na(ft),B=na(B)}ft=null}else ft=null;G!==null&&Vg(W,j,G,ft,!1),mt!==null&&zt!==null&&Vg(W,zt,mt,ft,!0)}}t:{if(j=z?Ta(z):window,G=j.nodeName&&j.nodeName.toLowerCase(),G==="select"||G==="input"&&j.type==="file")var rt=uf;else if(lf(j))if(hf)rt=c0;else{rt=o0;var xt=r0}else G=j.nodeName,!G||G.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?z&&fc(z.elementType)&&(rt=uf):rt=l0;if(rt&&(rt=rt(n,z))){cf(W,rt,r,Y);break t}xt&&xt(n,j,z),n==="focusout"&&z&&j.type==="number"&&z.memoizedProps.value!=null&&dc(j,"number",j.value)}switch(xt=z?Ta(z):window,n){case"focusin":(lf(xt)||xt.contentEditable==="true")&&(Ns=xt,Rc=z,Pa=null);break;case"focusout":Pa=Rc=Ns=null;break;case"mousedown":Cc=!0;break;case"contextmenu":case"mouseup":case"dragend":Cc=!1,vf(W,r,Y);break;case"selectionchange":if(h0)break;case"keydown":case"keyup":vf(W,r,Y)}var lt;if(Ec)t:{switch(n){case"compositionstart":var pt="onCompositionStart";break t;case"compositionend":pt="onCompositionEnd";break t;case"compositionupdate":pt="onCompositionUpdate";break t}pt=void 0}else Ls?rf(n,r)&&(pt="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(pt="onCompositionStart");pt&&(nf&&r.locale!=="ko"&&(Ls||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Ls&&(lt=Qd()):(pi=Y,bc="value"in pi?pi.value:pi.textContent,Ls=!0)),xt=el(z,pt),0<xt.length&&(pt=new tf(pt,n,null,r,Y),W.push({event:pt,listeners:xt}),lt?pt.data=lt:(lt=of(r),lt!==null&&(pt.data=lt)))),(lt=e0?n0(n,r):i0(n,r))&&(pt=el(z,"onBeforeInput"),0<pt.length&&(xt=new tf("onBeforeInput","beforeinput",null,r,Y),W.push({event:xt,listeners:pt}),xt.data=lt)),Y0(W,n,z,r,Y)}Gg(W,i)})}function cr(n,i,r){return{instance:n,listener:i,currentTarget:r}}function el(n,i){for(var r=i+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ra(n,r),f!=null&&u.unshift(cr(n,f,m)),f=Ra(n,i),f!=null&&u.push(cr(n,f,m))),n.tag===3)return u;n=n.return}return[]}function na(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Vg(n,i,r,u,f){for(var m=i._reactName,S=[];r!==null&&r!==u;){var _=r,M=_.alternate,z=_.stateNode;if(_=_.tag,M!==null&&M===u)break;_!==5&&_!==26&&_!==27||z===null||(M=z,f?(z=Ra(r,m),z!=null&&S.unshift(cr(r,z,M))):f||(z=Ra(r,m),z!=null&&S.push(cr(r,z,M)))),r=r.return}S.length!==0&&n.push({event:i,listeners:S})}var Q0=/\r\n?/g,Z0=/\u0000|\uFFFD/g;function Xg(n){return(typeof n=="string"?n:""+n).replace(Q0,`
`).replace(Z0,"")}function Yg(n,i){return i=Xg(i),Xg(n)===i}function nl(){}function It(n,i,r,u,f,m){switch(r){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Cs(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Cs(n,""+u);break;case"className":ro(n,"class",u);break;case"tabIndex":ro(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ro(n,r,u);break;case"style":$d(n,u,m);break;case"data":if(i!=="object"){ro(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=co(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(i!=="input"&&It(n,i,"name",f.name,f,null),It(n,i,"formEncType",f.formEncType,f,null),It(n,i,"formMethod",f.formMethod,f,null),It(n,i,"formTarget",f.formTarget,f,null)):(It(n,i,"encType",f.encType,f,null),It(n,i,"method",f.method,f,null),It(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=co(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=nl);break;case"onScroll":u!=null&&Rt("scroll",n);break;case"onScrollEnd":u!=null&&Rt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=co(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":Rt("beforetoggle",n),Rt("toggle",n),ao(n,"popover",u);break;case"xlinkActuate":Vn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Vn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Vn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Vn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Vn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Vn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Vn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Vn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Vn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ao(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Cv.get(r)||r,ao(n,r,u))}}function Qu(n,i,r,u,f,m){switch(r){case"style":$d(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"children":typeof u=="string"?Cs(n,u):(typeof u=="number"||typeof u=="bigint")&&Cs(n,""+u);break;case"onScroll":u!=null&&Rt("scroll",n);break;case"onScrollEnd":u!=null&&Rt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=nl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fd.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),i=r.slice(2,f?r.length-7:void 0),m=n[je]||null,m=m!=null?m[r]:null,typeof m=="function"&&n.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(i,u,f);break t}r in n?n[r]=u:u===!0?n.setAttribute(r,""):ao(n,r,u)}}}function Ce(n,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",n),Rt("load",n);var u=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var S=r[m];if(S!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:It(n,i,m,S,r,null)}}f&&It(n,i,"srcSet",r.srcSet,r,null),u&&It(n,i,"src",r.src,r,null);return;case"input":Rt("invalid",n);var _=m=S=f=null,M=null,z=null;for(u in r)if(r.hasOwnProperty(u)){var Y=r[u];if(Y!=null)switch(u){case"name":f=Y;break;case"type":S=Y;break;case"checked":M=Y;break;case"defaultChecked":z=Y;break;case"value":m=Y;break;case"defaultValue":_=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:It(n,i,u,Y,r,null)}}qd(n,m,_,M,z,S,f,!1),oo(n);return;case"select":Rt("invalid",n),u=S=m=null;for(f in r)if(r.hasOwnProperty(f)&&(_=r[f],_!=null))switch(f){case"value":m=_;break;case"defaultValue":S=_;break;case"multiple":u=_;default:It(n,i,f,_,r,null)}i=m,r=S,n.multiple=!!u,i!=null?Rs(n,!!u,i,!1):r!=null&&Rs(n,!!u,r,!0);return;case"textarea":Rt("invalid",n),m=f=u=null;for(S in r)if(r.hasOwnProperty(S)&&(_=r[S],_!=null))switch(S){case"value":u=_;break;case"defaultValue":f=_;break;case"children":m=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:It(n,i,S,_,r,null)}Xd(n,u,f,m),oo(n);return;case"option":for(M in r)if(r.hasOwnProperty(M)&&(u=r[M],u!=null))switch(M){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:It(n,i,M,u,r,null)}return;case"dialog":Rt("beforetoggle",n),Rt("toggle",n),Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":Rt("load",n);break;case"video":case"audio":for(u=0;u<lr.length;u++)Rt(lr[u],n);break;case"image":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"embed":case"source":case"link":Rt("error",n),Rt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in r)if(r.hasOwnProperty(z)&&(u=r[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:It(n,i,z,u,r,null)}return;default:if(fc(i)){for(Y in r)r.hasOwnProperty(Y)&&(u=r[Y],u!==void 0&&Qu(n,i,Y,u,r,void 0));return}}for(_ in r)r.hasOwnProperty(_)&&(u=r[_],u!=null&&It(n,i,_,u,r,null))}function J0(n,i,r,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,S=null,_=null,M=null,z=null,Y=null;for(G in r){var W=r[G];if(r.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":M=W;default:u.hasOwnProperty(G)||It(n,i,G,null,u,W)}}for(var j in u){var G=u[j];if(W=r[j],u.hasOwnProperty(j)&&(G!=null||W!=null))switch(j){case"type":m=G;break;case"name":f=G;break;case"checked":z=G;break;case"defaultChecked":Y=G;break;case"value":S=G;break;case"defaultValue":_=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==W&&It(n,i,j,G,u,W)}}hc(n,S,_,M,z,Y,m,f);return;case"select":G=S=_=j=null;for(m in r)if(M=r[m],r.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":G=M;default:u.hasOwnProperty(m)||It(n,i,m,null,u,M)}for(f in u)if(m=u[f],M=r[f],u.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":j=m;break;case"defaultValue":_=m;break;case"multiple":S=m;default:m!==M&&It(n,i,f,m,u,M)}i=_,r=S,u=G,j!=null?Rs(n,!!r,j,!1):!!u!=!!r&&(i!=null?Rs(n,!!r,i,!0):Rs(n,!!r,r?[]:"",!1));return;case"textarea":G=j=null;for(_ in r)if(f=r[_],r.hasOwnProperty(_)&&f!=null&&!u.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:It(n,i,_,null,u,f)}for(S in u)if(f=u[S],m=r[S],u.hasOwnProperty(S)&&(f!=null||m!=null))switch(S){case"value":j=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&It(n,i,S,f,u,m)}Vd(n,j,G);return;case"option":for(var mt in r)if(j=r[mt],r.hasOwnProperty(mt)&&j!=null&&!u.hasOwnProperty(mt))switch(mt){case"selected":n.selected=!1;break;default:It(n,i,mt,null,u,j)}for(M in u)if(j=u[M],G=r[M],u.hasOwnProperty(M)&&j!==G&&(j!=null||G!=null))switch(M){case"selected":n.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:It(n,i,M,j,u,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ft in r)j=r[ft],r.hasOwnProperty(ft)&&j!=null&&!u.hasOwnProperty(ft)&&It(n,i,ft,null,u,j);for(z in u)if(j=u[z],G=r[z],u.hasOwnProperty(z)&&j!==G&&(j!=null||G!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,i));break;default:It(n,i,z,j,u,G)}return;default:if(fc(i)){for(var zt in r)j=r[zt],r.hasOwnProperty(zt)&&j!==void 0&&!u.hasOwnProperty(zt)&&Qu(n,i,zt,void 0,u,j);for(Y in u)j=u[Y],G=r[Y],!u.hasOwnProperty(Y)||j===G||j===void 0&&G===void 0||Qu(n,i,Y,j,u,G);return}}for(var B in r)j=r[B],r.hasOwnProperty(B)&&j!=null&&!u.hasOwnProperty(B)&&It(n,i,B,null,u,j);for(W in u)j=u[W],G=r[W],!u.hasOwnProperty(W)||j===G||j==null&&G==null||It(n,i,W,j,u,G)}var Zu=null,Ju=null;function il(n){return n.nodeType===9?n:n.ownerDocument}function $g(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kg(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function th(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var eh=null;function tA(){var n=window.event;return n&&n.type==="popstate"?n===eh?!1:(eh=n,!0):(eh=null,!1)}var Wg=typeof setTimeout=="function"?setTimeout:void 0,eA=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,nA=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(n){return Qg.resolve(null).then(n).catch(iA)}:Wg;function iA(n){setTimeout(function(){throw n})}function Di(n){return n==="head"}function Zg(n,i){var r=i,u=0,f=0;do{var m=r.nextSibling;if(n.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"){if(0<u&&8>u){r=u;var S=n.ownerDocument;if(r&1&&ur(S.documentElement),r&2&&ur(S.body),r&4)for(r=S.head,ur(r),S=r.firstChild;S;){var _=S.nextSibling,M=S.nodeName;S[xa]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&S.rel.toLowerCase()==="stylesheet"||r.removeChild(S),S=_}}if(f===0){n.removeChild(m),br(i);return}f--}else r==="$"||r==="$?"||r==="$!"?f++:u=r.charCodeAt(0)-48;else u=0;r=m}while(r);br(i)}function nh(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":nh(r),oc(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function sA(n,i,r,u){for(;n.nodeType===1;){var f=r;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[xa])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=_n(n.nextSibling),n===null)break}return null}function aA(n,i,r){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=_n(n.nextSibling),n===null))return null;return n}function ih(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function rA(n,i){var r=n.ownerDocument;if(n.data!=="$?"||r.readyState==="complete")i();else{var u=function(){i(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function _n(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var sh=null;function Jg(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(i===0)return n;i--}else r==="/$"&&i++}n=n.previousSibling}return null}function tm(n,i,r){switch(i=il(r),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function ur(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);oc(n)}var bn=new Map,em=new Set;function sl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ai=H.d;H.d={f:oA,r:lA,D:cA,C:uA,L:hA,m:dA,X:pA,S:fA,M:gA};function oA(){var n=ai.f(),i=Ko();return n||i}function lA(n){var i=Es(n);i!==null&&i.tag===5&&i.type==="form"?Sp(i):ai.r(n)}var ia=typeof document>"u"?null:document;function nm(n,i,r){var u=ia;if(u&&typeof i=="string"&&i){var f=hn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),em.has(f)||(em.add(f),n={rel:n,crossOrigin:r,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),Ce(i,"link",n),ve(i),u.head.appendChild(i)))}}function cA(n){ai.D(n),nm("dns-prefetch",n,null)}function uA(n,i){ai.C(n,i),nm("preconnect",n,i)}function hA(n,i,r){ai.L(n,i,r);var u=ia;if(u&&n&&i){var f='link[rel="preload"][as="'+hn(i)+'"]';i==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+hn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+hn(r.imageSizes)+'"]')):f+='[href="'+hn(n)+'"]';var m=f;switch(i){case"style":m=sa(n);break;case"script":m=aa(n)}bn.has(m)||(n=g({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:n,as:i},r),bn.set(m,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(hr(m))||i==="script"&&u.querySelector(dr(m))||(i=u.createElement("link"),Ce(i,"link",n),ve(i),u.head.appendChild(i)))}}function dA(n,i){ai.m(n,i);var r=ia;if(r&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+hn(u)+'"][href="'+hn(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=aa(n)}if(!bn.has(m)&&(n=g({rel:"modulepreload",href:n},i),bn.set(m,n),r.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(dr(m)))return}u=r.createElement("link"),Ce(u,"link",n),ve(u),r.head.appendChild(u)}}}function fA(n,i,r){ai.S(n,i,r);var u=ia;if(u&&n){var f=_s(u).hoistableStyles,m=sa(n);i=i||"default";var S=f.get(m);if(!S){var _={loading:0,preload:null};if(S=u.querySelector(hr(m)))_.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":i},r),(r=bn.get(m))&&ah(n,r);var M=S=u.createElement("link");ve(M),Ce(M,"link",n),M._p=new Promise(function(z,Y){M.onload=z,M.onerror=Y}),M.addEventListener("load",function(){_.loading|=1}),M.addEventListener("error",function(){_.loading|=2}),_.loading|=4,al(S,i,u)}S={type:"stylesheet",instance:S,count:1,state:_},f.set(m,S)}}}function pA(n,i){ai.X(n,i);var r=ia;if(r&&n){var u=_s(r).hoistableScripts,f=aa(n),m=u.get(f);m||(m=r.querySelector(dr(f)),m||(n=g({src:n,async:!0},i),(i=bn.get(f))&&rh(n,i),m=r.createElement("script"),ve(m),Ce(m,"link",n),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function gA(n,i){ai.M(n,i);var r=ia;if(r&&n){var u=_s(r).hoistableScripts,f=aa(n),m=u.get(f);m||(m=r.querySelector(dr(f)),m||(n=g({src:n,async:!0,type:"module"},i),(i=bn.get(f))&&rh(n,i),m=r.createElement("script"),ve(m),Ce(m,"link",n),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function im(n,i,r,u){var f=(f=ot.current)?sl(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=sa(r.href),r=_s(f).hoistableStyles,u=r.get(i),u||(u={type:"style",instance:null,count:0,state:null},r.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=sa(r.href);var m=_s(f).hoistableStyles,S=m.get(n);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,S),(m=f.querySelector(hr(n)))&&!m._p&&(S.instance=m,S.state.loading=5),bn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},bn.set(n,r),m||mA(f,n,r,S.state))),i&&u===null)throw Error(s(528,""));return S}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=aa(r),r=_s(f).hoistableScripts,u=r.get(i),u||(u={type:"script",instance:null,count:0,state:null},r.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function sa(n){return'href="'+hn(n)+'"'}function hr(n){return'link[rel="stylesheet"]['+n+"]"}function sm(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function mA(n,i,r,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Ce(i,"link",r),ve(i),n.head.appendChild(i))}function aa(n){return'[src="'+hn(n)+'"]'}function dr(n){return"script[async]"+n}function am(n,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+hn(r.href)+'"]');if(u)return i.instance=u,ve(u),u;var f=g({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ve(u),Ce(u,"style",f),al(u,r.precedence,n),i.instance=u;case"stylesheet":f=sa(r.href);var m=n.querySelector(hr(f));if(m)return i.state.loading|=4,i.instance=m,ve(m),m;u=sm(r),(f=bn.get(f))&&ah(u,f),m=(n.ownerDocument||n).createElement("link"),ve(m);var S=m;return S._p=new Promise(function(_,M){S.onload=_,S.onerror=M}),Ce(m,"link",u),i.state.loading|=4,al(m,r.precedence,n),i.instance=m;case"script":return m=aa(r.src),(f=n.querySelector(dr(m)))?(i.instance=f,ve(f),f):(u=r,(f=bn.get(m))&&(u=g({},r),rh(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),ve(f),Ce(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,al(u,r.precedence,n));return i.instance}function al(n,i,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,S=0;S<u.length;S++){var _=u[S];if(_.dataset.precedence===i)m=_;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(n,i.firstChild))}function ah(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function rh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var rl=null;function rm(n,i,r){if(rl===null){var u=new Map,f=rl=new Map;f.set(r,u)}else f=rl,u=f.get(r),u||(u=new Map,f.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),f=0;f<r.length;f++){var m=r[f];if(!(m[xa]||m[De]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(i)||"";S=n+S;var _=u.get(S);_?_.push(m):u.set(S,[m])}}return u}function om(n,i,r){n=n.ownerDocument||n,n.head.insertBefore(r,i==="title"?n.querySelector("head > title"):null)}function yA(n,i,r){if(r===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function lm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var fr=null;function bA(){}function vA(n,i,r){if(fr===null)throw Error(s(475));var u=fr;if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=sa(r.href),m=n.querySelector(hr(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=ol.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=m,ve(m);return}m=n.ownerDocument||n,r=sm(r),(f=bn.get(f))&&ah(r,f),m=m.createElement("link"),ve(m);var S=m;S._p=new Promise(function(_,M){S.onload=_,S.onerror=M}),Ce(m,"link",r),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=ol.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function AA(){if(fr===null)throw Error(s(475));var n=fr;return n.stylesheets&&n.count===0&&oh(n,n.stylesheets),0<n.count?function(i){var r=setTimeout(function(){if(n.stylesheets&&oh(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(r)}}:null}function ol(){if(this.count--,this.count===0){if(this.stylesheets)oh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ll=null;function oh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ll=new Map,i.forEach(SA,n),ll=null,ol.call(n))}function SA(n,i){if(!(i.state.loading&4)){var r=ll.get(n);if(r)var u=r.get(null);else{r=new Map,ll.set(n,r);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var S=f[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),u=S)}u&&r.set(null,u)}f=i.instance,S=f.getAttribute("data-precedence"),m=r.get(S)||u,m===u&&r.set(null,f),r.set(S,f),this.count++,u=ol.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var pr={$$typeof:T,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function wA(n,i,r,u,f,m,S,_){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ic(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.hiddenUpdates=ic(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function cm(n,i,r,u,f,m,S,_,M,z,Y,W){return n=new wA(n,i,r,S,_,M,z,W),i=1,m===!0&&(i|=24),m=tn(3,null,null,i),n.current=m,m.stateNode=n,i=jc(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:r,cache:i},Xc(m),n}function um(n){return n?(n=Bs,n):Bs}function hm(n,i,r,u,f,m){f=um(f),u.context===null?u.context=f:u.pendingContext=f,u=yi(i),u.payload={element:r},m=m===void 0?null:m,m!==null&&(u.callback=m),r=bi(n,u,i),r!==null&&(rn(r,n,i),qa(r,n,i))}function dm(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<i?r:i}}function lh(n,i){dm(n,i),(n=n.alternate)&&dm(n,i)}function fm(n){if(n.tag===13){var i=Ps(n,67108864);i!==null&&rn(i,n,67108864),lh(n,67108864)}}var cl=!0;function EA(n,i,r,u){var f=N.T;N.T=null;var m=H.p;try{H.p=2,ch(n,i,r,u)}finally{H.p=m,N.T=f}}function _A(n,i,r,u){var f=N.T;N.T=null;var m=H.p;try{H.p=8,ch(n,i,r,u)}finally{H.p=m,N.T=f}}function ch(n,i,r,u){if(cl){var f=uh(u);if(f===null)Wu(n,i,u,ul,r),gm(n,u);else if(TA(f,n,i,r,u))u.stopPropagation();else if(gm(n,u),i&4&&-1<xA.indexOf(n)){for(;f!==null;){var m=Es(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=Hi(m.pendingLanes);if(S!==0){var _=m;for(_.pendingLanes|=2,_.entangledLanes|=2;S;){var M=1<<31-Jt(S);_.entanglements[1]|=M,S&=~M}Nn(m),(Pt&6)===0&&(Yo=xe()+500,or(0))}}break;case 13:_=Ps(m,2),_!==null&&rn(_,m,2),Ko(),lh(m,2)}if(m=uh(u),m===null&&Wu(n,i,u,ul,r),m===f)break;f=m}f!==null&&u.stopPropagation()}else Wu(n,i,u,null,r)}}function uh(n){return n=gc(n),hh(n)}var ul=null;function hh(n){if(ul=null,n=ws(n),n!==null){var i=o(n);if(i===null)n=null;else{var r=i.tag;if(r===13){if(n=l(i),n!==null)return n;n=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return ul=n,null}function pm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ii()){case As:return 2;case to:return 8;case qn:case tc:return 32;case eo:return 268435456;default:return 32}default:return 32}}var dh=!1,Li=null,Ni=null,Oi=null,gr=new Map,mr=new Map,ki=[],xA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gm(n,i){switch(n){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":gr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":mr.delete(i.pointerId)}}function yr(n,i,r,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:r,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Es(i),i!==null&&fm(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function TA(n,i,r,u,f){switch(i){case"focusin":return Li=yr(Li,n,i,r,u,f),!0;case"dragenter":return Ni=yr(Ni,n,i,r,u,f),!0;case"mouseover":return Oi=yr(Oi,n,i,r,u,f),!0;case"pointerover":var m=f.pointerId;return gr.set(m,yr(gr.get(m)||null,n,i,r,u,f)),!0;case"gotpointercapture":return m=f.pointerId,mr.set(m,yr(mr.get(m)||null,n,i,r,u,f)),!0}return!1}function mm(n){var i=ws(n.target);if(i!==null){var r=o(i);if(r!==null){if(i=r.tag,i===13){if(i=l(r),i!==null){n.blockedOn=i,vv(n.priority,function(){if(r.tag===13){var u=an();u=sc(u);var f=Ps(r,u);f!==null&&rn(f,r,u),lh(r,u)}});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hl(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var r=uh(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);pc=u,r.target.dispatchEvent(u),pc=null}else return i=Es(r),i!==null&&fm(i),n.blockedOn=r,!1;i.shift()}return!0}function ym(n,i,r){hl(n)&&r.delete(i)}function RA(){dh=!1,Li!==null&&hl(Li)&&(Li=null),Ni!==null&&hl(Ni)&&(Ni=null),Oi!==null&&hl(Oi)&&(Oi=null),gr.forEach(ym),mr.forEach(ym)}function dl(n,i){n.blockedOn===i&&(n.blockedOn=null,dh||(dh=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,RA)))}var fl=null;function bm(n){fl!==n&&(fl=n,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){fl===n&&(fl=null);for(var i=0;i<n.length;i+=3){var r=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(hh(u||r)===null)continue;break}var m=Es(r);m!==null&&(n.splice(i,3),i-=3,hu(m,{pending:!0,data:f,method:r.method,action:u},u,f))}}))}function br(n){function i(M){return dl(M,n)}Li!==null&&dl(Li,n),Ni!==null&&dl(Ni,n),Oi!==null&&dl(Oi,n),gr.forEach(i),mr.forEach(i);for(var r=0;r<ki.length;r++){var u=ki[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ki.length&&(r=ki[0],r.blockedOn===null);)mm(r),r.blockedOn===null&&ki.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var f=r[u],m=r[u+1],S=f[je]||null;if(typeof m=="function")S||bm(r);else if(S){var _=null;if(m&&m.hasAttribute("formAction")){if(f=m,S=m[je]||null)_=S.formAction;else if(hh(f)!==null)continue}else _=S.action;typeof _=="function"?r[u+1]=_:(r.splice(u,3),u-=3),bm(r)}}}function fh(n){this._internalRoot=n}pl.prototype.render=fh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var r=i.current,u=an();hm(r,u,n,i,null,null)},pl.prototype.unmount=fh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;hm(n.current,2,null,n,null,null),Ko(),i[Ss]=null}};function pl(n){this._internalRoot=n}pl.prototype.unstable_scheduleHydration=function(n){if(n){var i=kd();n={blockedOn:null,target:n,priority:i};for(var r=0;r<ki.length&&i!==0&&i<ki[r].priority;r++);ki.splice(r,0,n),r===0&&mm(n)}};var vm=t.version;if(vm!=="19.1.1")throw Error(s(527,vm,"19.1.1"));H.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=d(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var CA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{zi=gl.inject(CA),Zt=gl}catch{}}return Ar.createRoot=function(n,i){if(!a(n))throw Error(s(299));var r=!1,u="",f=Pp,m=Bp,S=Fp,_=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(_=i.unstable_transitionCallbacks)),i=cm(n,1,!1,null,null,r,u,f,m,S,_,null),n[Ss]=i.current,Ku(n),new fh(i)},Ar.hydrateRoot=function(n,i,r){if(!a(n))throw Error(s(299));var u=!1,f="",m=Pp,S=Bp,_=Fp,M=null,z=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(M=r.unstable_transitionCallbacks),r.formState!==void 0&&(z=r.formState)),i=cm(n,1,!0,i,r??null,u,f,m,S,_,M,z),i.context=um(null),r=i.current,u=an(),u=sc(u),f=yi(u),f.callback=null,bi(r,f,u),r=u,i.current.lanes=r,_a(i,r),Nn(i),n[Ss]=i.current,Ku(n),new pl(i)},Ar.version="19.1.1",Ar}var Lm;function IA(){if(Lm)return yh.exports;Lm=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),yh.exports=UA(),yh.exports}var zA=IA();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Nm="popstate";function HA(c={}){function t(s,a){let{pathname:o,search:l,hash:h}=s.location;return Ph("",{pathname:o,search:l,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(s,a){return typeof a=="string"?a:Nr(a)}return GA(t,e,null,c)}function Qt(c,t){if(c===!1||c===null||typeof c>"u")throw new Error(t)}function jn(c,t){if(!c){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jA(){return Math.random().toString(36).substring(2,10)}function Om(c,t){return{usr:c.state,key:c.key,idx:t}}function Ph(c,t,e=null,s){return{pathname:typeof c=="string"?c:c.pathname,search:"",hash:"",...typeof t=="string"?ya(t):t,state:e,key:t&&t.key||s||jA()}}function Nr({pathname:c="/",search:t="",hash:e=""}){return t&&t!=="?"&&(c+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(c+=e.charAt(0)==="#"?e:"#"+e),c}function ya(c){let t={};if(c){let e=c.indexOf("#");e>=0&&(t.hash=c.substring(e),c=c.substring(0,e));let s=c.indexOf("?");s>=0&&(t.search=c.substring(s),c=c.substring(0,s)),c&&(t.pathname=c)}return t}function GA(c,t,e,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,h="POP",d=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function y(){h="POP";let E=g(),x=E==null?null:E-p;p=E,d&&d({action:h,location:w.location,delta:x})}function b(E,x){h="PUSH";let R=Ph(w.location,E,x);p=g()+1;let T=Om(R,p),D=w.createHref(R);try{l.pushState(T,"",D)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(D)}o&&d&&d({action:h,location:w.location,delta:1})}function A(E,x){h="REPLACE";let R=Ph(w.location,E,x);p=g();let T=Om(R,p),D=w.createHref(R);l.replaceState(T,"",D),o&&d&&d({action:h,location:w.location,delta:0})}function v(E){return qA(E)}let w={get action(){return h},get location(){return c(a,l)},listen(E){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Nm,y),d=E,()=>{a.removeEventListener(Nm,y),d=null}},createHref(E){return t(a,E)},createURL:v,encodeLocation(E){let x=v(E);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:b,replace:A,go(E){return l.go(E)}};return w}function qA(c,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Qt(e,"No window.location.(origin|href) available to create URL");let s=typeof c=="string"?c:Nr(c);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=e+s),new URL(s,e)}function Ly(c,t,e="/"){return VA(c,t,e,!1)}function VA(c,t,e,s){let a=typeof t=="string"?ya(t):t,o=ci(a.pathname||"/",e);if(o==null)return null;let l=Ny(c);XA(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=iS(o);h=eS(l[d],p,s)}return h}function Ny(c,t=[],e=[],s="",a=!1){let o=(l,h,d=a,p)=>{let g={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&d)return;Qt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=li([s,g.relativePath]),b=e.concat(g);l.children&&l.children.length>0&&(Qt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Ny(l.children,t,b,y,d)),!(l.path==null&&!l.index)&&t.push({path:y,score:JA(y,l.index),routesMeta:b})};return c.forEach((l,h)=>{if(l.path===""||!l.path?.includes("?"))o(l,h);else for(let d of Oy(l.path))o(l,h,!0,d)}),t}function Oy(c){let t=c.split("/");if(t.length===0)return[];let[e,...s]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=Oy(s.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&h.push(...l),h.map(d=>c.startsWith("/")&&d===""?"/":d)}function XA(c){c.sort((t,e)=>t.score!==e.score?e.score-t.score:tS(t.routesMeta.map(s=>s.childrenIndex),e.routesMeta.map(s=>s.childrenIndex)))}var YA=/^:[\w-]+$/,$A=3,KA=2,WA=1,QA=10,ZA=-2,km=c=>c==="*";function JA(c,t){let e=c.split("/"),s=e.length;return e.some(km)&&(s+=ZA),t&&(s+=KA),e.filter(a=>!km(a)).reduce((a,o)=>a+(YA.test(o)?$A:o===""?WA:QA),s)}function tS(c,t){return c.length===t.length&&c.slice(0,-1).every((s,a)=>s===t[a])?c[c.length-1]-t[t.length-1]:0}function eS(c,t,e=!1){let{routesMeta:s}=c,a={},o="/",l=[];for(let h=0;h<s.length;++h){let d=s[h],p=h===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=Nl({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),b=d.route;if(!y&&p&&e&&!s[s.length-1].route.index&&(y=Nl({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),l.push({params:a,pathname:li([o,y.pathname]),pathnameBase:oS(li([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=li([o,y.pathnameBase]))}return l}function Nl(c,t){typeof c=="string"&&(c={path:c,caseSensitive:!1,end:!0});let[e,s]=nS(c.path,c.caseSensitive,c.end),a=t.match(e);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((p,{paramName:g,isOptional:y},b)=>{if(g==="*"){let v=h[b]||"";l=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const A=h[b];return y&&!A?p[g]=void 0:p[g]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:c}}function nS(c,t=!1,e=!0){jn(c==="*"||!c.endsWith("*")||c.endsWith("/*"),`Route path "${c}" will be treated as if it were "${c.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${c.replace(/\*$/,"/*")}".`);let s=[],a="^"+c.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(s.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return c.endsWith("*")?(s.push({paramName:"*"}),a+=c==="*"||c==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":c!==""&&c!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function iS(c){try{return c.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jn(!1,`The URL path "${c}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),c}}function ci(c,t){if(t==="/")return c;if(!c.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,s=c.charAt(e);return s&&s!=="/"?null:c.slice(e)||"/"}function sS(c,t="/"){let{pathname:e,search:s="",hash:a=""}=typeof c=="string"?ya(c):c;return{pathname:e?e.startsWith("/")?e:aS(e,t):t,search:lS(s),hash:cS(a)}}function aS(c,t){let e=t.replace(/\/+$/,"").split("/");return c.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Sh(c,t,e,s){return`Cannot include a '${c}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rS(c){return c.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function ky(c){let t=rS(c);return t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase)}function Py(c,t,e,s=!1){let a;typeof c=="string"?a=ya(c):(a={...c},Qt(!a.pathname||!a.pathname.includes("?"),Sh("?","pathname","search",a)),Qt(!a.pathname||!a.pathname.includes("#"),Sh("#","pathname","hash",a)),Qt(!a.search||!a.search.includes("#"),Sh("#","search","hash",a)));let o=c===""||a.pathname==="",l=o?"/":a.pathname,h;if(l==null)h=e;else{let y=t.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}h=y>=0?t[y]:"/"}let d=sS(a,h),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var li=c=>c.join("/").replace(/\/\/+/g,"/"),oS=c=>c.replace(/\/+$/,"").replace(/^\/*/,"/"),lS=c=>!c||c==="?"?"":c.startsWith("?")?c:"?"+c,cS=c=>!c||c==="#"?"":c.startsWith("#")?c:"#"+c;function uS(c){return c!=null&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.internal=="boolean"&&"data"in c}var By=["POST","PUT","PATCH","DELETE"];new Set(By);var hS=["GET",...By];new Set(hS);var ba=k.createContext(null);ba.displayName="DataRouter";var Fl=k.createContext(null);Fl.displayName="DataRouterState";k.createContext(!1);var Fy=k.createContext({isTransitioning:!1});Fy.displayName="ViewTransition";var dS=k.createContext(new Map);dS.displayName="Fetchers";var fS=k.createContext(null);fS.displayName="Await";var Gn=k.createContext(null);Gn.displayName="Navigation";var Ur=k.createContext(null);Ur.displayName="Location";var di=k.createContext({outlet:null,matches:[],isDataRoute:!1});di.displayName="Route";var td=k.createContext(null);td.displayName="RouteError";function pS(c,{relative:t}={}){Qt(Ir(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:s}=k.useContext(Gn),{hash:a,pathname:o,search:l}=zr(c,{relative:t}),h=o;return e!=="/"&&(h=o==="/"?e:li([e,o])),s.createHref({pathname:h,search:l,hash:a})}function Ir(){return k.useContext(Ur)!=null}function ys(){return Qt(Ir(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Ur).location}var Uy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Iy(c){k.useContext(Gn).static||k.useLayoutEffect(c)}function zy(){let{isDataRoute:c}=k.useContext(di);return c?RS():gS()}function gS(){Qt(Ir(),"useNavigate() may be used only in the context of a <Router> component.");let c=k.useContext(ba),{basename:t,navigator:e}=k.useContext(Gn),{matches:s}=k.useContext(di),{pathname:a}=ys(),o=JSON.stringify(ky(s)),l=k.useRef(!1);return Iy(()=>{l.current=!0}),k.useCallback((d,p={})=>{if(jn(l.current,Uy),!l.current)return;if(typeof d=="number"){e.go(d);return}let g=Py(d,JSON.parse(o),a,p.relative==="path");c==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:li([t,g.pathname])),(p.replace?e.replace:e.push)(g,p.state,p)},[t,e,o,a,c])}k.createContext(null);function zr(c,{relative:t}={}){let{matches:e}=k.useContext(di),{pathname:s}=ys(),a=JSON.stringify(ky(e));return k.useMemo(()=>Py(c,JSON.parse(a),s,t==="path"),[c,a,s,t])}function mS(c,t){return Hy(c,t)}function Hy(c,t,e,s,a){Qt(Ir(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=k.useContext(Gn),{matches:l}=k.useContext(di),h=l[l.length-1],d=h?h.params:{},p=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let R=y&&y.path||"";jy(p,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let b=ys(),A;if(t){let R=typeof t=="string"?ya(t):t;Qt(g==="/"||R.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${R.pathname}" was given in the \`location\` prop.`),A=R}else A=b;let v=A.pathname||"/",w=v;if(g!=="/"){let R=g.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=Ly(c,{pathname:w});jn(y||E!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),jn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=SS(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:li([g,o.encodeLocation?o.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?g:li([g,o.encodeLocation?o.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),l,e,s,a);return t&&x?k.createElement(Ur.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},x):x}function yS(){let c=TS(),t=uS(c)?`${c.status} ${c.statusText}`:c instanceof Error?c.message:JSON.stringify(c),e=c instanceof Error?c.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",c),l=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:o},"ErrorBoundary")," or"," ",k.createElement("code",{style:o},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),e?k.createElement("pre",{style:a},e):null,l)}var bS=k.createElement(yS,null),vS=class extends k.Component{constructor(c){super(c),this.state={location:c.location,revalidation:c.revalidation,error:c.error}}static getDerivedStateFromError(c){return{error:c}}static getDerivedStateFromProps(c,t){return t.location!==c.location||t.revalidation!=="idle"&&c.revalidation==="idle"?{error:c.error,location:c.location,revalidation:c.revalidation}:{error:c.error!==void 0?c.error:t.error,location:t.location,revalidation:c.revalidation||t.revalidation}}componentDidCatch(c,t){this.props.unstable_onError?this.props.unstable_onError(c,t):console.error("React Router caught the following error during render",c)}render(){return this.state.error!==void 0?k.createElement(di.Provider,{value:this.props.routeContext},k.createElement(td.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AS({routeContext:c,match:t,children:e}){let s=k.useContext(ba);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(di.Provider,{value:c},e)}function SS(c,t=[],e=null,s=null,a=null){if(c==null){if(!e)return null;if(e.errors)c=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)c=e.matches;else return null}let o=c,l=e?.errors;if(l!=null){let p=o.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);Qt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,d=-1;if(e)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:y,errors:b}=e,A=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||A){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,g,y)=>{let b,A=!1,v=null,w=null;e&&(b=l&&g.route.id?l[g.route.id]:void 0,v=g.route.errorElement||bS,h&&(d<0&&y===0?(jy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,w=null):d===y&&(A=!0,w=g.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,y+1)),x=()=>{let R;return b?R=v:A?R=w:g.route.Component?R=k.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=p,k.createElement(AS,{match:g,routeContext:{outlet:p,matches:E,isDataRoute:e!=null},children:R})};return e&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?k.createElement(vS,{location:e.location,revalidation:e.revalidation,component:v,error:b,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:s}):x()},null)}function ed(c){return`${c} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wS(c){let t=k.useContext(ba);return Qt(t,ed(c)),t}function ES(c){let t=k.useContext(Fl);return Qt(t,ed(c)),t}function _S(c){let t=k.useContext(di);return Qt(t,ed(c)),t}function nd(c){let t=_S(c),e=t.matches[t.matches.length-1];return Qt(e.route.id,`${c} can only be used on routes that contain a unique "id"`),e.route.id}function xS(){return nd("useRouteId")}function TS(){let c=k.useContext(td),t=ES("useRouteError"),e=nd("useRouteError");return c!==void 0?c:t.errors?.[e]}function RS(){let{router:c}=wS("useNavigate"),t=nd("useNavigate"),e=k.useRef(!1);return Iy(()=>{e.current=!0}),k.useCallback(async(a,o={})=>{jn(e.current,Uy),e.current&&(typeof a=="number"?c.navigate(a):await c.navigate(a,{fromRouteId:t,...o}))},[c,t])}var Pm={};function jy(c,t,e){!t&&!Pm[c]&&(Pm[c]=!0,jn(!1,e))}k.memo(CS);function CS({routes:c,future:t,state:e,unstable_onError:s}){return Hy(c,void 0,e,s,t)}function Bh(c){Qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MS({basename:c="/",children:t=null,location:e,navigationType:s="POP",navigator:a,static:o=!1}){Qt(!Ir(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=c.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof e=="string"&&(e=ya(e));let{pathname:d="/",search:p="",hash:g="",state:y=null,key:b="default"}=e,A=k.useMemo(()=>{let v=ci(d,l);return v==null?null:{location:{pathname:v,search:p,hash:g,state:y,key:b},navigationType:s}},[l,d,p,g,y,b,s]);return jn(A!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:k.createElement(Gn.Provider,{value:h},k.createElement(Ur.Provider,{children:t,value:A}))}function DS({children:c,location:t}){return mS(Fh(c),t)}function Fh(c,t=[]){let e=[];return k.Children.forEach(c,(s,a)=>{if(!k.isValidElement(s))return;let o=[...t,a];if(s.type===k.Fragment){e.push.apply(e,Fh(s.props.children,o));return}Qt(s.type===Bh,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Fh(s.props.children,o)),e.push(l)}),e}var xl="get",Tl="application/x-www-form-urlencoded";function Ul(c){return c!=null&&typeof c.tagName=="string"}function LS(c){return Ul(c)&&c.tagName.toLowerCase()==="button"}function NS(c){return Ul(c)&&c.tagName.toLowerCase()==="form"}function OS(c){return Ul(c)&&c.tagName.toLowerCase()==="input"}function kS(c){return!!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)}function PS(c,t){return c.button===0&&(!t||t==="_self")&&!kS(c)}var ml=null;function BS(){if(ml===null)try{new FormData(document.createElement("form"),0),ml=!1}catch{ml=!0}return ml}var FS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wh(c){return c!=null&&!FS.has(c)?(jn(!1,`"${c}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tl}"`),null):c}function US(c,t){let e,s,a,o,l;if(NS(c)){let h=c.getAttribute("action");s=h?ci(h,t):null,e=c.getAttribute("method")||xl,a=wh(c.getAttribute("enctype"))||Tl,o=new FormData(c)}else if(LS(c)||OS(c)&&(c.type==="submit"||c.type==="image")){let h=c.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=c.getAttribute("formaction")||h.getAttribute("action");if(s=d?ci(d,t):null,e=c.getAttribute("formmethod")||h.getAttribute("method")||xl,a=wh(c.getAttribute("formenctype"))||wh(h.getAttribute("enctype"))||Tl,o=new FormData(h,c),!BS()){let{name:p,type:g,value:y}=c;if(g==="image"){let b=p?`${p}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else p&&o.append(p,y)}}else{if(Ul(c))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=xl,s=null,a=Tl,l=c}return o&&a==="text/plain"&&(l=o,o=void 0),{action:s,method:e.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function id(c,t){if(c===!1||c===null||typeof c>"u")throw new Error(t)}function IS(c,t,e){let s=typeof c=="string"?new URL(c,typeof window>"u"?"server://singlefetch/":window.location.origin):c;return s.pathname==="/"?s.pathname=`_root.${e}`:t&&ci(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${e}`,s}async function zS(c,t){if(c.id in t)return t[c.id];try{let e=await import(c.module);return t[c.id]=e,e}catch(e){return console.error(`Error loading route module \`${c.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HS(c){return c==null?!1:c.href==null?c.rel==="preload"&&typeof c.imageSrcSet=="string"&&typeof c.imageSizes=="string":typeof c.rel=="string"&&typeof c.href=="string"}async function jS(c,t,e){let s=await Promise.all(c.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await zS(o,e);return l.links?l.links():[]}return[]}));return XS(s.flat(1).filter(HS).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Bm(c,t,e,s,a,o){let l=(d,p)=>e[p]?d.route.id!==e[p].route.id:!0,h=(d,p)=>e[p].pathname!==d.pathname||e[p].route.path?.endsWith("*")&&e[p].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,p)=>l(d,p)||h(d,p)):o==="data"?t.filter((d,p)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(c,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function GS(c,t,{includeHydrateFallback:e}={}){return qS(c.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function qS(c){return[...new Set(c)]}function VS(c){let t={},e=Object.keys(c).sort();for(let s of e)t[s]=c[s];return t}function XS(c,t){let e=new Set;return new Set(t),c.reduce((s,a)=>{let o=JSON.stringify(VS(a));return e.has(o)||(e.add(o),s.push({key:o,link:a})),s},[])}function Gy(){let c=k.useContext(ba);return id(c,"You must render this element inside a <DataRouterContext.Provider> element"),c}function YS(){let c=k.useContext(Fl);return id(c,"You must render this element inside a <DataRouterStateContext.Provider> element"),c}var sd=k.createContext(void 0);sd.displayName="FrameworkContext";function qy(){let c=k.useContext(sd);return id(c,"You must render this element inside a <HydratedRouter> element"),c}function $S(c,t){let e=k.useContext(sd),[s,a]=k.useState(!1),[o,l]=k.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=t,b=k.useRef(null);k.useEffect(()=>{if(c==="render"&&l(!0),c==="viewport"){let w=x=>{x.forEach(R=>{l(R.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return b.current&&E.observe(b.current),()=>{E.disconnect()}}},[c]),k.useEffect(()=>{if(s){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[s]);let A=()=>{a(!0)},v=()=>{a(!1),l(!1)};return e?c!=="intent"?[o,b,{}]:[o,b,{onFocus:Sr(h,A),onBlur:Sr(d,v),onMouseEnter:Sr(p,A),onMouseLeave:Sr(g,v),onTouchStart:Sr(y,A)}]:[!1,b,{}]}function Sr(c,t){return e=>{c&&c(e),e.defaultPrevented||t(e)}}function KS({page:c,...t}){let{router:e}=Gy(),s=k.useMemo(()=>Ly(e.routes,c,e.basename),[e.routes,c,e.basename]);return s?k.createElement(QS,{page:c,matches:s,...t}):null}function WS(c){let{manifest:t,routeModules:e}=qy(),[s,a]=k.useState([]);return k.useEffect(()=>{let o=!1;return jS(c,t,e).then(l=>{o||a(l)}),()=>{o=!0}},[c,t,e]),s}function QS({page:c,matches:t,...e}){let s=ys(),{manifest:a,routeModules:o}=qy(),{basename:l}=Gy(),{loaderData:h,matches:d}=YS(),p=k.useMemo(()=>Bm(c,t,d,a,s,"data"),[c,t,d,a,s]),g=k.useMemo(()=>Bm(c,t,d,a,s,"assets"),[c,t,d,a,s]),y=k.useMemo(()=>{if(c===s.pathname+s.search+s.hash)return[];let v=new Set,w=!1;if(t.forEach(x=>{let R=a.routes[x.route.id];!R||!R.hasLoader||(!p.some(T=>T.route.id===x.route.id)&&x.route.id in h&&o[x.route.id]?.shouldRevalidate||R.hasClientLoader?w=!0:v.add(x.route.id))}),v.size===0)return[];let E=IS(c,l,"data");return w&&v.size>0&&E.searchParams.set("_routes",t.filter(x=>v.has(x.route.id)).map(x=>x.route.id).join(",")),[E.pathname+E.search]},[l,h,s,a,p,t,c,o]),b=k.useMemo(()=>GS(g,a),[g,a]),A=WS(g);return k.createElement(k.Fragment,null,y.map(v=>k.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...e})),b.map(v=>k.createElement("link",{key:v,rel:"modulepreload",href:v,...e})),A.map(({key:v,link:w})=>k.createElement("link",{key:v,nonce:e.nonce,...w})))}function ZS(...c){return t=>{c.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var Vy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vy&&(window.__reactRouterVersion="7.9.1")}catch{}function JS({basename:c,children:t,window:e}){let s=k.useRef();s.current==null&&(s.current=HA({window:e,v5Compat:!0}));let a=s.current,[o,l]=k.useState({action:a.action,location:a.location}),h=k.useCallback(d=>{k.startTransition(()=>l(d))},[l]);return k.useLayoutEffect(()=>a.listen(h),[a,h]),k.createElement(MS,{basename:c,children:t,location:o.location,navigationType:o.action,navigator:a})}var Xy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yy=k.forwardRef(function({onClick:t,discover:e="render",prefetch:s="none",relative:a,reloadDocument:o,replace:l,state:h,target:d,to:p,preventScrollReset:g,viewTransition:y,...b},A){let{basename:v}=k.useContext(Gn),w=typeof p=="string"&&Xy.test(p),E,x=!1;if(typeof p=="string"&&w&&(E=p,Vy))try{let $=new URL(window.location.href),J=p.startsWith("//")?new URL($.protocol+p):new URL(p),tt=ci(J.pathname,v);J.origin===$.origin&&tt!=null?p=tt+J.search+J.hash:x=!0}catch{jn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=pS(p,{relative:a}),[T,D,C]=$S(s,b),U=iw(p,{replace:l,state:h,target:d,preventScrollReset:g,relative:a,viewTransition:y});function F($){t&&t($),$.defaultPrevented||U($)}let V=k.createElement("a",{...b,...C,href:E||R,onClick:x||o?t:F,ref:ZS(A,D),target:d,"data-discover":!w&&e==="render"?"true":void 0});return T&&!w?k.createElement(k.Fragment,null,V,k.createElement(KS,{page:R})):V});Yy.displayName="Link";var tw=k.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:h,children:d,...p},g){let y=zr(l,{relative:p.relative}),b=ys(),A=k.useContext(Fl),{navigator:v,basename:w}=k.useContext(Gn),E=A!=null&&lw(y)&&h===!0,x=v.encodeLocation?v.encodeLocation(y).pathname:y.pathname,R=b.pathname,T=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;e||(R=R.toLowerCase(),T=T?T.toLowerCase():null,x=x.toLowerCase()),T&&w&&(T=ci(T,w)||T);const D=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let C=R===x||!a&&R.startsWith(x)&&R.charAt(D)==="/",U=T!=null&&(T===x||!a&&T.startsWith(x)&&T.charAt(x.length)==="/"),F={isActive:C,isPending:U,isTransitioning:E},V=C?t:void 0,$;typeof s=="function"?$=s(F):$=[s,C?"active":null,U?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let J=typeof o=="function"?o(F):o;return k.createElement(Yy,{...p,"aria-current":V,className:$,ref:g,style:J,to:l,viewTransition:h},typeof d=="function"?d(F):d)});tw.displayName="NavLink";var ew=k.forwardRef(({discover:c="render",fetcherKey:t,navigate:e,reloadDocument:s,replace:a,state:o,method:l=xl,action:h,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:y,...b},A)=>{let v=rw(),w=ow(h,{relative:p}),E=l.toLowerCase()==="get"?"get":"post",x=typeof h=="string"&&Xy.test(h),R=T=>{if(d&&d(T),T.defaultPrevented)return;T.preventDefault();let D=T.nativeEvent.submitter,C=D?.getAttribute("formmethod")||l;v(D||T.currentTarget,{fetcherKey:t,method:C,navigate:e,replace:a,state:o,relative:p,preventScrollReset:g,viewTransition:y})};return k.createElement("form",{ref:A,method:E,action:w,onSubmit:s?d:R,...b,"data-discover":!x&&c==="render"?"true":void 0})});ew.displayName="Form";function nw(c){return`${c} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $y(c){let t=k.useContext(ba);return Qt(t,nw(c)),t}function iw(c,{target:t,replace:e,state:s,preventScrollReset:a,relative:o,viewTransition:l}={}){let h=zy(),d=ys(),p=zr(c,{relative:o});return k.useCallback(g=>{if(PS(g,t)){g.preventDefault();let y=e!==void 0?e:Nr(d)===Nr(p);h(c,{replace:y,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,h,p,e,s,t,c,a,o,l])}var sw=0,aw=()=>`__${String(++sw)}__`;function rw(){let{router:c}=$y("useSubmit"),{basename:t}=k.useContext(Gn),e=xS();return k.useCallback(async(s,a={})=>{let{action:o,method:l,encType:h,formData:d,body:p}=US(s,t);if(a.navigate===!1){let g=a.fetcherKey||aw();await c.fetch(g,e,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||l,formEncType:a.encType||h,flushSync:a.flushSync})}else await c.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||l,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[c,t,e])}function ow(c,{relative:t}={}){let{basename:e}=k.useContext(Gn),s=k.useContext(di);Qt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...zr(c||".",{relative:t})},l=ys();if(c==null){o.search=l.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();o.search=g?`?${g}`:""}}return(!c||c===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:li([e,o.pathname])),Nr(o)}function lw(c,{relative:t}={}){let e=k.useContext(Fy);Qt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=$y("useViewTransitionState"),a=zr(c,{relative:t});if(!e.isTransitioning)return!1;let o=ci(e.currentLocation.pathname,s)||e.currentLocation.pathname,l=ci(e.nextLocation.pathname,s)||e.nextLocation.pathname;return Nl(a.pathname,l)!=null||Nl(a.pathname,o)!=null}function Ky(c,t){return function(){return c.apply(t,arguments)}}const{toString:cw}=Object.prototype,{getPrototypeOf:ad}=Object,{iterator:Il,toStringTag:Wy}=Symbol,zl=(c=>t=>{const e=cw.call(t);return c[e]||(c[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Rn=c=>(c=c.toLowerCase(),t=>zl(t)===c),Hl=c=>t=>typeof t===c,{isArray:va}=Array,pa=Hl("undefined");function Hr(c){return c!==null&&!pa(c)&&c.constructor!==null&&!pa(c.constructor)&&We(c.constructor.isBuffer)&&c.constructor.isBuffer(c)}const Qy=Rn("ArrayBuffer");function uw(c){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(c):t=c&&c.buffer&&Qy(c.buffer),t}const hw=Hl("string"),We=Hl("function"),Zy=Hl("number"),jr=c=>c!==null&&typeof c=="object",dw=c=>c===!0||c===!1,Rl=c=>{if(zl(c)!=="object")return!1;const t=ad(c);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Wy in c)&&!(Il in c)},fw=c=>{if(!jr(c)||Hr(c))return!1;try{return Object.keys(c).length===0&&Object.getPrototypeOf(c)===Object.prototype}catch{return!1}},pw=Rn("Date"),gw=Rn("File"),mw=Rn("Blob"),yw=Rn("FileList"),bw=c=>jr(c)&&We(c.pipe),vw=c=>{let t;return c&&(typeof FormData=="function"&&c instanceof FormData||We(c.append)&&((t=zl(c))==="formdata"||t==="object"&&We(c.toString)&&c.toString()==="[object FormData]"))},Aw=Rn("URLSearchParams"),[Sw,ww,Ew,_w]=["ReadableStream","Request","Response","Headers"].map(Rn),xw=c=>c.trim?c.trim():c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gr(c,t,{allOwnKeys:e=!1}={}){if(c===null||typeof c>"u")return;let s,a;if(typeof c!="object"&&(c=[c]),va(c))for(s=0,a=c.length;s<a;s++)t.call(null,c[s],s,c);else{if(Hr(c))return;const o=e?Object.getOwnPropertyNames(c):Object.keys(c),l=o.length;let h;for(s=0;s<l;s++)h=o[s],t.call(null,c[h],h,c)}}function Jy(c,t){if(Hr(c))return null;t=t.toLowerCase();const e=Object.keys(c);let s=e.length,a;for(;s-- >0;)if(a=e[s],t===a.toLowerCase())return a;return null}const os=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,tb=c=>!pa(c)&&c!==os;function Uh(){const{caseless:c,skipUndefined:t}=tb(this)&&this||{},e={},s=(a,o)=>{const l=c&&Jy(e,o)||o;Rl(e[l])&&Rl(a)?e[l]=Uh(e[l],a):Rl(a)?e[l]=Uh({},a):va(a)?e[l]=a.slice():(!t||!pa(a))&&(e[l]=a)};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&Gr(arguments[a],s);return e}const Tw=(c,t,e,{allOwnKeys:s}={})=>(Gr(t,(a,o)=>{e&&We(a)?c[o]=Ky(a,e):c[o]=a},{allOwnKeys:s}),c),Rw=c=>(c.charCodeAt(0)===65279&&(c=c.slice(1)),c),Cw=(c,t,e,s)=>{c.prototype=Object.create(t.prototype,s),c.prototype.constructor=c,Object.defineProperty(c,"super",{value:t.prototype}),e&&Object.assign(c.prototype,e)},Mw=(c,t,e,s)=>{let a,o,l;const h={};if(t=t||{},c==null)return t;do{for(a=Object.getOwnPropertyNames(c),o=a.length;o-- >0;)l=a[o],(!s||s(l,c,t))&&!h[l]&&(t[l]=c[l],h[l]=!0);c=e!==!1&&ad(c)}while(c&&(!e||e(c,t))&&c!==Object.prototype);return t},Dw=(c,t,e)=>{c=String(c),(e===void 0||e>c.length)&&(e=c.length),e-=t.length;const s=c.indexOf(t,e);return s!==-1&&s===e},Lw=c=>{if(!c)return null;if(va(c))return c;let t=c.length;if(!Zy(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=c[t];return e},Nw=(c=>t=>c&&t instanceof c)(typeof Uint8Array<"u"&&ad(Uint8Array)),Ow=(c,t)=>{const s=(c&&c[Il]).call(c);let a;for(;(a=s.next())&&!a.done;){const o=a.value;t.call(c,o[0],o[1])}},kw=(c,t)=>{let e;const s=[];for(;(e=c.exec(t))!==null;)s.push(e);return s},Pw=Rn("HTMLFormElement"),Bw=c=>c.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,s,a){return s.toUpperCase()+a}),Fm=(({hasOwnProperty:c})=>(t,e)=>c.call(t,e))(Object.prototype),Fw=Rn("RegExp"),eb=(c,t)=>{const e=Object.getOwnPropertyDescriptors(c),s={};Gr(e,(a,o)=>{let l;(l=t(a,o,c))!==!1&&(s[o]=l||a)}),Object.defineProperties(c,s)},Uw=c=>{eb(c,(t,e)=>{if(We(c)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const s=c[e];if(We(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},Iw=(c,t)=>{const e={},s=a=>{a.forEach(o=>{e[o]=!0})};return va(c)?s(c):s(String(c).split(t)),e},zw=()=>{},Hw=(c,t)=>c!=null&&Number.isFinite(c=+c)?c:t;function jw(c){return!!(c&&We(c.append)&&c[Wy]==="FormData"&&c[Il])}const Gw=c=>{const t=new Array(10),e=(s,a)=>{if(jr(s)){if(t.indexOf(s)>=0)return;if(Hr(s))return s;if(!("toJSON"in s)){t[a]=s;const o=va(s)?[]:{};return Gr(s,(l,h)=>{const d=e(l,a+1);!pa(d)&&(o[h]=d)}),t[a]=void 0,o}}return s};return e(c,0)},qw=Rn("AsyncFunction"),Vw=c=>c&&(jr(c)||We(c))&&We(c.then)&&We(c.catch),nb=((c,t)=>c?setImmediate:t?((e,s)=>(os.addEventListener("message",({source:a,data:o})=>{a===os&&o===e&&s.length&&s.shift()()},!1),a=>{s.push(a),os.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",We(os.postMessage)),Xw=typeof queueMicrotask<"u"?queueMicrotask.bind(os):typeof process<"u"&&process.nextTick||nb,Yw=c=>c!=null&&We(c[Il]),q={isArray:va,isArrayBuffer:Qy,isBuffer:Hr,isFormData:vw,isArrayBufferView:uw,isString:hw,isNumber:Zy,isBoolean:dw,isObject:jr,isPlainObject:Rl,isEmptyObject:fw,isReadableStream:Sw,isRequest:ww,isResponse:Ew,isHeaders:_w,isUndefined:pa,isDate:pw,isFile:gw,isBlob:mw,isRegExp:Fw,isFunction:We,isStream:bw,isURLSearchParams:Aw,isTypedArray:Nw,isFileList:yw,forEach:Gr,merge:Uh,extend:Tw,trim:xw,stripBOM:Rw,inherits:Cw,toFlatObject:Mw,kindOf:zl,kindOfTest:Rn,endsWith:Dw,toArray:Lw,forEachEntry:Ow,matchAll:kw,isHTMLForm:Pw,hasOwnProperty:Fm,hasOwnProp:Fm,reduceDescriptors:eb,freezeMethods:Uw,toObjectSet:Iw,toCamelCase:Bw,noop:zw,toFiniteNumber:Hw,findKey:Jy,global:os,isContextDefined:tb,isSpecCompliantForm:jw,toJSONObject:Gw,isAsyncFn:qw,isThenable:Vw,setImmediate:nb,asap:Xw,isIterable:Yw};function wt(c,t,e,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=c,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}q.inherits(wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const ib=wt.prototype,sb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(c=>{sb[c]={value:c}});Object.defineProperties(wt,sb);Object.defineProperty(ib,"isAxiosError",{value:!0});wt.from=(c,t,e,s,a,o)=>{const l=Object.create(ib);q.toFlatObject(c,l,function(g){return g!==Error.prototype},p=>p!=="isAxiosError");const h=c&&c.message?c.message:"Error",d=t==null&&c?c.code:t;return wt.call(l,h,d,e,s,a),c&&l.cause==null&&Object.defineProperty(l,"cause",{value:c,configurable:!0}),l.name=c&&c.name||"Error",o&&Object.assign(l,o),l};const $w=null;function Ih(c){return q.isPlainObject(c)||q.isArray(c)}function ab(c){return q.endsWith(c,"[]")?c.slice(0,-2):c}function Um(c,t,e){return c?c.concat(t).map(function(a,o){return a=ab(a),!e&&o?"["+a+"]":a}).join(e?".":""):t}function Kw(c){return q.isArray(c)&&!c.some(Ih)}const Ww=q.toFlatObject(q,{},null,function(t){return/^is[A-Z]/.test(t)});function jl(c,t,e){if(!q.isObject(c))throw new TypeError("target must be an object");t=t||new FormData,e=q.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,E){return!q.isUndefined(E[w])});const s=e.metaTokens,a=e.visitor||g,o=e.dots,l=e.indexes,d=(e.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(t);if(!q.isFunction(a))throw new TypeError("visitor must be a function");function p(v){if(v===null)return"";if(q.isDate(v))return v.toISOString();if(q.isBoolean(v))return v.toString();if(!d&&q.isBlob(v))throw new wt("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(v)||q.isTypedArray(v)?d&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function g(v,w,E){let x=v;if(v&&!E&&typeof v=="object"){if(q.endsWith(w,"{}"))w=s?w:w.slice(0,-2),v=JSON.stringify(v);else if(q.isArray(v)&&Kw(v)||(q.isFileList(v)||q.endsWith(w,"[]"))&&(x=q.toArray(v)))return w=ab(w),x.forEach(function(T,D){!(q.isUndefined(T)||T===null)&&t.append(l===!0?Um([w],D,o):l===null?w:w+"[]",p(T))}),!1}return Ih(v)?!0:(t.append(Um(E,w,o),p(v)),!1)}const y=[],b=Object.assign(Ww,{defaultVisitor:g,convertValue:p,isVisitable:Ih});function A(v,w){if(!q.isUndefined(v)){if(y.indexOf(v)!==-1)throw Error("Circular reference detected in "+w.join("."));y.push(v),q.forEach(v,function(x,R){(!(q.isUndefined(x)||x===null)&&a.call(t,x,q.isString(R)?R.trim():R,w,b))===!0&&A(x,w?w.concat(R):[R])}),y.pop()}}if(!q.isObject(c))throw new TypeError("data must be an object");return A(c),t}function Im(c){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(c).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function rd(c,t){this._pairs=[],c&&jl(c,this,t)}const rb=rd.prototype;rb.append=function(t,e){this._pairs.push([t,e])};rb.toString=function(t){const e=t?function(s){return t.call(this,s,Im)}:Im;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function Qw(c){return encodeURIComponent(c).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ob(c,t,e){if(!t)return c;const s=e&&e.encode||Qw;q.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let o;if(a?o=a(t,e):o=q.isURLSearchParams(t)?t.toString():new rd(t,e).toString(s),o){const l=c.indexOf("#");l!==-1&&(c=c.slice(0,l)),c+=(c.indexOf("?")===-1?"?":"&")+o}return c}class zm{constructor(){this.handlers=[]}use(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){q.forEach(this.handlers,function(s){s!==null&&t(s)})}}const lb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zw=typeof URLSearchParams<"u"?URLSearchParams:rd,Jw=typeof FormData<"u"?FormData:null,t1=typeof Blob<"u"?Blob:null,e1={isBrowser:!0,classes:{URLSearchParams:Zw,FormData:Jw,Blob:t1},protocols:["http","https","file","blob","url","data"]},od=typeof window<"u"&&typeof document<"u",zh=typeof navigator=="object"&&navigator||void 0,n1=od&&(!zh||["ReactNative","NativeScript","NS"].indexOf(zh.product)<0),i1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",s1=od&&window.location.href||"http://localhost",a1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:od,hasStandardBrowserEnv:n1,hasStandardBrowserWebWorkerEnv:i1,navigator:zh,origin:s1},Symbol.toStringTag,{value:"Module"})),Pe={...a1,...e1};function r1(c,t){return jl(c,new Pe.classes.URLSearchParams,{visitor:function(e,s,a,o){return Pe.isNode&&q.isBuffer(e)?(this.append(s,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function o1(c){return q.matchAll(/\w+|\[(\w*)]/g,c).map(t=>t[0]==="[]"?"":t[1]||t[0])}function l1(c){const t={},e=Object.keys(c);let s;const a=e.length;let o;for(s=0;s<a;s++)o=e[s],t[o]=c[o];return t}function cb(c){function t(e,s,a,o){let l=e[o++];if(l==="__proto__")return!0;const h=Number.isFinite(+l),d=o>=e.length;return l=!l&&q.isArray(a)?a.length:l,d?(q.hasOwnProp(a,l)?a[l]=[a[l],s]:a[l]=s,!h):((!a[l]||!q.isObject(a[l]))&&(a[l]=[]),t(e,s,a[l],o)&&q.isArray(a[l])&&(a[l]=l1(a[l])),!h)}if(q.isFormData(c)&&q.isFunction(c.entries)){const e={};return q.forEachEntry(c,(s,a)=>{t(o1(s),a,e,0)}),e}return null}function c1(c,t,e){if(q.isString(c))try{return(t||JSON.parse)(c),q.trim(c)}catch(s){if(s.name!=="SyntaxError")throw s}return(e||JSON.stringify)(c)}const qr={transitional:lb,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const s=e.getContentType()||"",a=s.indexOf("application/json")>-1,o=q.isObject(t);if(o&&q.isHTMLForm(t)&&(t=new FormData(t)),q.isFormData(t))return a?JSON.stringify(cb(t)):t;if(q.isArrayBuffer(t)||q.isBuffer(t)||q.isStream(t)||q.isFile(t)||q.isBlob(t)||q.isReadableStream(t))return t;if(q.isArrayBufferView(t))return t.buffer;if(q.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return r1(t,this.formSerializer).toString();if((h=q.isFileList(t))||s.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return jl(h?{"files[]":t}:t,d&&new d,this.formSerializer)}}return o||a?(e.setContentType("application/json",!1),c1(t)):t}],transformResponse:[function(t){const e=this.transitional||qr.transitional,s=e&&e.forcedJSONParsing,a=this.responseType==="json";if(q.isResponse(t)||q.isReadableStream(t))return t;if(t&&q.isString(t)&&(s&&!this.responseType||a)){const l=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(h){if(l)throw h.name==="SyntaxError"?wt.from(h,wt.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pe.classes.FormData,Blob:Pe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],c=>{qr.headers[c]={}});const u1=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),h1=c=>{const t={};let e,s,a;return c&&c.split(`
`).forEach(function(l){a=l.indexOf(":"),e=l.substring(0,a).trim().toLowerCase(),s=l.substring(a+1).trim(),!(!e||t[e]&&u1[e])&&(e==="set-cookie"?t[e]?t[e].push(s):t[e]=[s]:t[e]=t[e]?t[e]+", "+s:s)}),t},Hm=Symbol("internals");function wr(c){return c&&String(c).trim().toLowerCase()}function Cl(c){return c===!1||c==null?c:q.isArray(c)?c.map(Cl):String(c)}function d1(c){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=e.exec(c);)t[s[1]]=s[2];return t}const f1=c=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(c.trim());function Eh(c,t,e,s,a){if(q.isFunction(s))return s.call(this,t,e);if(a&&(t=e),!!q.isString(t)){if(q.isString(s))return t.indexOf(s)!==-1;if(q.isRegExp(s))return s.test(t)}}function p1(c){return c.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,s)=>e.toUpperCase()+s)}function g1(c,t){const e=q.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(c,s+e,{value:function(a,o,l){return this[s].call(this,t,a,o,l)},configurable:!0})})}let Qe=class{constructor(t){t&&this.set(t)}set(t,e,s){const a=this;function o(h,d,p){const g=wr(d);if(!g)throw new Error("header name must be a non-empty string");const y=q.findKey(a,g);(!y||a[y]===void 0||p===!0||p===void 0&&a[y]!==!1)&&(a[y||d]=Cl(h))}const l=(h,d)=>q.forEach(h,(p,g)=>o(p,g,d));if(q.isPlainObject(t)||t instanceof this.constructor)l(t,e);else if(q.isString(t)&&(t=t.trim())&&!f1(t))l(h1(t),e);else if(q.isObject(t)&&q.isIterable(t)){let h={},d,p;for(const g of t){if(!q.isArray(g))throw TypeError("Object iterator must return a key-value pair");h[p=g[0]]=(d=h[p])?q.isArray(d)?[...d,g[1]]:[d,g[1]]:g[1]}l(h,e)}else t!=null&&o(e,t,s);return this}get(t,e){if(t=wr(t),t){const s=q.findKey(this,t);if(s){const a=this[s];if(!e)return a;if(e===!0)return d1(a);if(q.isFunction(e))return e.call(this,a,s);if(q.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=wr(t),t){const s=q.findKey(this,t);return!!(s&&this[s]!==void 0&&(!e||Eh(this,this[s],s,e)))}return!1}delete(t,e){const s=this;let a=!1;function o(l){if(l=wr(l),l){const h=q.findKey(s,l);h&&(!e||Eh(s,s[h],h,e))&&(delete s[h],a=!0)}}return q.isArray(t)?t.forEach(o):o(t),a}clear(t){const e=Object.keys(this);let s=e.length,a=!1;for(;s--;){const o=e[s];(!t||Eh(this,this[o],o,t,!0))&&(delete this[o],a=!0)}return a}normalize(t){const e=this,s={};return q.forEach(this,(a,o)=>{const l=q.findKey(s,o);if(l){e[l]=Cl(a),delete e[o];return}const h=t?p1(o):String(o).trim();h!==o&&delete e[o],e[h]=Cl(a),s[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return q.forEach(this,(s,a)=>{s!=null&&s!==!1&&(e[a]=t&&q.isArray(s)?s.join(", "):s)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const s=new this(t);return e.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[Hm]=this[Hm]={accessors:{}}).accessors,a=this.prototype;function o(l){const h=wr(l);s[h]||(g1(a,l),s[h]=!0)}return q.isArray(t)?t.forEach(o):o(t),this}};Qe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(Qe.prototype,({value:c},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>c,set(s){this[e]=s}}});q.freezeMethods(Qe);function _h(c,t){const e=this||qr,s=t||e,a=Qe.from(s.headers);let o=s.data;return q.forEach(c,function(h){o=h.call(e,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function ub(c){return!!(c&&c.__CANCEL__)}function Aa(c,t,e){wt.call(this,c??"canceled",wt.ERR_CANCELED,t,e),this.name="CanceledError"}q.inherits(Aa,wt,{__CANCEL__:!0});function hb(c,t,e){const s=e.config.validateStatus;!e.status||!s||s(e.status)?c(e):t(new wt("Request failed with status code "+e.status,[wt.ERR_BAD_REQUEST,wt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function m1(c){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(c);return t&&t[1]||""}function y1(c,t){c=c||10;const e=new Array(c),s=new Array(c);let a=0,o=0,l;return t=t!==void 0?t:1e3,function(d){const p=Date.now(),g=s[o];l||(l=p),e[a]=d,s[a]=p;let y=o,b=0;for(;y!==a;)b+=e[y++],y=y%c;if(a=(a+1)%c,a===o&&(o=(o+1)%c),p-l<t)return;const A=g&&p-g;return A?Math.round(b*1e3/A):void 0}}function b1(c,t){let e=0,s=1e3/t,a,o;const l=(p,g=Date.now())=>{e=g,a=null,o&&(clearTimeout(o),o=null),c(...p)};return[(...p)=>{const g=Date.now(),y=g-e;y>=s?l(p,g):(a=p,o||(o=setTimeout(()=>{o=null,l(a)},s-y)))},()=>a&&l(a)]}const Ol=(c,t,e=3)=>{let s=0;const a=y1(50,250);return b1(o=>{const l=o.loaded,h=o.lengthComputable?o.total:void 0,d=l-s,p=a(d),g=l<=h;s=l;const y={loaded:l,total:h,progress:h?l/h:void 0,bytes:d,rate:p||void 0,estimated:p&&h&&g?(h-l)/p:void 0,event:o,lengthComputable:h!=null,[t?"download":"upload"]:!0};c(y)},e)},jm=(c,t)=>{const e=c!=null;return[s=>t[0]({lengthComputable:e,total:c,loaded:s}),t[1]]},Gm=c=>(...t)=>q.asap(()=>c(...t)),v1=Pe.hasStandardBrowserEnv?((c,t)=>e=>(e=new URL(e,Pe.origin),c.protocol===e.protocol&&c.host===e.host&&(t||c.port===e.port)))(new URL(Pe.origin),Pe.navigator&&/(msie|trident)/i.test(Pe.navigator.userAgent)):()=>!0,A1=Pe.hasStandardBrowserEnv?{write(c,t,e,s,a,o){const l=[c+"="+encodeURIComponent(t)];q.isNumber(e)&&l.push("expires="+new Date(e).toGMTString()),q.isString(s)&&l.push("path="+s),q.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(c){const t=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(c){this.write(c,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function S1(c){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(c)}function w1(c,t){return t?c.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):c}function db(c,t,e){let s=!S1(t);return c&&(s||e==!1)?w1(c,t):t}const qm=c=>c instanceof Qe?{...c}:c;function fs(c,t){t=t||{};const e={};function s(p,g,y,b){return q.isPlainObject(p)&&q.isPlainObject(g)?q.merge.call({caseless:b},p,g):q.isPlainObject(g)?q.merge({},g):q.isArray(g)?g.slice():g}function a(p,g,y,b){if(q.isUndefined(g)){if(!q.isUndefined(p))return s(void 0,p,y,b)}else return s(p,g,y,b)}function o(p,g){if(!q.isUndefined(g))return s(void 0,g)}function l(p,g){if(q.isUndefined(g)){if(!q.isUndefined(p))return s(void 0,p)}else return s(void 0,g)}function h(p,g,y){if(y in t)return s(p,g);if(y in c)return s(void 0,p)}const d={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:h,headers:(p,g,y)=>a(qm(p),qm(g),y,!0)};return q.forEach(Object.keys({...c,...t}),function(g){const y=d[g]||a,b=y(c[g],t[g],g);q.isUndefined(b)&&y!==h||(e[g]=b)}),e}const fb=c=>{const t=fs({},c);let{data:e,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:l,auth:h}=t;if(t.headers=l=Qe.from(l),t.url=ob(db(t.baseURL,t.url,t.allowAbsoluteUrls),c.params,c.paramsSerializer),h&&l.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),q.isFormData(e)){if(Pe.hasStandardBrowserEnv||Pe.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(q.isFunction(e.getHeaders)){const d=e.getHeaders(),p=["content-type","content-length"];Object.entries(d).forEach(([g,y])=>{p.includes(g.toLowerCase())&&l.set(g,y)})}}if(Pe.hasStandardBrowserEnv&&(s&&q.isFunction(s)&&(s=s(t)),s||s!==!1&&v1(t.url))){const d=a&&o&&A1.read(o);d&&l.set(a,d)}return t},E1=typeof XMLHttpRequest<"u",_1=E1&&function(c){return new Promise(function(e,s){const a=fb(c);let o=a.data;const l=Qe.from(a.headers).normalize();let{responseType:h,onUploadProgress:d,onDownloadProgress:p}=a,g,y,b,A,v;function w(){A&&A(),v&&v(),a.cancelToken&&a.cancelToken.unsubscribe(g),a.signal&&a.signal.removeEventListener("abort",g)}let E=new XMLHttpRequest;E.open(a.method.toUpperCase(),a.url,!0),E.timeout=a.timeout;function x(){if(!E)return;const T=Qe.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),C={data:!h||h==="text"||h==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:T,config:c,request:E};hb(function(F){e(F),w()},function(F){s(F),w()},C),E=null}"onloadend"in E?E.onloadend=x:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(x)},E.onabort=function(){E&&(s(new wt("Request aborted",wt.ECONNABORTED,c,E)),E=null)},E.onerror=function(D){const C=D&&D.message?D.message:"Network Error",U=new wt(C,wt.ERR_NETWORK,c,E);U.event=D||null,s(U),E=null},E.ontimeout=function(){let D=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const C=a.transitional||lb;a.timeoutErrorMessage&&(D=a.timeoutErrorMessage),s(new wt(D,C.clarifyTimeoutError?wt.ETIMEDOUT:wt.ECONNABORTED,c,E)),E=null},o===void 0&&l.setContentType(null),"setRequestHeader"in E&&q.forEach(l.toJSON(),function(D,C){E.setRequestHeader(C,D)}),q.isUndefined(a.withCredentials)||(E.withCredentials=!!a.withCredentials),h&&h!=="json"&&(E.responseType=a.responseType),p&&([b,v]=Ol(p,!0),E.addEventListener("progress",b)),d&&E.upload&&([y,A]=Ol(d),E.upload.addEventListener("progress",y),E.upload.addEventListener("loadend",A)),(a.cancelToken||a.signal)&&(g=T=>{E&&(s(!T||T.type?new Aa(null,c,E):T),E.abort(),E=null)},a.cancelToken&&a.cancelToken.subscribe(g),a.signal&&(a.signal.aborted?g():a.signal.addEventListener("abort",g)));const R=m1(a.url);if(R&&Pe.protocols.indexOf(R)===-1){s(new wt("Unsupported protocol "+R+":",wt.ERR_BAD_REQUEST,c));return}E.send(o||null)})},x1=(c,t)=>{const{length:e}=c=c?c.filter(Boolean):[];if(t||e){let s=new AbortController,a;const o=function(p){if(!a){a=!0,h();const g=p instanceof Error?p:this.reason;s.abort(g instanceof wt?g:new Aa(g instanceof Error?g.message:g))}};let l=t&&setTimeout(()=>{l=null,o(new wt(`timeout ${t} of ms exceeded`,wt.ETIMEDOUT))},t);const h=()=>{c&&(l&&clearTimeout(l),l=null,c.forEach(p=>{p.unsubscribe?p.unsubscribe(o):p.removeEventListener("abort",o)}),c=null)};c.forEach(p=>p.addEventListener("abort",o));const{signal:d}=s;return d.unsubscribe=()=>q.asap(h),d}},T1=function*(c,t){let e=c.byteLength;if(e<t){yield c;return}let s=0,a;for(;s<e;)a=s+t,yield c.slice(s,a),s=a},R1=async function*(c,t){for await(const e of C1(c))yield*T1(e,t)},C1=async function*(c){if(c[Symbol.asyncIterator]){yield*c;return}const t=c.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},Vm=(c,t,e,s)=>{const a=R1(c,t);let o=0,l,h=d=>{l||(l=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:p,value:g}=await a.next();if(p){h(),d.close();return}let y=g.byteLength;if(e){let b=o+=y;e(b)}d.enqueue(new Uint8Array(g))}catch(p){throw h(p),p}},cancel(d){return h(d),a.return()}},{highWaterMark:2})},Xm=64*1024,{isFunction:yl}=q,pb=(({fetch:c,Request:t,Response:e})=>({fetch:c,Request:t,Response:e}))(q.global),{ReadableStream:Ym,TextEncoder:$m}=q.global,Km=(c,...t)=>{try{return!!c(...t)}catch{return!1}},M1=c=>{const{fetch:t,Request:e,Response:s}=Object.assign({},pb,c),a=yl(t),o=yl(e),l=yl(s);if(!a)return!1;const h=a&&yl(Ym),d=a&&(typeof $m=="function"?(v=>w=>v.encode(w))(new $m):async v=>new Uint8Array(await new e(v).arrayBuffer())),p=o&&h&&Km(()=>{let v=!1;const w=new e(Pe.origin,{body:new Ym,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!w}),g=l&&h&&Km(()=>q.isReadableStream(new s("").body)),y={stream:g&&(v=>v.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!y[v]&&(y[v]=(w,E)=>{let x=w&&w[v];if(x)return x.call(w);throw new wt(`Response type '${v}' is not supported`,wt.ERR_NOT_SUPPORT,E)})});const b=async v=>{if(v==null)return 0;if(q.isBlob(v))return v.size;if(q.isSpecCompliantForm(v))return(await new e(Pe.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(q.isArrayBufferView(v)||q.isArrayBuffer(v))return v.byteLength;if(q.isURLSearchParams(v)&&(v=v+""),q.isString(v))return(await d(v)).byteLength},A=async(v,w)=>{const E=q.toFiniteNumber(v.getContentLength());return E??b(w)};return async v=>{let{url:w,method:E,data:x,signal:R,cancelToken:T,timeout:D,onDownloadProgress:C,onUploadProgress:U,responseType:F,headers:V,withCredentials:$="same-origin",fetchOptions:J}=fb(v);F=F?(F+"").toLowerCase():"text";let tt=x1([R,T&&T.toAbortSignal()],D),st=null;const ct=tt&&tt.unsubscribe&&(()=>{tt.unsubscribe()});let at;try{if(U&&p&&E!=="get"&&E!=="head"&&(at=await A(V,x))!==0){let L=new e(w,{method:"POST",body:x,duplex:"half"}),X;if(q.isFormData(x)&&(X=L.headers.get("content-type"))&&V.setContentType(X),L.body){const[Z,Q]=jm(at,Ol(Gm(U)));x=Vm(L.body,Xm,Z,Q)}}q.isString($)||($=$?"include":"omit");const ut=o&&"credentials"in e.prototype,N={...J,signal:tt,method:E.toUpperCase(),headers:V.normalize().toJSON(),body:x,duplex:"half",credentials:ut?$:void 0};st=o&&new e(w,N);let H=await(o?t(st,J):t(w,N));const et=g&&(F==="stream"||F==="response");if(g&&(C||et&&ct)){const L={};["status","statusText","headers"].forEach(nt=>{L[nt]=H[nt]});const X=q.toFiniteNumber(H.headers.get("content-length")),[Z,Q]=C&&jm(X,Ol(Gm(C),!0))||[];H=new s(Vm(H.body,Xm,Z,()=>{Q&&Q(),ct&&ct()}),L)}F=F||"text";let yt=await y[q.findKey(y,F)||"text"](H,v);return!et&&ct&&ct(),await new Promise((L,X)=>{hb(L,X,{data:yt,headers:Qe.from(H.headers),status:H.status,statusText:H.statusText,config:v,request:st})})}catch(ut){throw ct&&ct(),ut&&ut.name==="TypeError"&&/Load failed|fetch/i.test(ut.message)?Object.assign(new wt("Network Error",wt.ERR_NETWORK,v,st),{cause:ut.cause||ut}):wt.from(ut,ut&&ut.code,v,st)}}},D1=new Map,gb=c=>{let t=q.merge.call({skipUndefined:!0},pb,c?c.env:null);const{fetch:e,Request:s,Response:a}=t,o=[s,a,e];let l=o.length,h=l,d,p,g=D1;for(;h--;)d=o[h],p=g.get(d),p===void 0&&g.set(d,p=h?new Map:M1(t)),g=p;return p};gb();const Hh={http:$w,xhr:_1,fetch:{get:gb}};q.forEach(Hh,(c,t)=>{if(c){try{Object.defineProperty(c,"name",{value:t})}catch{}Object.defineProperty(c,"adapterName",{value:t})}});const Wm=c=>`- ${c}`,L1=c=>q.isFunction(c)||c===null||c===!1,mb={getAdapter:(c,t)=>{c=q.isArray(c)?c:[c];const{length:e}=c;let s,a;const o={};for(let l=0;l<e;l++){s=c[l];let h;if(a=s,!L1(s)&&(a=Hh[(h=String(s)).toLowerCase()],a===void 0))throw new wt(`Unknown adapter '${h}'`);if(a&&(q.isFunction(a)||(a=a.get(t))))break;o[h||"#"+l]=a}if(!a){const l=Object.entries(o).map(([d,p])=>`adapter ${d} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=e?l.length>1?`since :
`+l.map(Wm).join(`
`):" "+Wm(l[0]):"as no adapter specified";throw new wt("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return a},adapters:Hh};function xh(c){if(c.cancelToken&&c.cancelToken.throwIfRequested(),c.signal&&c.signal.aborted)throw new Aa(null,c)}function Qm(c){return xh(c),c.headers=Qe.from(c.headers),c.data=_h.call(c,c.transformRequest),["post","put","patch"].indexOf(c.method)!==-1&&c.headers.setContentType("application/x-www-form-urlencoded",!1),mb.getAdapter(c.adapter||qr.adapter,c)(c).then(function(s){return xh(c),s.data=_h.call(c,c.transformResponse,s),s.headers=Qe.from(s.headers),s},function(s){return ub(s)||(xh(c),s&&s.response&&(s.response.data=_h.call(c,c.transformResponse,s.response),s.response.headers=Qe.from(s.response.headers))),Promise.reject(s)})}const yb="1.12.1",Gl={};["object","boolean","number","function","string","symbol"].forEach((c,t)=>{Gl[c]=function(s){return typeof s===c||"a"+(t<1?"n ":" ")+c}});const Zm={};Gl.transitional=function(t,e,s){function a(o,l){return"[Axios v"+yb+"] Transitional option '"+o+"'"+l+(s?". "+s:"")}return(o,l,h)=>{if(t===!1)throw new wt(a(l," has been removed"+(e?" in "+e:"")),wt.ERR_DEPRECATED);return e&&!Zm[l]&&(Zm[l]=!0,console.warn(a(l," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,l,h):!0}};Gl.spelling=function(t){return(e,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function N1(c,t,e){if(typeof c!="object")throw new wt("options must be an object",wt.ERR_BAD_OPTION_VALUE);const s=Object.keys(c);let a=s.length;for(;a-- >0;){const o=s[a],l=t[o];if(l){const h=c[o],d=h===void 0||l(h,o,c);if(d!==!0)throw new wt("option "+o+" must be "+d,wt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new wt("Unknown option "+o,wt.ERR_BAD_OPTION)}}const Ml={assertOptions:N1,validators:Gl},Pn=Ml.validators;let ds=class{constructor(t){this.defaults=t||{},this.interceptors={request:new zm,response:new zm}}async request(t,e){try{return await this._request(t,e)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=fs(this.defaults,e);const{transitional:s,paramsSerializer:a,headers:o}=e;s!==void 0&&Ml.assertOptions(s,{silentJSONParsing:Pn.transitional(Pn.boolean),forcedJSONParsing:Pn.transitional(Pn.boolean),clarifyTimeoutError:Pn.transitional(Pn.boolean)},!1),a!=null&&(q.isFunction(a)?e.paramsSerializer={serialize:a}:Ml.assertOptions(a,{encode:Pn.function,serialize:Pn.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Ml.assertOptions(e,{baseUrl:Pn.spelling("baseURL"),withXsrfToken:Pn.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=o&&q.merge(o.common,o[e.method]);o&&q.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),e.headers=Qe.concat(l,o);const h=[];let d=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(d=d&&w.synchronous,h.unshift(w.fulfilled,w.rejected))});const p=[];this.interceptors.response.forEach(function(w){p.push(w.fulfilled,w.rejected)});let g,y=0,b;if(!d){const v=[Qm.bind(this),void 0];for(v.unshift(...h),v.push(...p),b=v.length,g=Promise.resolve(e);y<b;)g=g.then(v[y++],v[y++]);return g}b=h.length;let A=e;for(y=0;y<b;){const v=h[y++],w=h[y++];try{A=v(A)}catch(E){w.call(this,E);break}}try{g=Qm.call(this,A)}catch(v){return Promise.reject(v)}for(y=0,b=p.length;y<b;)g=g.then(p[y++],p[y++]);return g}getUri(t){t=fs(this.defaults,t);const e=db(t.baseURL,t.url,t.allowAbsoluteUrls);return ob(e,t.params,t.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(t){ds.prototype[t]=function(e,s){return this.request(fs(s||{},{method:t,url:e,data:(s||{}).data}))}});q.forEach(["post","put","patch"],function(t){function e(s){return function(o,l,h){return this.request(fs(h||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}ds.prototype[t]=e(),ds.prototype[t+"Form"]=e(!0)});let O1=class bb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const s=this;this.promise.then(a=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](a);s._listeners=null}),this.promise.then=a=>{let o;const l=new Promise(h=>{s.subscribe(h),o=h}).then(a);return l.cancel=function(){s.unsubscribe(o)},l},t(function(o,l,h){s.reason||(s.reason=new Aa(o,l,h),e(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=s=>{t.abort(s)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new bb(function(a){t=a}),cancel:t}}};function k1(c){return function(e){return c.apply(null,e)}}function P1(c){return q.isObject(c)&&c.isAxiosError===!0}const jh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jh).forEach(([c,t])=>{jh[t]=c});function vb(c){const t=new ds(c),e=Ky(ds.prototype.request,t);return q.extend(e,ds.prototype,t,{allOwnKeys:!0}),q.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return vb(fs(c,a))},e}const ne=vb(qr);ne.Axios=ds;ne.CanceledError=Aa;ne.CancelToken=O1;ne.isCancel=ub;ne.VERSION=yb;ne.toFormData=jl;ne.AxiosError=wt;ne.Cancel=ne.CanceledError;ne.all=function(t){return Promise.all(t)};ne.spread=k1;ne.isAxiosError=P1;ne.mergeConfig=fs;ne.AxiosHeaders=Qe;ne.formToJSON=c=>cb(q.isHTMLForm(c)?new FormData(c):c);ne.getAdapter=mb.getAdapter;ne.HttpStatusCode=jh;ne.default=ne;const{Axios:mx,AxiosError:yx,CanceledError:bx,isCancel:vx,CancelToken:Ax,VERSION:Sx,all:wx,Cancel:Ex,isAxiosError:_x,spread:xx,toFormData:Tx,AxiosHeaders:Rx,HttpStatusCode:Cx,formToJSON:Mx,getAdapter:Dx,mergeConfig:Lx}=ne,B1=({onPdfUpload:c,uploadProgress:t})=>{const[e,s]=k.useState(null),[a,o]=k.useState(!1),[l,h]=k.useState(null),[d,p]=k.useState(0),g=k.useRef(null),y=D=>{D.preventDefault(),o(!0)},b=D=>{D.preventDefault(),o(!1)},A=D=>{D.preventDefault(),o(!1);const C=D.dataTransfer.files;w(C[0])},v=D=>{const C=D.target.files[0];w(C)},w=D=>{if(h(null),!!D){if(D.type!=="application/pdf"){h("Please select a PDF file");return}if(D.size>10*1024*1024){h("File size should be less than 10MB");return}s(D),E(D)}},E=async D=>{try{c(D);const C=new FormData;C.append("file",D);const U=await ne.post("http://localhost:5000/api/upload",C,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:F=>{const V=Math.round(F.loaded*100/F.total);p(V)}});console.log("File upload response:",U),console.log("Upload success:",U.data)}catch(C){console.error("Upload error:",C),h("File upload failed"),p(0)}},x=()=>{g.current?.click()},R=()=>P.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-white",children:P.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),T=t||d;return T>0&&T<100?P.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-5",children:P.jsxs("div",{className:"w-full max-w-lg",children:[P.jsxs("div",{className:"flex items-center justify-between mb-3",children:[P.jsxs("div",{className:"flex items-center gap-2 text-purple-500 text-base font-medium",children:[P.jsx("div",{className:"w-4 h-4 border-2 border-gray-200 border-t-purple-500 rounded-full animate-spin"}),"Uploading PDF"]}),P.jsxs("div",{className:"text-purple-500 text-base font-semibold",children:[T,"%"]})]}),P.jsx("div",{className:"w-full h-2 bg-gray-200 rounded overflow-hidden",children:P.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 rounded transition-all duration-300 ease-out relative",style:{width:`${T}%`},children:P.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-pulse"})})})]})}):T===100?P.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-5",children:P.jsxs("div",{className:"w-full max-w-lg",children:[P.jsxs("div",{className:"flex items-center justify-between mb-3",children:[P.jsx("div",{className:"flex items-center gap-2 text-green-500 text-base font-medium",children:"✓ Upload Complete"}),P.jsx("div",{className:"text-green-500 text-base font-semibold",children:"100%"})]}),P.jsx("div",{className:"w-full h-2 bg-gray-200 rounded overflow-hidden",children:P.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600 rounded",style:{width:"100%"}})}),e&&P.jsxs("p",{className:"text-gray-600 text-sm mt-4 text-center",children:["File: ",e.name]})]})}):P.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-5",children:[P.jsxs("div",{className:`
          bg-white border-2 border-dashed rounded-xl p-15 text-center w-full max-w-md
          transition-all duration-300 cursor-pointer
          ${a?"border-purple-500 bg-gray-50 transform scale-105":l?"border-red-400 bg-red-50":"border-gray-300 hover:border-purple-500 hover:bg-gray-50"}
        `,onDragOver:y,onDragLeave:b,onDrop:A,onClick:x,style:{padding:"60px 40px"},children:[P.jsx("div",{className:`
          w-12 h-12 mx-auto mb-6 rounded-lg flex items-center justify-center
          ${l?"bg-red-500":"bg-purple-500"}
        `,children:P.jsx(R,{})}),P.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload PDF to start chatting"}),P.jsx("p",{className:"text-sm text-gray-500 mb-0",children:"Click or drag and drop your file here"}),l&&P.jsx("p",{className:"text-red-600 text-sm mt-2",children:l}),e&&!l&&P.jsxs("p",{className:"text-green-600 text-sm mt-4",children:["✓ Selected: ",e.name]})]}),P.jsx("input",{ref:g,type:"file",accept:"application/pdf",onChange:v,className:"absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0",style:{clip:"rect(0, 0, 0, 0)"}})]})},Ie=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Gh=[.001,0,0,.001,0,0],Th=1.35,on={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Hn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ab="pdfjs_internal_editor_",vt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Sb={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Oe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Dr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},re={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ra={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Vr={ERRORS:0,WARNINGS:1,INFOS:5},Or={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},bl={moveTo:0,lineTo:1,curveTo:2,closePath:3},wb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ql=Vr.WARNINGS;function F1(c){Number.isInteger(c)&&(ql=c)}function U1(){return ql}function Vl(c){ql>=Vr.INFOS&&console.log(`Info: ${c}`)}function At(c){ql>=Vr.WARNINGS&&console.log(`Warning: ${c}`)}function Ht(c){throw new Error(c)}function ge(c,t){c||Ht(t)}function I1(c){switch(c?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ld(c,t=null,e=null){if(!c)return null;if(e&&typeof c=="string"&&(e.addDefaultProtocol&&c.startsWith("www.")&&c.match(/\./g)?.length>=2&&(c=`http://${c}`),e.tryConvertEncoding))try{c=q1(c)}catch{}const s=t?URL.parse(c,t):URL.parse(c);return I1(s)?s:null}function cd(c,t,e=!1){const s=URL.parse(c);return s?(s.hash=t,s.href):e&&ld(c,"http://example.com")?c.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ct(c,t,e,s=!1){return Object.defineProperty(c,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const bs=(function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class Jm extends bs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Rh extends bs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class kl extends bs{constructor(t){super(t,"InvalidPDFException")}}class kr extends bs{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class z1 extends bs{constructor(t){super(t,"FormatError")}}class ui extends bs{constructor(t){super(t,"AbortException")}}function Eb(c){(typeof c!="object"||c?.length===void 0)&&Ht("Invalid argument for bytesToString");const t=c.length,e=8192;if(t<e)return String.fromCharCode.apply(null,c);const s=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),l=c.subarray(a,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function Xr(c){typeof c!="string"&&Ht("Invalid argument for stringToBytes");const t=c.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=c.charCodeAt(s)&255;return e}function H1(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}function j1(){const c=new Uint8Array(4);return c[0]=1,new Uint32Array(c.buffer,0,1)[0]===1}function G1(){try{return new Function(""),!0}catch{return!1}}class _e{static get isLittleEndian(){return Ct(this,"isLittleEndian",j1())}static get isEvalSupported(){return Ct(this,"isEvalSupported",G1())}static get isOffscreenCanvasSupported(){return Ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ct(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ct(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Ct(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Ch=Array.from(Array(256).keys(),c=>c.toString(16).padStart(2,"0"));class ht{static makeHexColor(t,e,s){return`#${Ch[t]}${Ch[e]}${Ch[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,s=0){const a=t[s],o=t[s+1];t[s]=a*e[0]+o*e[2]+e[4],t[s+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const a=e[0],o=e[1],l=e[2],h=e[3],d=e[4],p=e[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*a+b*l+d,t[s+g+1]=y*o+b*h+p}}static applyInverseTransform(t,e){const s=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-s*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,s){const a=e[0],o=e[1],l=e[2],h=e[3],d=e[4],p=e[5],g=t[0],y=t[1],b=t[2],A=t[3];let v=a*g+d,w=v,E=a*b+d,x=E,R=h*y+p,T=R,D=h*A+p,C=D;if(o!==0||l!==0){const U=o*g,F=o*b,V=l*y,$=l*A;v+=V,x+=V,E+=$,w+=$,R+=U,C+=U,D+=F,T+=F}s[0]=Math.min(s[0],v,E,w,x),s[1]=Math.min(s[1],R,D,T,C),s[2]=Math.max(s[2],v,E,w,x),s[3]=Math.max(s[3],R,D,T,C)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],a=t[1],o=t[2],l=t[3],h=s**2+a**2,d=s*o+a*l,p=o**2+l**2,g=(h+p)/2,y=Math.sqrt(g**2-(h*p-d**2));e[0]=Math.sqrt(g+y||1),e[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[s,o,a,l]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],e,a)}static#t(t,e,s,a,o,l,h,d,p,g){if(p<=0||p>=1)return;const y=1-p,b=p*p,A=b*p,v=y*(y*(y*t+3*p*e)+3*b*s)+A*a,w=y*(y*(y*o+3*p*l)+3*b*h)+A*d;g[0]=Math.min(g[0],v),g[1]=Math.min(g[1],w),g[2]=Math.max(g[2],v),g[3]=Math.max(g[3],w)}static#e(t,e,s,a,o,l,h,d,p,g,y,b){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,e,s,a,o,l,h,d,-y/g,b);return}const A=g**2-4*y*p;if(A<0)return;const v=Math.sqrt(A),w=2*p;this.#t(t,e,s,a,o,l,h,d,(-g+v)/w,b),this.#t(t,e,s,a,o,l,h,d,(-g-v)/w,b)}static bezierBoundingBox(t,e,s,a,o,l,h,d,p){p[0]=Math.min(p[0],t,h),p[1]=Math.min(p[1],e,d),p[2]=Math.max(p[2],t,h),p[3]=Math.max(p[3],e,d),this.#e(t,s,o,h,e,a,l,d,3*(-t+3*(s-o)+h),6*(t-2*s+o),3*(s-t),p),this.#e(t,s,o,h,e,a,l,d,3*(-e+3*(a-l)+d),6*(e-2*a+l),3*(a-e),p)}}function q1(c){return decodeURIComponent(escape(c))}let Mh=null,ty=null;function _b(c){return Mh||(Mh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ty=new Map([["ﬅ","ſt"]])),c.replaceAll(Mh,(t,e,s)=>e?e.normalize("NFKC"):ty.get(s))}function ud(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const c=new Uint8Array(32);return crypto.getRandomValues(c),Eb(c)}const hd="pdfjs_internal_id_";function V1(c,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,a,...o]=e;if(!c(s)&&!Number.isInteger(s)||!t(a))return!1;const l=o.length;let h=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;h=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function ke(c,t,e){return Math.min(Math.max(c,t),e)}function xb(c){return Uint8Array.prototype.toBase64?c.toBase64():btoa(Eb(c))}function X1(c){return Uint8Array.fromBase64?Uint8Array.fromBase64(c):Xr(atob(c))}typeof Promise.try!="function"&&(Promise.try=function(c,...t){return new Promise(e=>{e(c(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(c){return c.reduce((t,e)=>t+e,0)});const ri="http://www.w3.org/2000/svg";class ps{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Sa(c,t="text"){if(Rr(c,document.baseURI)){const e=await fetch(c);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const a=new XMLHttpRequest;a.open("GET",c,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class Yr{constructor({viewBox:t,userUnit:e,scale:s,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=l,s*=e;const d=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let g,y,b,A;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,y=0,b=0,A=1;break;case 90:g=0,y=1,b=1,A=0;break;case 270:g=0,y=-1,b=-1,A=0;break;case 0:g=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(b=-b,A=-A);let v,w,E,x;g===0?(v=Math.abs(p-t[1])*s+o,w=Math.abs(d-t[0])*s+l,E=(t[3]-t[1])*s,x=(t[2]-t[0])*s):(v=Math.abs(d-t[0])*s+o,w=Math.abs(p-t[1])*s+l,E=(t[2]-t[0])*s,x=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,A*s,v-g*s*d-b*s*p,w-y*s*d-A*s*p],this.width=E,this.height=x}get rawDims(){const t=this.viewBox;return Ct(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new Yr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const s=[t,e];return ht.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];ht.applyTransform(e,this.transform);const s=[t[2],t[3]];return ht.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return ht.applyInverseTransform(s,this.transform),s}}class Xl extends bs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function $r(c){const t=c.length;let e=0;for(;e<t&&c[e].trim()==="";)e++;return c.substring(e,e+5).toLowerCase()==="data:"}function Yl(c){return typeof c=="string"&&/\.pdf$/i.test(c)}function Tb(c){return[c]=c.split(/[#?]/,1),c.substring(c.lastIndexOf("/")+1)}function Rb(c,t="document.pdf"){if(typeof c!="string")return t;if($r(c))return At('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(c);if(!s)return t;const a=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return a(l);if(s.searchParams.size>0){const h=Array.from(s.searchParams.values()).reverse();for(const p of h)if(o.test(p))return a(p);const d=Array.from(s.searchParams.keys()).reverse();for(const p of d)if(o.test(p))return a(p)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return a(d[0])}return t}class ey{started=Object.create(null);times=[];time(t){t in this.started&&At(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||At(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(e)} ${o-a}ms
`);return t.join("")}}function Rr(c,t){const e=t?URL.parse(c,t):URL.parse(c);return e?.protocol==="http:"||e?.protocol==="https:"}function Sn(c){c.preventDefault()}function le(c){c.preventDefault(),c.stopPropagation()}function Y1(c){console.log("Deprecated API usage: "+c)}class dd{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const s=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const p=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(l+=g,h+=y):p==="+"&&(l-=g,h-=y),new Date(Date.UTC(s,a,o,l,h,d))}}function Cb(c,{scale:t=1,rotation:e=0}){const{width:s,height:a}=c.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new Yr({viewBox:o,userUnit:1,scale:t,rotation:e})}function fd(c){if(c.startsWith("#")){const t=parseInt(c.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return c.startsWith("rgb(")?c.slice(4,-1).split(",").map(t=>parseInt(t)):c.startsWith("rgba(")?c.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(At(`Not a valid color format: "${c}"`),[0,0,0])}function $1(c){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of c.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;c.set(e,fd(s))}t.remove()}function Wt(c){const{a:t,b:e,c:s,d:a,e:o,f:l}=c.getTransform();return[t,e,s,a,o,l]}function Bn(c){const{a:t,b:e,c:s,d:a,e:o,f:l}=c.getTransform().invertSelf();return[t,e,s,a,o,l]}function Ui(c,t,e=!1,s=!0){if(t instanceof Yr){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=c,h=_e.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,p=`var(--total-scale-factor) * ${o}px`,g=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=h?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}s&&c.setAttribute("data-main-rotation",t.rotation)}class Tn{constructor(){const{pixelRatio:t}=Tn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,a,o=-1){let l=1/0,h=1/0,d=1/0;s=Tn.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*e))),a!==-1&&(h=a/t,d=a/e);const p=Math.min(l,h,d);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const Pl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Lr{#t=null;#e=null;#n;#i=null;#a=null;#s=null;static#o=null;constructor(t){this.#n=t,Lr.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",Sn,{signal:e}),t.addEventListener("pointerdown",Lr.#r,{signal:e});const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const a=this.#n.toolbarPosition;if(a){const{style:o}=t,l=this.#n._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#r(t){t.stopPropagation()}#h(t){this.#n._focusEventsAllowed=!1,le(t)}#l(t){this.#n._focusEventsAllowed=!0,le(t)}#d(t){const e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#l.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Sn,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",Lr.#o[t]),this.#d(s),s.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#i.append(s)}get#u(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#d(e),this.#i.append(e,this.#u),this.#a=t}addColorPicker(t){this.#e=t;const e=t.renderButton();this.#d(e),this.#i.append(e,this.#u)}async addEditSignatureButton(t){const e=this.#s=await t.renderEditButton(this.#n);this.#d(e),this.#i.append(e,this.#u)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(t){this.#s&&(this.#s.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class K1{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Sn,{signal:this.#n._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#s(),t}#a(t,e){let s=0,a=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const h=o.x+(e?o.width:0);if(l>s){a=h,s=l;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,s]}show(t,e,s){const[a,o]=this.#a(e,s),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#n._signal;t.addEventListener("contextmenu",Sn,{signal:s}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:s}),this.#t.append(t)}}function Mb(c,t,e){for(const s of e)t.addEventListener(s,c[s].bind(c))}class W1{#t=0;get id(){return`${Ab}${this.#t++}`}}class pd{#t=ud();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Ct(this,"_isSVGFittingCanvas",o)}async#i(t,e){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(s.url=e,a=await Sa(e,"blob")):e instanceof File?a=s.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=pd._isSVGFittingCanvas,l=new FileReader,h=new Image,d=new Promise((p,g)=>{h.onload=()=>{s.bitmap=h,s.isSvg=!0,p()},l.onload=async()=>{const y=s.svgUrl=l.result;h.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=l.onerror=g});l.readAsDataURL(a),await d}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){At(a),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:e,name:s,size:a,type:o}=t;return this.#i(`${e}_${s}_${a}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const s=await e;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(s.width,s.height);a.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=a.convertToBlob()}s.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class Q1{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:h=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(l&&this.#t[this.#i].type===o){h&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const p=this.#i+1;p===this.#n?this.#t.splice(0,1):(this.#i=p,p<this.#t.length&&this.#t.splice(p)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Kr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=_e.platform;for(const[s,a,o={}]of t)for(const l of s){const h=l.startsWith("mac+");e&&h?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!h&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#t(e));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:h=null}}=s;h&&!h(t,e)||(a.bind(t,...l,e)(),o||le(e))}}class gd{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return $1(t),Ct(this,"_colors",t)}convert(t){const e=fd(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,a]of this._colors)if(a.every((o,l)=>o===e[l]))return gd._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?ht.makeHexColor(...e):t}}class hi{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#a=null;#s=null;#o=null;#r=new Q1;#h=null;#l=null;#d=0;#u=new Set;#f=null;#p=null;#g=new Set;_editorUndoBar=null;#c=!1;#m=!1;#y=!1;#b=null;#A=null;#S=null;#w=null;#x=!1;#R=null;#M=new W1;#E=!1;#C=!1;#T=null;#L=null;#N=null;#O=null;#z=null;#_=vt.NONE;#v=new Set;#F=null;#U=null;#G=null;#q=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#k=null;#P=null;#j=null;#K=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=hi.prototype,e=l=>l.#P.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new Kr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&l.#P.contains(h)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&l.#P.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,s,a,o,l,h,d,p,g,y,b,A,v,w){const E=this._signal=this.#t.signal;this.#P=t,this.#j=e,this.#K=s,this.#a=a,this.#U=o,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:E}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),l._on("setpreference",this.onSetPreference.bind(this),{signal:E}),l._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:E}),this.#st(),this.#lt(),this.#Q(),this.#s=h.annotationStorage,this.#b=h.filterFactory,this.#G=d,this.#w=p||null,this.#c=g,this.#m=y,this.#y=b,this.#z=A||null,this.viewParameters={realScale:ps.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=w!==!1}destroy(){this.#B?.resolve(),this.#B=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#g.clear(),this.#O?.clear(),this.#e=null,this.#v.clear(),this.#r.destroy(),this.#a?.destroy(),this.#U?.destroy(),this.#R?.hide(),this.#R=null,this.#N?.destroy(),this.#N=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#k&&(clearTimeout(this.#k),this.#k=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#z}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Ct(this,"hcmFilter",this.#G?this.#b.addHCMFilter(this.#G.foreground,this.#G.background):"none")}get direction(){return Ct(this,"direction",getComputedStyle(this.#P).direction)}get highlightColors(){return Ct(this,"highlightColors",this.#w?new Map(this.#w.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColorNames(){return Ct(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=t}setMainHighlightColorPicker(t){this.#N=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=e;break}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#P.focus()}findParent(t,e){for(const s of this.#i.values()){const{x:a,y:o,width:l,height:h}=s.div.getBoundingClientRect();if(t>=a&&t<=a+l&&e>=o&&e<=o+h)return s}return null}disableUserSelect(t=!1){this.#j.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ps.PDF_TO_CSS_UNITS;for(const e of this.#g)e.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Y({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#W(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of this.#i.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:a,focusNode:o,focusOffset:l}=e,h=e.toString(),p=this.#Y(e).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;e.empty();const y=this.#W(p),b=this.#_===vt.NONE,A=()=>{y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:s,anchorOffset:a,focusNode:o,focusOffset:l,text:h}),b&&this.showAllEditors("highlight",!0,!0)};if(b){this.switchToMode(vt.HIGHLIGHT,A);return}A()}#nt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Y(t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(this.#R||=new K1(this),this.#R.show(s,a,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const s=this.#K;s&&(s.setAttribute("data-l10n-id",t),e?s.setAttribute("data-l10n-args",JSON.stringify(e)):s.removeAttribute("data-l10n-args"))}#it(){const t=document.getSelection();if(!t||t.isCollapsed){this.#F&&(this.#R?.hide(),this.#F=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#F)return;const a=this.#Y(t).closest(".textLayer");if(!a){this.#F&&(this.#R?.hide(),this.#F=null,this.#D({hasSelectedText:!1}));return}if(this.#R?.hide(),this.#F=e,this.#D({hasSelectedText:!0}),!(this.#_!==vt.HIGHLIGHT&&this.#_!==vt.NONE)&&(this.#_===vt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#_===vt.HIGHLIGHT?this.#W(a):null;o?.toggleDrawing();const l=new AbortController,h=this.combinedSignal(l),d=p=>{p.type==="pointerup"&&p.button!==0||(l.abort(),o?.toggleDrawing(!0),p.type==="pointerup"&&this.#$("main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}}#$(t=""){this.#_===vt.HIGHLIGHT?this.highlightSelection(t):this.#c&&this.#nt()}#st(){document.addEventListener("selectionchange",this.#it.bind(this),{signal:this._signal})}#at(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#rt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#$("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#v)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Q(){if(this.#T)return;this.#T=new AbortController;const t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ot(){this.#T?.abort(),this.#T=null}#Z(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#J(){this.#h?.abort(),this.#h=null}#lt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Q(),this.#Z()}removeEditListeners(){this.#ot(),this.#J()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of this.#p)if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of this.#p)if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of this.#v){const a=s.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#p)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){At(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of s){const p=await a.deserialize(d);if(!p)return;o.push(p)}const l=()=>{for(const d of o)this.#tt(d);this.#et(o)},h=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:h,mustExec:!0})}catch(o){At(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==vt.NONE&&!this.isEditorHandlingKeyboard&&hi._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#$("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(t){Object.entries(t).some(([s,a])=>this.#V[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,t)}),this.#_===vt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#I([[Mt.HIGHLIGHT_FREE,!0]]))}#I(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#at(),this.#Z(),this.#D({isEditing:this.#_!==vt.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#rt(),this.#J(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#p){this.#p=t;for(const e of this.#p)this.#I(e.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#i.get(this.#d)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#i.set(t.pageIndex,t),this.#E?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,s=!1,a=!1){if(this.#_!==t&&!(this.#B&&(await this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#l?.commitOrRemove(),this.#_=t,t===vt.NONE){this.setEditingState(!1),this.#ut(),this._editorUndoBar?.hide(),this.#B.resolve();return}t===vt.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ct(),this.unselectAll();for(const o of this.#i.values())o.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(const o of this.#n.values())o.annotationElementId===e||o.id===e?(this.setSelected(o),a&&o.enterInEditMode()):o.unselect();this.#B.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#p){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor(e);return;case Mt.HIGHLIGHT_DEFAULT_COLOR:this.#N?.updateColor(e);break;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const s of this.#v)s.updateParams(t,e);for(const s of this.#p)s.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#q?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#I([[Mt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#C!==t){this.#C=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ct(){if(!this.#E){this.#E=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#ut(){if(this.unselectAll(),this.#E){this.#E=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const s of this.#n.values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#O?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#u.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#u.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#u.has(t)}removeDeletedAnnotationElement(t){this.#u.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#tt(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#I(t.propertiesToUpdate))}get#ht(){let t=null;for(t of this.#v);return t}updateUI(t){this.#ht===t&&this.#I(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#I(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#v.has(t)){this.#v.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#v.add(t),t.select(),this.#I(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#l?.commitOrRemove();for(const e of this.#v)e!==t&&e.unselect();this.#v.clear(),this.#v.add(t),t.select(),this.#I(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#v.has(t)}get firstSelectedEditor(){return this.#v.values().next().value}unselect(t){t.unselect(),this.#v.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#v.size!==0}get isEnterHandled(){return this.#v.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#r.undo(),this.#D({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#r.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#r.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#r.cleanType(t)}#X(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#v],s=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#tt(o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#et(t){for(const e of this.#v)e.unselect();this.#v.clear();for(const e of t)e.isEmpty()||(this.#v.add(e),e.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#v)t.commit();this.#et(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#_!==vt.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(const t of this.#v)t.unselect();this.#v.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[a,o]=this.#H,l=[...this.#v],h=1e3;this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.#k=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},h);for(const d of l)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#v)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let e=!1;for(const[{x:a,y:o,pageIndex:l},h]of t)h.newX=a,h.newY=o,h.newPageIndex=l,e||=a!==h.savedX||o!==h.savedY||l!==h.savedPageIndex;if(!e)return!1;const s=(a,o,l,h)=>{if(this.#n.has(a.id)){const d=this.#i.get(h);d?a._setParentAndPosition(d,o,l):(a.pageIndex=h,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:h}]of t)s(a,o,l,h)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:h}]of t)s(a,o,l,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#f)for(const s of this.#f.keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#v.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#_}get imageManager(){return Ct(this,"imageManager",new pd)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,g=e.rangeCount;p<g;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:l}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(p,g,y,b)=>({x:(g-a)/l,y:1-(p+y-s)/o,width:b/l,height:y/o});break;case"180":h=(p,g,y,b)=>({x:1-(p+y-s)/o,y:1-(g+b-a)/l,width:y/o,height:b/l});break;case"270":h=(p,g,y,b)=>({x:1-(g+b-a)/l,y:(p-s)/o,width:b/l,height:y/o});break;default:h=(p,g,y,b)=>({x:(p-s)/o,y:(g-a)/l,width:y/o,height:b/l});break}const d=[];for(let p=0,g=e.rangeCount;p<g;p++){const y=e.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:A,width:v,height:w}of y.getClientRects())v===0||w===0||d.push(h(b,A,v,w))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const s=this.#s.getRawValue(e);s&&(this.#_===vt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){const a=this.#O?.get(t);a&&(a.setCanvas(e,s),this.#O.delete(t))}addMissingCanvas(t,e){(this.#O||=new Map).set(t,e)}}class In{#t=null;#e=!1;#n=null;#i=null;#a=null;#s=null;#o=!1;#r=null;#h=null;#l=null;#d=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#h=t,this.#u=t._uiManager.useNewAltTextFlow,In.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){In._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",In.#f.missing),e.setAttribute("data-l10n-id",In.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#h._uiManager._signal;t.addEventListener("contextmenu",Sn,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),this.#h._uiManager.editAltText(this.#h),this.#u&&this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#o=!0,a(o))},{signal:s}),await this.#g(),t}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await In._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#r?.remove(),this.#r=null;return}if(!this.#r){const e=this.#r=document.createElement("div");e.className="noAltTextBadge",this.#h.div.append(e)}this.#r.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(this.#l=s,this.#d=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#r?.remove(),this.#r=null}async#g(){const t=this.#n;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",In.#f[this.#p]),this.#i?.setAttribute("data-l10n-id",In.#f[`${this.#p}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#h.id}`;const a=100,o=this.#h._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#h._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#h.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Wr{#t;#e=!1;#n=null;#i;#a;#s;#o;#r=null;#h;#l=null;#d;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:h}){this.#t=t,this.#n=s,this.#i=e,this.#a=a,this.#s=o,this.#o=l,this.#d=new AbortController,this.#h=AbortSignal.any([h,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#h})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Tn.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#r)return;const a=this.#r=new AbortController,o=AbortSignal.any([this.#h,a.signal]),l=this.#t,h={capture:!0,signal:o,passive:!1},d=p=>{p.pointerType==="touch"&&(this.#r?.abort(),this.#r=null)};l.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(le(p),d(p))},h),l.addEventListener("pointerup",d,h),l.addEventListener("pointercancel",d,h);return}if(!this.#u){this.#u=new AbortController;const a=AbortSignal.any([this.#h,this.#u.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#p.bind(this),l);const h=this.#g.bind(this);o.addEventListener("touchend",h,l),o.addEventListener("touchcancel",h,l),l.capture=!0,o.addEventListener("pointerdown",le,l),o.addEventListener("pointermove",le,l),o.addEventListener("pointercancel",le,l),o.addEventListener("pointerup",le,l),this.#a?.()}if(le(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#p(t){if(!this.#l||t.touches.length!==2)return;le(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:a,screenY:o}=e,{screenX:l,screenY:h}=s,d=this.#l,{touch0X:p,touch0Y:g,touch1X:y,touch1Y:b}=d,A=y-p,v=b-g,w=l-a,E=h-o,x=Math.hypot(w,E)||1,R=Math.hypot(A,v)||1;if(!this.#e&&Math.abs(R-x)<=Wr.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=h,!this.#e){this.#e=!0;return}const T=[(a+l)/2,(o+h)/2];this.#s?.(T,R,x)}#g(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#o?.()),this.#l&&(le(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#r?.abort(),this.#r=null}}class dt{#t=null;#e=null;#n=null;#i=!1;#a=null;#s="";#o=!1;#r=null;#h=null;#l=null;#d=null;#u="";#f=!1;#p=null;#g=!1;#c=!1;#m=!1;#y=null;#b=0;#A=0;#S=null;#w=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#x=!1;#R=dt._zIndex++;static _borderLineWidth=-1;static _colorManager=new gd;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=dt.prototype._resizeWithKeyboard,e=hi.TRANSLATE_SMALL,s=hi.TRANSLATE_BIG;return Ct(this,"_resizerKeyboardManager",new Kr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],dt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,l];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ct(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Z1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(dt._l10n??=t,dt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),dt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);dt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ht("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#x}set _isDraggable(t){this.#x=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#R}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#j(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,a){const[o,l]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(e+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,a]=this.parentDimensions;this.setAt(t*s,e*a,this.width*s,this.height*a),this._onTranslated()}#M([t,e],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#M(this.parentDimensions,t,e)}translateInPage(t,e){this.#p||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#p||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:h}=this;const[d,p]=this.getBaseTranslation();l+=d,h+=p;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(l,h),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=dt,a=s/t,o=s/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,a]}=this;let{x:o,y:l,width:h,height:d}=this;if(h*=s,d*=a,o*=s,l*=a,this._mustFixPosition)switch(t){case 0:o=ke(o,0,s-h),l=ke(l,0,a-d);break;case 90:o=ke(o,0,s-d),l=ke(l,h,a);break;case 180:o=ke(o,h,s),l=ke(l,d,a);break;case 270:o=ke(o,d,s),l=ke(l,0,a-h);break}this.x=o/=s,this.y=l/=a;const[p,g]=this.getBaseTranslation();o+=p,l+=g,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#E(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return dt.#E(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return dt.#E(t,e,360-this.parentRotation)}#C(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,a]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/s).toFixed(2)}%`,this.#o||(o.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,a=s.endsWith("%"),o=!this.#o&&e.endsWith("%");if(a&&o)return;const[l,h]=this.parentDimensions;a||(t.width=`${(100*parseFloat(s)/l).toFixed(2)}%`),!this.#o&&!o&&(t.height=`${(100*parseFloat(e)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#T(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const a=document.createElement("div");this.#r.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#L.bind(this,s),{signal:e}),a.addEventListener("contextmenu",Sn,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#r)}#L(t,e){e.preventDefault();const{isMac:s}=_e.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#h=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#z.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",le,{passive:!1,signal:l}),window.addEventListener("contextmenu",Sn,{signal:l}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#O()};window.addEventListener("pointerup",p,{signal:l}),window.addEventListener("blur",p,{signal:l})}#N(t,e,s,a){this.width=s,this.height=a,this.x=t,this.y=e;const[o,l]=this.parentDimensions;this.setDims(o*s,l*a),this.fixAndSetPosition(),this._onResized()}_onResized(){}#O(){if(!this.#l)return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:a}=this.#l;this.#l=null;const o=this.x,l=this.y,h=this.width,d=this.height;o===t&&l===e&&h===s&&d===a||this.addCommands({cmd:this.#N.bind(this,o,l,h,d),undo:this.#N.bind(this,t,e,s,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#z(t,e){const[s,a]=this.parentDimensions,o=this.x,l=this.y,h=this.width,d=this.height,p=dt.MIN_SIZE/s,g=dt.MIN_SIZE/a,y=this.#C(this.rotation),b=(N,H)=>[y[0]*N+y[2]*H,y[1]*N+y[3]*H],A=this.#C(360-this.rotation),v=(N,H)=>[A[0]*N+A[2]*H,A[1]*N+A[3]*H];let w,E,x=!1,R=!1;switch(t){case"topLeft":x=!0,w=(N,H)=>[0,0],E=(N,H)=>[N,H];break;case"topMiddle":w=(N,H)=>[N/2,0],E=(N,H)=>[N/2,H];break;case"topRight":x=!0,w=(N,H)=>[N,0],E=(N,H)=>[0,H];break;case"middleRight":R=!0,w=(N,H)=>[N,H/2],E=(N,H)=>[0,H/2];break;case"bottomRight":x=!0,w=(N,H)=>[N,H],E=(N,H)=>[0,0];break;case"bottomMiddle":w=(N,H)=>[N/2,H],E=(N,H)=>[N/2,0];break;case"bottomLeft":x=!0,w=(N,H)=>[0,H],E=(N,H)=>[N,0];break;case"middleLeft":R=!0,w=(N,H)=>[0,H/2],E=(N,H)=>[N,H/2];break}const T=w(h,d),D=E(h,d);let C=b(...D);const U=dt._round(o+C[0]),F=dt._round(l+C[1]);let V=1,$=1,J,tt;if(e.fromKeyboard)({deltaX:J,deltaY:tt}=e);else{const{screenX:N,screenY:H}=e,[et,yt]=this.#h;[J,tt]=this.screenToPageTranslation(N-et,H-yt),this.#h[0]=N,this.#h[1]=H}if([J,tt]=v(J/s,tt/a),x){const N=Math.hypot(h,d);V=$=Math.max(Math.min(Math.hypot(D[0]-T[0]-J,D[1]-T[1]-tt)/N,1/h,1/d),p/h,g/d)}else R?V=ke(Math.abs(D[0]-T[0]-J),p,1)/h:$=ke(Math.abs(D[1]-T[1]-tt),g,1)/d;const st=dt._round(h*V),ct=dt._round(d*$);C=b(...E(st,ct));const at=U-C[0],ut=F-C[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=st,this.height=ct,this.x=at,this.y=ut,this.setDims(s*st,a*ct),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#c)return this._editToolbar;this._editToolbar=new Lr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,s]of t)await this._editToolbar.addButton(e,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(In.initialize(dt._l10n),this.#n=new In(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#q();const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),Mb(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#w||=new Wr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#_.bind(this),onPinching:this.#v.bind(this),onPinchEnd:this.#F.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#_(){this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#v(t,e,s){let o=.7*(s/e)+1-.7;if(o===1)return;const l=this.#C(this.rotation),h=(U,F)=>[l[0]*U+l[2]*F,l[1]*U+l[3]*F],[d,p]=this.parentDimensions,g=this.x,y=this.y,b=this.width,A=this.height,v=dt.MIN_SIZE/d,w=dt.MIN_SIZE/p;o=Math.max(Math.min(o,1/b,1/A),v/b,w/A);const E=dt._round(b*o),x=dt._round(A*o);if(E===b&&x===A)return;this.#p||=[g,y,b,A];const R=h(b/2,A/2),T=dt._round(g+R[0]),D=dt._round(y+R[1]),C=h(E/2,x/2);this.x=T-C[0],this.y=D-C[1],this.width=E,this.height=x,this.setDims(d*E,p*x),this.fixAndSetPosition(),this._onResizing()}#F(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#O()}pointerdown(t){const{isMac:e}=_e.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#G(t);return}this.#U(t)}#U(t){const{isMac:e}=_e.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#G(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},h=p=>{a.abort(),this.#a=null,this.#f=!1,this._uiManager.endDragSession()||this.#U(p),s&&this._onStopDragging()};e&&(this.#b=t.clientX,this.#A=t.clientY,this.#a=t.pointerId,this.#s=t.pointerType,window.addEventListener("pointermove",p=>{s||(s=!0,this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=p;if(b!==this.#a){le(p);return}const[A,v]=this.screenToPageTranslation(g-this.#b,y-this.#A);this.#b=g,this.#A=y,this._uiManager.dragSelectedEditors(A,v)},l),window.addEventListener("touchmove",le,l),window.addEventListener("pointerdown",p=>{p.pointerType===this.#s&&(this.#w||p.isPrimary)&&h(p),le(p)},l));const d=p=>{if(!this.#a||this.#a===p.pointerId){h(p);return}le(p)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[h,d]=this.pageTranslation,p=t/a,g=e/a,y=this.x*o,b=this.y*l,A=this.width*o,v=this.height*l;switch(s){case 0:return[y+p+h,l-b-g-v+d,y+p+A+h,l-b-g+d];case 90:return[y+g+h,l-b+p+d,y+g+v+h,l-b+p+A+d];case 180:return[y-p-A+h,l-b+g+d,y-p+h,l-b+g+v+d];case 270:return[y-g-v+h,l-b-p-A+d,y-g+h,l-b-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,a,o,l]=t,h=o-s,d=l-a;switch(this.rotation){case 0:return[s,e-l,h,d];case 90:return[s,e-a,d,h];case 180:return[o,e-a,h,d];case 270:return[o,e-l,d,h];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#c=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#c=!1,!0):!1}isInEditMode(){return this.#c}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&a>0&&t<o&&s>0}#q(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#q()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Ht("An editor must be serializable")}static async deserialize(t,e,s){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s,annotationElementId:t.annotationElementId});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[h,d,p,g]=a.getRectInCurrentCoords(t.rect,l);return a.x=h/o,a.y=d/l,a.width=p/o,a.height=g/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#j(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#w?.destroy(),this.#w=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#T(),this.#r.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#r.children;if(!this.#e){this.#e=Array.from(e);const l=this.#V.bind(this),h=this.#H.bind(this),d=this._uiManager._signal;for(const p of this.#e){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",l,{signal:d}),p.addEventListener("blur",h,{signal:d}),p.addEventListener("focus",this.#k.bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",dt._l10nResizer[g])}}const s=this.#e[0];let a=0;for(const l of e){if(l===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let h=0;h<a-o;h++)this.#r.append(this.#r.firstChild);else if(o>a)for(let h=0;h<o-a;h++)this.#r.firstChild.before(this.#r.lastChild);let l=0;for(const h of e){const p=this.#e[l++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",dt._l10nResizer[p])}}this.#P(0),this.#m=!0,this.#r.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#V(t){dt._resizerKeyboardManager.exec(this,t)}#H(t){this.#m&&t.relatedTarget?.parentNode!==this.#r&&this.#j()}#k(t){this.#u=this.#m?t:""}#P(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#m&&this.#z(this.#u,{deltaX:t,deltaY:e,fromKeyboard:!0})}#j(){this.#m=!1,this.#P(-1),this.#O()}_stopResizingWithKeyboard(){this.#j(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#o=!0;const s=t/e,{style:a}=this.div;a.aspectRatio=s,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#S||=new Map;const{action:s}=t;let a=this.#S.get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},dt._telemetryTimeout),this.#S.set(s,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class Z1 extends dt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ny=3285377520,vn=4294901760,Fn=65535;class Db{constructor(t){this.h1=t?t&4294967295:ny,this.h2=t?t&4294967295:ny}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let w=0,E=t.length;w<E;w++){const x=t.charCodeAt(w);x<=255?e[s++]=x:(e[s++]=x>>>8,e[s++]=x&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,l=new Uint32Array(e.buffer,0,a);let h=0,d=0,p=this.h1,g=this.h2;const y=3432918353,b=461845907,A=y&Fn,v=b&Fn;for(let w=0;w<a;w++)w&1?(h=l[w],h=h*y&vn|h*A&Fn,h=h<<15|h>>>17,h=h*b&vn|h*v&Fn,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(d=l[w],d=d*y&vn|d*A&Fn,d=d<<15|d>>>17,d=d*b&vn|d*v&Fn,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,o){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*y&vn|h*A&Fn,h=h<<15|h>>>17,h=h*b&vn|h*v&Fn,a&1?p^=h:g^=h}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&vn|t*36045&Fn,e=e*4283543511&vn|((e<<16|t>>>16)*2950163797&vn)>>>16,t^=e>>>1,t=t*444984403&vn|t*60499&Fn,e=e*3301882366&vn|((e<<16|t>>>16)*3120437893&vn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const qh=Object.freeze({map:null,hash:"",transfer:void 0});class md{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=this.#n.get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof dt)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=this.#n.get(t);let a=!1;if(s!==void 0)for(const[o,l]of Object.entries(e))s[o]!==l&&(a=!0,s[o]=l);else a=!0,this.#n.set(t,e);a&&this.#i(),e instanceof dt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Lb(this)}get serializable(){if(this.#n.size===0)return qh;const t=new Map,e=new Db,s=[],a=Object.create(null);let o=!1;for(const[l,h]of this.#n){const d=h instanceof dt?h.serialize(!1,a):h;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:qh}get editorStats(){let t=null;const e=new Map;for(const s of this.#n.values()){if(!(s instanceof dt))continue;const a=s.telemetryFinalData;if(!a)continue;const{type:o}=a;e.has(o)||e.set(o,Object.getPrototypeOf(s).constructor),t||=Object.create(null);const l=t[o]||=new Map;for(const[h,d]of Object.entries(a)){if(h==="type")continue;let p=l.get(h);p||(p=new Map,l.set(h,p));const g=p.get(d)??0;p.set(d,g+1)}}for(const[s,a]of e)t[s]=a.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof dt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Lb extends md{#t;constructor(t){super();const{map:e,hash:s,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:s,transfer:a}}get print(){Ht("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Ct(this,"modifiedIds",{ids:new Set,hash:""})}}class J1{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(ge(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,h=new FontFace(a,o,l);this.addNativeFontFace(h);try{await h.load(),this.#t.add(a),s?.(t)}catch{At(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}Ht("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw At(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Ct(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ct(this,"isSyncFontLoadingSupported",Ie||_e.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ge(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:e,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ct(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(D,C){return D.charCodeAt(C)<<24|D.charCodeAt(C+1)<<16|D.charCodeAt(C+2)<<8|D.charCodeAt(C+3)&255}function a(D,C,U,F){const V=D.substring(0,C),$=D.substring(C+U);return V+F+$}let o,l;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let p=0;function g(D,C){if(++p>30){At("Load test font never loaded."),C();return}if(d.font="30px "+D,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(g.bind(null,D,C))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const v=16,w=1482184792;let E=s(b,v);for(o=0,l=y.length-3;o<l;o+=4)E=E-w+s(y,o)|0;o<y.length&&(E=E-w+s(y+"XXX",o)|0),b=a(b,v,4,H1(E));const x=`url(data:font/opentype;base64,${btoa(b)});`,R=`@font-face {font-family:"${y}";src:${x}}`;this.insertRule(R);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const D of[t.loadedName,y]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=D,T.append(C)}this._document.body.append(T),g(y,()=>{T.remove(),e.complete()})}}class tE{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${xb(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let a;try{a=t.get(s)}catch(l){At(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=o}}function eE(c){if(c instanceof URL)return c.href;if(typeof c=="string"){if(Ie)return c;const t=URL.parse(c,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function nE(c){if(Ie&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return Xr(c);if(c instanceof ArrayBuffer||ArrayBuffer.isView(c)||typeof c=="object"&&!isNaN(c?.length))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function vl(c){if(typeof c!="string")return null;if(c.endsWith("/"))return c;throw new Error(`Invalid factory url: "${c}" must include trailing slash.`)}const Vh=c=>typeof c=="object"&&Number.isInteger(c?.num)&&c.num>=0&&Number.isInteger(c?.gen)&&c.gen>=0,iE=c=>typeof c=="object"&&typeof c?.name=="string",Nb=V1.bind(null,Vh,iE);class sE{#t=new Map;#e=Promise.resolve();postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,s)})}addEventListener(t,e,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){At("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Al={DATA:1,ERROR:2},pe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function iy(){}function $e(c){if(c instanceof ui||c instanceof kl||c instanceof Jm||c instanceof kr||c instanceof Rh)return c;switch(c instanceof Error||typeof c=="object"&&c!==null||Ht('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new ui(c.message);case"InvalidPDFException":return new kl(c.message);case"PasswordException":return new Jm(c.message,c.code);case"ResponseException":return new kr(c.message,c.status,c.missing);case"UnknownErrorException":return new Rh(c.message,c.details)}return new Rh(c.message,c.toString())}class Cr{#t=new AbortController;constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Al.DATA)a.resolve(t.data);else if(t.callback===Al.ERROR)a.reject($e(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:s,targetName:a,callback:Al.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:a,callback:Al.ERROR,callbackId:t.callbackId,reason:$e(l)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,s,a){const o=this.streamId++,l=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:h,action:t,streamId:o,data:e,desiredSize:p.desiredSize},a),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:h,stream:pe.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{ge(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:h,stream:pe.CANCEL,streamId:o,reason:$e(p)}),g.promise}},s)}#n(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this,h=this.actionHandler[t.action],d={enqueue(p,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:pe.ENQUEUE,streamId:e,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:pe.CLOSE,streamId:e}),delete l.streamSinks[e])},error(p){ge(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:pe.ERROR,streamId:e,reason:$e(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:pe.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:s,targetName:a,stream:pe.START_COMPLETE,streamId:e,reason:$e(p)})})}#i(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case pe.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject($e(t.reason));break;case pe.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject($e(t.reason));break;case pe.PULL:if(!h){o.postMessage({sourceName:s,targetName:a,stream:pe.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||iy).then(function(){o.postMessage({sourceName:s,targetName:a,stream:pe.PULL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:s,targetName:a,stream:pe.PULL_COMPLETE,streamId:e,reason:$e(p)})});break;case pe.ENQUEUE:if(ge(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case pe.CLOSE:if(ge(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,e);break;case pe.ERROR:ge(l,"error should have stream controller"),l.controller.error($e(t.reason)),this.#a(l,e);break;case pe.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject($e(t.reason)),this.#a(l,e);break;case pe.CANCEL:if(!h)break;const d=$e(t.reason);Promise.try(h.onCancel||iy,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:pe.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:s,targetName:a,stream:pe.CANCEL_COMPLETE,streamId:e,reason:$e(p)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Ob{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ht("Abstract method `_createCanvas` called.")}}class aE extends Ob{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class kb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ht("Abstract method `_fetch` called.")}}class sy extends kb{async _fetch(t){const e=await Sa(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Xr(e)}}class Pb{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,a,o){return"none"}destroy(t=!1){}}class rE extends Pb{#t;#e;#n;#i;#a;#s;#o=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#a=e}get#r(){return this.#e||=new Map}get#h(){return this.#s||=new Map}get#l(){if(!this.#n){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const s=this.#a.createElementNS(ri,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#a.createElementNS(ri,"defs"),t.append(s),s.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=d[y]/255;const g=p.join(",");return[g,g,g]}const[e,s,a]=t,o=new Array(256),l=new Array(256),h=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,l[d]=s[d]/255,h[d]=a[d]/255;return[o.join(","),l.join(","),h.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&($r(e)?At('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=cd(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#r.get(t);if(e)return e;const[s,a,o]=this.#d(t),l=t.length===1?s:`${s}${a}${o}`;if(e=this.#r.get(l),e)return this.#r.set(t,e),e;const h=`g_${this.#i}_transfer_map_${this.#o++}`,d=this.#u(h);this.#r.set(t,d),this.#r.set(l,d);const p=this.#g(h);return this.#m(s,a,o,p),d}addHCMFilter(t,e){const s=`${t}-${e}`,a="base";let o=this.#h.get(a);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#h.set(a,o)),!t||!e))return o.url;const l=this.#b(t);t=ht.makeHexColor(...l);const h=this.#b(e);if(e=ht.makeHexColor(...h),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const v=A/255;d[A]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const p=d.join(","),g=`g_${this.#i}_hcm_filter`,y=o.filter=this.#g(g);this.#m(p,p,p,y),this.#p(y);const b=(A,v)=>{const w=l[A]/255,E=h[A]/255,x=new Array(v+1);for(let R=0;R<=v;R++)x[R]=w+R/v*(E-w);return x.join(",")};return this.#m(b(0,5),b(1,5),b(2,5),y),o.url=this.#u(g),o.url}addAlphaFilter(t){let e=this.#r.get(t);if(e)return e;const[s]=this.#d([t]),a=`alpha_${s}`;if(e=this.#r.get(a),e)return this.#r.set(t,e),e;const o=`g_${this.#i}_alpha_map_${this.#o++}`,l=this.#u(o);this.#r.set(t,l),this.#r.set(a,l);const h=this.#g(o);return this.#y(s,h),l}addLuminosityFilter(t){let e=this.#r.get(t||"luminosity");if(e)return e;let s,a;if(t?([s]=this.#d([t]),a=`luminosity_${s}`):a="luminosity",e=this.#r.get(a),e)return this.#r.set(t,e),e;const o=`g_${this.#i}_luminosity_map_${this.#o++}`,l=this.#u(o);this.#r.set(t,l),this.#r.set(a,l);const h=this.#g(o);return this.#f(h),t&&this.#y(s,h),l}addHighlightHCMFilter(t,e,s,a,o){const l=`${e}-${s}-${a}-${o}`;let h=this.#h.get(t);if(h?.key===l||(h?(h.filter?.remove(),h.key=l,h.url="none",h.filter=null):(h={key:l,url:"none",filter:null},this.#h.set(t,h)),!e||!s))return h.url;const[d,p]=[e,s].map(this.#b.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,A]=[a,o].map(this.#b.bind(this));y<g&&([g,y,b,A]=[y,g,A,b]),this.#l.style.color="";const v=(x,R,T)=>{const D=new Array(256),C=(y-g)/T,U=x/255,F=(R-x)/(255*T);let V=0;for(let $=0;$<=T;$++){const J=Math.round(g+$*C),tt=U+$*F;for(let st=V;st<=J;st++)D[st]=tt;V=J+1}for(let $=V;$<256;$++)D[$]=D[V-1];return D.join(",")},w=`g_${this.#i}_hcm_${t}_filter`,E=h.filter=this.#g(w);return this.#p(E),this.#m(v(b[0],A[0],5),v(b[1],A[1],5),v(b[2],A[2],5),E),h.url=this.#u(w),h.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#o=0)}#f(t){const e=this.#a.createElementNS(ri,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#p(t){const e=this.#a.createElementNS(ri,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#a.createElementNS(ri,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#c(t,e,s){const a=this.#a.createElementNS(ri,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)}#m(t,e,s,a){const o=this.#a.createElementNS(ri,"feComponentTransfer");a.append(o),this.#c(o,"feFuncR",t),this.#c(o,"feFuncG",e),this.#c(o,"feFuncB",s)}#y(t,e){const s=this.#a.createElementNS(ri,"feComponentTransfer");e.append(s),this.#c(s,"feFuncA",t)}#b(t){return this.#l.style.color=t,fd(getComputedStyle(this.#l).getPropertyValue("color"))}}class Bb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ht("Abstract method `_fetch` called.")}}class ay extends Bb{async _fetch(t){const e=await Sa(t,"arraybuffer");return new Uint8Array(e)}}class Fb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ht("Abstract method `_fetch` called.")}}class ry extends Fb{async _fetch(t){const e=await Sa(t,"arraybuffer");return new Uint8Array(e)}}Ie&&At("Please use the `legacy` build in Node.js environments.");async function yd(c){const e=await process.getBuiltinModule("fs").promises.readFile(c);return new Uint8Array(e)}class oE extends Pb{}class lE extends Ob{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class cE extends kb{async _fetch(t){return yd(t)}}class uE extends Bb{async _fetch(t){return yd(t)}}class hE extends Fb{async _fetch(t){return yd(t)}}const Me={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Xh(c,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,s),c.clip(a)}class bd{isModifyingCurrentTransform(){return!1}getPattern(){Ht("Abstract method `getPattern` called.")}}class dE extends bd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,a){let o;if(a===Me.STROKE||a===Me.FILL){const l=e.current.getClippedPathBoundingBox(a,Wt(t))||[0,0,0,0],h=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,p=e.cachedCanvases.getCanvas("pattern",h,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=ht.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),Xh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else Xh(t,this._bbox),o=this._createGradient(t);return o}}function Dh(c,t,e,s,a,o,l,h){const d=t.coords,p=t.colors,g=c.data,y=c.width*4;let b;d[e+1]>d[s+1]&&(b=e,e=s,s=b,b=o,o=l,l=b),d[s+1]>d[a+1]&&(b=s,s=a,a=b,b=l,l=h,h=b),d[e+1]>d[s+1]&&(b=e,e=s,s=b,b=o,o=l,l=b);const A=(d[e]+t.offsetX)*t.scaleX,v=(d[e+1]+t.offsetY)*t.scaleY,w=(d[s]+t.offsetX)*t.scaleX,E=(d[s+1]+t.offsetY)*t.scaleY,x=(d[a]+t.offsetX)*t.scaleX,R=(d[a+1]+t.offsetY)*t.scaleY;if(v>=R)return;const T=p[o],D=p[o+1],C=p[o+2],U=p[l],F=p[l+1],V=p[l+2],$=p[h],J=p[h+1],tt=p[h+2],st=Math.round(v),ct=Math.round(R);let at,ut,N,H,et,yt,L,X;for(let Z=st;Z<=ct;Z++){if(Z<E){const St=Z<v?0:(v-Z)/(v-E);at=A-(A-w)*St,ut=T-(T-U)*St,N=D-(D-F)*St,H=C-(C-V)*St}else{let St;Z>R?St=1:E===R?St=0:St=(E-Z)/(E-R),at=w-(w-x)*St,ut=U-(U-$)*St,N=F-(F-J)*St,H=V-(V-tt)*St}let Q;Z<v?Q=0:Z>R?Q=1:Q=(v-Z)/(v-R),et=A-(A-x)*Q,yt=T-(T-$)*Q,L=D-(D-J)*Q,X=C-(C-tt)*Q;const nt=Math.round(Math.min(at,et)),bt=Math.round(Math.max(at,et));let ot=y*Z+nt*4;for(let St=nt;St<=bt;St++)Q=(at-St)/(at-et),Q<0?Q=0:Q>1&&(Q=1),g[ot++]=ut-(ut-yt)*Q|0,g[ot++]=N-(N-L)*Q|0,g[ot++]=H-(H-X)*Q|0,g[ot++]=255}}function fE(c,t,e){const s=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const h=t.verticesPerRow,d=Math.floor(s.length/h)-1,p=h-1;for(o=0;o<d;o++){let g=o*h;for(let y=0;y<p;y++,g++)Dh(c,e,s[g],s[g+1],s[g+h],a[g],a[g+1],a[g+h]),Dh(c,e,s[g+h+1],s[g+1],s[g+h],a[g+h+1],a[g+1],a[g+h])}break;case"triangles":for(o=0,l=s.length;o<l;o+=3)Dh(c,e,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class pE extends bd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=p/y,v=g/b,w={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/A,scaleY:1/v},E=y+4,x=b+4,R=s.getCanvas("mesh",E,x),T=R.context,D=T.createImageData(y,b);if(e){const U=D.data;for(let F=0,V=U.length;F<V;F+=4)U[F]=e[0],U[F+1]=e[1],U[F+2]=e[2],U[F+3]=255}for(const U of this._figures)fE(D,U,w);return T.putImageData(D,2,2),{canvas:R.canvas,offsetX:h-2*A,offsetY:d-2*v,scaleX:A,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,a){Xh(t,this._bbox);const o=new Float32Array(2);if(a===Me.SHADING)ht.singularValueDecompose2dScale(Wt(t),o);else if(this.matrix){ht.singularValueDecompose2dScale(this.matrix,o);const[h,d]=o;ht.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=h,o[1]*=d}else ht.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,a===Me.SHADING?null:this._background,e.cachedCanvases);return a!==Me.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class gE extends bd{getPattern(){return"hotpink"}}function mE(c){switch(c[0]){case"RadialAxial":return new dE(c);case"Mesh":return new pE(c);case"Dummy":return new gE}throw new Error(`Unknown IR type: ${c[0]}`)}const oy={COLORED:1,UNCOLORED:2};class vd{static MAX_PATTERN_SIZE=3e3;constructor(t,e,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:a,tilingType:o,color:l,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),Vl("TilingType: "+o);const g=e[0],y=e[1],b=e[2],A=e[3],v=b-g,w=A-y,E=new Float32Array(2);ht.singularValueDecompose2dScale(this.matrix,E);const[x,R]=E;ht.singularValueDecompose2dScale(this.baseTransform,E);const T=x*E[0],D=R*E[1];let C=v,U=w,F=!1,V=!1;const $=Math.ceil(d*T),J=Math.ceil(p*D),tt=Math.ceil(v*T),st=Math.ceil(w*D);$>=tt?C=d:F=!0,J>=st?U=p:V=!0;const ct=this.getSizeAndScale(C,this.ctx.canvas.width,T),at=this.getSizeAndScale(U,this.ctx.canvas.height,D),ut=t.cachedCanvases.getCanvas("pattern",ct.size,at.size),N=ut.context,H=h.createCanvasGraphics(N);if(H.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(H,a,l),N.translate(-ct.scale*g,-at.scale*y),H.transform(ct.scale,0,0,at.scale,0,0),N.save(),this.clipBbox(H,g,y,b,A),H.baseTransform=Wt(H.ctx),H.executeOperatorList(s),H.endDrawing(),N.restore(),F||V){const et=ut.canvas;F&&(C=d),V&&(U=p);const yt=this.getSizeAndScale(C,this.ctx.canvas.width,T),L=this.getSizeAndScale(U,this.ctx.canvas.height,D),X=yt.size,Z=L.size,Q=t.cachedCanvases.getCanvas("pattern-workaround",X,Z),nt=Q.context,bt=F?Math.floor(v/d):0,ot=V?Math.floor(w/p):0;for(let St=0;St<=bt;St++)for(let Dt=0;Dt<=ot;Dt++)nt.drawImage(et,X*St,Z*Dt,X,Z,0,0,X,Z);return{canvas:Q.canvas,scaleX:yt.scale,scaleY:L.scale,offsetX:g,offsetY:y}}return{canvas:ut.canvas,scaleX:ct.scale,scaleY:at.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,e,s){const a=Math.max(vd.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,e,s,a,o){const l=a-e,h=o-s;t.ctx.rect(e,s,l,h),ht.axialAlignedBoundingBox([e,s,a,o],Wt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const a=t.ctx,o=t.current;switch(e){case oy.COLORED:const{fillStyle:l,strokeStyle:h}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=h;break;case oy.UNCOLORED:a.fillStyle=a.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new z1(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,a){let o=s;a!==Me.SHADING&&(o=ht.transform(o,e.baseTransform),this.matrix&&(o=ht.transform(o,this.matrix)));const l=this.createPatternCanvas(e);let h=new DOMMatrix(o);h=h.translate(l.offsetX,l.offsetY),h=h.scale(1/l.scaleX,1/l.scaleY);const d=t.createPattern(l.canvas,"repeat");return d.setTransform(h),d}}function yE({src:c,srcPos:t=0,dest:e,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const h=_e.isLittleEndian?4278190080:255,[d,p]=l?[o,h]:[h,o],g=s>>3,y=s&7,b=c.length;e=new Uint32Array(e.buffer);let A=0;for(let v=0;v<a;v++){for(const E=t+g;t<E;t++){const x=t<b?c[t]:255;e[A++]=x&128?p:d,e[A++]=x&64?p:d,e[A++]=x&32?p:d,e[A++]=x&16?p:d,e[A++]=x&8?p:d,e[A++]=x&4?p:d,e[A++]=x&2?p:d,e[A++]=x&1?p:d}if(y===0)continue;const w=t<b?c[t++]:255;for(let E=0;E<y;E++)e[A++]=w&1<<7-E?p:d}return{srcPos:t,destPos:A}}const ly=16,cy=100,bE=15,uy=10,Ke=16,Lh=new DOMMatrix,cn=new Float32Array(2),la=new Float32Array([1/0,1/0,-1/0,-1/0]);function vE(c,t){if(c._removeMirroring)throw new Error("Context is already forwarding operations.");c.__originalSave=c.save,c.__originalRestore=c.restore,c.__originalRotate=c.rotate,c.__originalScale=c.scale,c.__originalTranslate=c.translate,c.__originalTransform=c.transform,c.__originalSetTransform=c.setTransform,c.__originalResetTransform=c.resetTransform,c.__originalClip=c.clip,c.__originalMoveTo=c.moveTo,c.__originalLineTo=c.lineTo,c.__originalBezierCurveTo=c.bezierCurveTo,c.__originalRect=c.rect,c.__originalClosePath=c.closePath,c.__originalBeginPath=c.beginPath,c._removeMirroring=()=>{c.save=c.__originalSave,c.restore=c.__originalRestore,c.rotate=c.__originalRotate,c.scale=c.__originalScale,c.translate=c.__originalTranslate,c.transform=c.__originalTransform,c.setTransform=c.__originalSetTransform,c.resetTransform=c.__originalResetTransform,c.clip=c.__originalClip,c.moveTo=c.__originalMoveTo,c.lineTo=c.__originalLineTo,c.bezierCurveTo=c.__originalBezierCurveTo,c.rect=c.__originalRect,c.closePath=c.__originalClosePath,c.beginPath=c.__originalBeginPath,delete c._removeMirroring},c.save=function(){t.save(),this.__originalSave()},c.restore=function(){t.restore(),this.__originalRestore()},c.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},c.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},c.transform=function(e,s,a,o,l,h){t.transform(e,s,a,o,l,h),this.__originalTransform(e,s,a,o,l,h)},c.setTransform=function(e,s,a,o,l,h){t.setTransform(e,s,a,o,l,h),this.__originalSetTransform(e,s,a,o,l,h)},c.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},c.rotate=function(e){t.rotate(e),this.__originalRotate(e)},c.clip=function(e){t.clip(e),this.__originalClip(e)},c.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},c.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},c.bezierCurveTo=function(e,s,a,o,l,h){t.bezierCurveTo(e,s,a,o,l,h),this.__originalBezierCurveTo(e,s,a,o,l,h)},c.rect=function(e,s,a,o){t.rect(e,s,a,o),this.__originalRect(e,s,a,o)},c.closePath=function(){t.closePath(),this.__originalClosePath()},c.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class AE{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,s)):(a=this.canvasFactory.create(e,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Sl(c,t,e,s,a,o,l,h,d,p){const[g,y,b,A,v,w]=Wt(c);if(y===0&&b===0){const R=l*g+v,T=Math.round(R),D=h*A+w,C=Math.round(D),U=(l+d)*g+v,F=Math.abs(Math.round(U)-T)||1,V=(h+p)*A+w,$=Math.abs(Math.round(V)-C)||1;return c.setTransform(Math.sign(g),0,0,Math.sign(A),T,C),c.drawImage(t,e,s,a,o,0,0,F,$),c.setTransform(g,y,b,A,v,w),[F,$]}if(g===0&&A===0){const R=h*b+v,T=Math.round(R),D=l*y+w,C=Math.round(D),U=(h+p)*b+v,F=Math.abs(Math.round(U)-T)||1,V=(l+d)*y+w,$=Math.abs(Math.round(V)-C)||1;return c.setTransform(0,Math.sign(y),Math.sign(b),0,T,C),c.drawImage(t,e,s,a,o,0,0,$,F),c.setTransform(g,y,b,A,v,w),[$,F]}c.drawImage(t,e,s,a,o,l,h,d,p);const E=Math.hypot(g,y),x=Math.hypot(b,A);return[E*d,x*p]}class hy{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Gh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Oe.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e){this.clipBox=new Float32Array([0,0,t,e]),this.minMax=la.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Me.FILL,e=null){const s=this.minMax.slice();if(t===Me.STROKE){e||Ht("Stroke bounding box must include transform."),ht.singularValueDecompose2dScale(e,cn);const a=cn[0]*this.lineWidth/2,o=cn[1]*this.lineWidth/2;s[0]-=a,s[1]-=o,s[2]+=a,s[3]+=o}return s}updateClipFromPath(){const t=ht.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(la,0)}getClippedPathBoundingBox(t=Me.FILL,e=null){return ht.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function dy(c,t){if(t instanceof ImageData){c.putImageData(t,0,0);return}const e=t.height,s=t.width,a=e%Ke,o=(e-a)/Ke,l=a===0?o:o+1,h=c.createImageData(s,Ke);let d=0,p;const g=t.data,y=h.data;let b,A,v,w;if(t.kind===Dr.GRAYSCALE_1BPP){const E=g.byteLength,x=new Uint32Array(y.buffer,0,y.byteLength>>2),R=x.length,T=s+7>>3,D=4294967295,C=_e.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(v=b<o?Ke:a,p=0,A=0;A<v;A++){const U=E-d;let F=0;const V=U>T?s:U*8-7,$=V&-8;let J=0,tt=0;for(;F<$;F+=8)tt=g[d++],x[p++]=tt&128?D:C,x[p++]=tt&64?D:C,x[p++]=tt&32?D:C,x[p++]=tt&16?D:C,x[p++]=tt&8?D:C,x[p++]=tt&4?D:C,x[p++]=tt&2?D:C,x[p++]=tt&1?D:C;for(;F<V;F++)J===0&&(tt=g[d++],J=128),x[p++]=tt&J?D:C,J>>=1}for(;p<R;)x[p++]=0;c.putImageData(h,0,b*Ke)}}else if(t.kind===Dr.RGBA_32BPP){for(A=0,w=s*Ke*4,b=0;b<o;b++)y.set(g.subarray(d,d+w)),d+=w,c.putImageData(h,0,A),A+=Ke;b<l&&(w=s*a*4,y.set(g.subarray(d,d+w)),c.putImageData(h,0,A))}else if(t.kind===Dr.RGB_24BPP)for(v=Ke,w=s*v,b=0;b<l;b++){for(b>=o&&(v=a,w=s*v),p=0,A=w;A--;)y[p++]=g[d++],y[p++]=g[d++],y[p++]=g[d++],y[p++]=255;c.putImageData(h,0,b*Ke)}else throw new Error(`bad image kind: ${t.kind}`)}function fy(c,t){if(t.bitmap){c.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,a=e%Ke,o=(e-a)/Ke,l=a===0?o:o+1,h=c.createImageData(s,Ke);let d=0;const p=t.data,g=h.data;for(let y=0;y<l;y++){const b=y<o?Ke:a;({srcPos:d}=yE({src:p,srcPos:d,dest:g,width:s,height:b,nonBlackColor:0})),c.putImageData(h,0,y*Ke)}}function Er(c,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)c[s]!==void 0&&(t[s]=c[s]);c.setLineDash!==void 0&&(t.setLineDash(c.getLineDash()),t.lineDashOffset=c.lineDashOffset)}function wl(c){c.strokeStyle=c.fillStyle="#000000",c.fillRule="nonzero",c.globalAlpha=1,c.lineWidth=1,c.lineCap="butt",c.lineJoin="miter",c.miterLimit=10,c.globalCompositeOperation="source-over",c.font="10px sans-serif",c.setLineDash!==void 0&&(c.setLineDash([]),c.lineDashOffset=0);const{filter:t}=c;t!=="none"&&t!==""&&(c.filter="none")}function py(c,t){if(t)return!0;ht.singularValueDecompose2dScale(c,cn);const e=Math.fround(Tn.pixelRatio*ps.PDF_TO_CSS_UNITS);return cn[0]<=e&&cn[1]<=e}const SE=["butt","round","square"],wE=["miter","round","bevel"],EE={},gy={};class ua{constructor(t,e,s,a,o,{optionalContentConfig:l,markedContentStack:h=null},d,p){this.ctx=t,this.current=new hy(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=l,this.cachedCanvases=new AE(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=h,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Wt(this.compositeCtx))}this.ctx.save(),wl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Wt(this.ctx)}executeOperatorList(t,e,s,a){const o=t.argsArray,l=t.fnArray;let h=e||0;const d=o.length;if(d===h)return h;const p=d-h>uy&&typeof s=="function",g=p?Date.now()+bE:0;let y=0;const b=this.commonObjs,A=this.objs;let v;for(;;){if(a!==void 0&&h===a.nextBreakPoint)return a.breakIt(h,s),h;if(v=l[h],v!==Or.dependency)this[v].apply(this,o[h]);else for(const w of o[h]){const E=w.startsWith("g_")?b:A;if(!E.has(w))return E.get(w,s),h}if(h++,h===d)return h;if(p&&++y>uy){if(Date.now()>g)return s(),h;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),h=s,d=a,p="prescale1",g,y;for(;o>2&&h>1||l>2&&d>1;){let b=h,A=d;o>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/b),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),g=this.cachedCanvases.getCanvas(p,b,A),y=g.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,h,d,0,0,b,A),t=g.canvas,h=b,d=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:a}=t,o=this.current.fillColor,l=this.current.patternFill,h=Wt(e);let d,p,g,y;if((t.bitmap||t.data)&&t.count>1){const $=t.bitmap||t.data.buffer;p=JSON.stringify(l?h:[h.slice(0,4),o]),d=this._cachedBitmapsMap.get($),d||(d=new Map,this._cachedBitmapsMap.set($,d));const J=d.get(p);if(J&&!l){const tt=Math.round(Math.min(h[0],h[2])+h[4]),st=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:J,offsetX:tt,offsetY:st}}g=J}g||(y=this.cachedCanvases.getCanvas("maskCanvas",s,a),fy(y.context,t));let b=ht.transform(h,[1/s,0,0,-1/a,0,0]);b=ht.transform(b,[1,0,0,1,0,-a]);const A=la.slice();ht.axialAlignedBoundingBox([0,0,s,a],b,A);const[v,w,E,x]=A,R=Math.round(E-v)||1,T=Math.round(x-w)||1,D=this.cachedCanvases.getCanvas("fillCanvas",R,T),C=D.context,U=v,F=w;C.translate(-U,-F),C.transform(...b),g||(g=this._scaleImage(y.canvas,Bn(C)),g=g.img,d&&l&&d.set(p,g)),C.imageSmoothingEnabled=py(Wt(C),t.interpolate),Sl(C,g,0,0,g.width,g.height,0,0,s,a),C.globalCompositeOperation="source-in";const V=ht.transform(Bn(C),[1,0,0,1,-U,-F]);return C.fillStyle=l?o.getPattern(e,this,V,Me.FILL):o,C.fillRect(0,0,s,a),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,D.canvas)),{canvas:D.canvas,offsetX:Math.round(U),offsetY:Math.round(F)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=SE[t]}setLineJoin(t){this.ctx.lineJoin=wE[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),Er(this.suspendedCtx,o),vE(o,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Er(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,a){const o=a[0],l=a[1],h=a[2]-o,d=a[3]-l;h===0||d===0||(this.genericComposeSMask(e.context,s,h,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,a,o,l,h,d,p,g,y){let b=t.canvas,A=d-g,v=p-y;if(l)if(A<0||v<0||A+s>b.width||v+a>b.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,a),x=E.context;x.drawImage(b,-A,-v),x.globalCompositeOperation="destination-atop",x.fillStyle=l,x.fillRect(0,0,s,a),x.globalCompositeOperation="source-over",b=E.canvas,A=v=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(A,v,s,a),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(A,v,s,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const w=new Path2D;w.rect(d,p,s,a),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(b,A,v,s,a,d,p,s,a),e.restore()}save(){this.inSMaskMode&&Er(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Er(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,a,o,l){this.ctx.transform(t,e,s,a,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){let[a]=e;if(!s){a||=e[0]=new Path2D,this[t](a);return}if(!(a instanceof Path2D)){const o=e[0]=new Path2D;for(let l=0,h=a.length;l<h;)switch(a[l++]){case bl.moveTo:o.moveTo(a[l++],a[l++]);break;case bl.lineTo:o.lineTo(a[l++],a[l++]);break;case bl.curveTo:o.bezierCurveTo(a[l++],a[l++],a[l++],a[l++],a[l++],a[l++]);break;case bl.closePath:o.closePath();break;default:At(`Unrecognized drawing path operator: ${a[l-1]}`);break}a=o}ht.axialAlignedBoundingBox(s,Wt(this.ctx),this.current.minMax),this[t](a)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const s=this.ctx,a=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const o=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=a.getPattern(s,this,Bn(s),Me.STROKE),o){const l=new Path2D;l.addPath(t,s.getTransform().invertSelf().multiplySelf(o)),t=l}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Me.STROKE,Wt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const d=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=a.getPattern(s,this,Bn(s),Me.FILL),d){const p=new Path2D;p.addPath(t,s.getTransform().invertSelf().multiplySelf(d)),t=p}l=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),l&&s.restore(),e&&this.consumePath(t,h)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=EE}eoClip(){this.pendingClip=gy}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const s=new Path2D,a=e.getTransform().invertSelf();for(const{transform:o,x:l,y:h,fontSize:d,path:p}of t)s.addPath(p,new DOMMatrix(o).preMultiplySelf(a).translate(l,h).scale(d,-d));e.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const s=this.commonObjs.get(t),a=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=s.fontMatrix||Gh,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&At("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=s.systemFontInfo?.css||`"${o}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const d=s.italic?"italic":"normal";let p=e;e<ly?p=ly:e>cy&&(p=cy),this.current.fontSizeScale=e/p,this.ctx.font=`${d} ${h} ${p}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,e,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),a}paintChar(t,e,s,a,o){const l=this.ctx,h=this.current,d=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,y=p&Oe.FILL_STROKE_MASK,b=!!(p&Oe.ADD_TO_PATH_FLAG),A=h.patternFill&&!d.missingFile,v=h.patternStroke&&!d.missingFile;let w;if((d.disableFontFace||b||A||v)&&(w=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||A||v){l.save(),l.translate(e,s),l.scale(g,-g);let E;if((y===Oe.FILL||y===Oe.FILL_STROKE)&&(a?(E=l.getTransform(),l.setTransform(...a),l.fill(this.#n(w,E,a))):l.fill(w)),y===Oe.STROKE||y===Oe.FILL_STROKE)if(o){E||=l.getTransform(),l.setTransform(...o);const{a:x,b:R,c:T,d:D}=E,C=ht.inverseTransform(o),U=ht.transform([x,R,T,D,0,0],C);ht.singularValueDecompose2dScale(U,cn),l.lineWidth*=Math.max(cn[0],cn[1])/g,l.stroke(this.#n(w,E,o))}else l.lineWidth/=g,l.stroke(w);l.restore()}else(y===Oe.FILL||y===Oe.FILL_STROKE)&&l.fillText(t,e,s),(y===Oe.STROKE||y===Oe.FILL_STROKE)&&l.strokeText(t,e,s);b&&(this.pendingTextPaths||=[]).push({transform:Wt(l),x:e,y:s,fontSize:g,path:w})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){s=!0;break}return Ct(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const o=this.ctx,l=e.fontSizeScale,h=e.charSpacing,d=e.wordSpacing,p=e.fontDirection,g=e.textHScale*p,y=t.length,b=s.vertical,A=b?1:-1,v=s.defaultVMetrics,w=a*e.fontMatrix[0],E=e.textRenderingMode===Oe.FILL&&!s.disableFontFace&&!e.patternFill;o.save(),e.textMatrix&&o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),p>0?o.scale(g,-1):o.scale(g,1);let x,R;if(e.patternFill){o.save();const F=e.fillColor.getPattern(o,this,Bn(o),Me.FILL);x=Wt(o),o.restore(),o.fillStyle=F}if(e.patternStroke){o.save();const F=e.strokeColor.getPattern(o,this,Bn(o),Me.STROKE);R=Wt(o),o.restore(),o.strokeStyle=F}let T=e.lineWidth;const D=e.textMatrixScale;if(D===0||T===0){const F=e.textRenderingMode&Oe.FILL_STROKE_MASK;(F===Oe.STROKE||F===Oe.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=D;if(l!==1&&(o.scale(l,l),T/=l),o.lineWidth=T,s.isInvalidPDFjsFont){const F=[];let V=0;for(const $ of t)F.push($.unicode),V+=$.width;o.fillText(F.join(""),0,0),e.x+=V*w*g,o.restore(),this.compose();return}let C=0,U;for(U=0;U<y;++U){const F=t[U];if(typeof F=="number"){C+=A*F*a/1e3;continue}let V=!1;const $=(F.isSpace?d:0)+h,J=F.fontChar,tt=F.accent;let st,ct,at=F.width;if(b){const N=F.vmetric||v,H=-(F.vmetric?N[1]:at*.5)*w,et=N[2]*w;at=N?-N[0]:at,st=H/l,ct=(C+et)/l}else st=C/l,ct=0;if(s.remeasure&&at>0){const N=o.measureText(J).width*1e3/a*l;if(at<N&&this.isFontSubpixelAAEnabled){const H=at/N;V=!0,o.save(),o.scale(H,1),st/=H}else at!==N&&(st+=(at-N)/2e3*a/l)}if(this.contentVisible&&(F.isInFont||s.missingFile)){if(E&&!tt)o.fillText(J,st,ct);else if(this.paintChar(J,st,ct,x,R),tt){const N=st+a*tt.offset.x/l,H=ct-a*tt.offset.y/l;this.paintChar(tt.fontChar,N,H,x,R)}}const ut=b?at*w-$*p:at*w+$*p;C+=ut,V&&o.restore()}b?e.y-=C:e.x+=C*g,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,a=s.font,o=s.fontSize,l=s.fontDirection,h=a.vertical?1:-1,d=s.charSpacing,p=s.wordSpacing,g=s.textHScale*l,y=s.fontMatrix||Gh,b=t.length,A=s.textRenderingMode===Oe.INVISIBLE;let v,w,E,x;if(!(A||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),s.textMatrix&&e.transform(...s.textMatrix),e.translate(s.x,s.y+s.textRise),e.scale(g,l),v=0;v<b;++v){if(w=t[v],typeof w=="number"){x=h*w*o/1e3,this.ctx.translate(x,0),s.x+=x*g;continue}const R=(w.isSpace?p:0)+d,T=a.charProcOperatorList[w.operatorListId];T?this.contentVisible&&(this.save(),e.scale(o,o),e.transform(...y),this.executeOperatorList(T),this.restore()):At(`Type3 character "${w.operatorListId}" is not available.`);const D=[w.width,0];ht.applyTransform(D,y),E=D[0]*o+R,e.translate(E,0),s.x+=E*g}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,a,o,l){const h=new Path2D;h.rect(s,a,o-s,l-a),this.ctx.clip(h),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=this.baseTransform||Wt(this.ctx),a={createCanvasGraphics:o=>new ua(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new vd(t,this.ctx,a,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=mE(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,Bn(e),Me.SHADING);const a=Bn(e);if(a){const{width:o,height:l}=e.canvas,h=la.slice();ht.axialAlignedBoundingBox([0,0,o,l],a,h);const[d,p,g,y]=h;this.ctx.fillRect(d,p,g-d,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ht("Should not call beginInlineImage")}beginImageData(){Ht("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Wt(this.ctx),e)){ht.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[s,a,o,l]=e,h=new Path2D;h.rect(s,a,o-s,l-a),this.ctx.clip(h),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Vl("TODO: Support non-isolated groups."),t.knockout&&At("Knockout groups not supported.");const s=Wt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=la.slice();ht.axialAlignedBoundingBox(t.bbox,Wt(e),a);const o=[0,0,e.canvas.width,e.canvas.height];a=ht.intersect(a,o)||[0,0,0,0];const l=Math.floor(a[0]),h=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-l,1),p=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,p),b=y.context;b.translate(-l,-h),b.transform(...s);let A=new Path2D;const[v,w,E,x]=t.bbox;if(A.rect(v,w,E-v,x-w),t.matrix){const R=new Path2D;R.addPath(A,new DOMMatrix(t.matrix)),A=R}b.clip(A),t.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:l,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,h),e.save()),Er(e,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=Wt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const o=la.slice();ht.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a,o),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,s,a,o){if(this.#t(),wl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const l=e[2]-e[0],h=e[3]-e[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=l,e[3]=h,ht.singularValueDecompose2dScale(Wt(this.ctx),cn);const{viewportScale:d}=this,p=Math.ceil(l*this.outputScaleX*d),g=Math.ceil(h*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(cn[0],0,0,-cn[1],0,h*cn[1]),wl(this.ctx)}else{wl(this.ctx),this.endPath();const d=new Path2D;d.rect(e[0],e[1],l,h),this.ctx.clip(d)}}this.current=new hy(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,a=this._createMaskCanvas(t),o=a.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,a.offsetX,a.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,a=0,o,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const h=this.ctx;h.save();const d=Wt(h);h.transform(e,s,a,o,0,0);const p=this._createMaskCanvas(t);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let g=0,y=l.length;g<y;g+=2){const b=ht.transform(d,[e,s,a,o,l[g],l[g+1]]);h.drawImage(p.canvas,b[4],b[5])}h.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,a=this.current.patternFill;for(const o of t){const{data:l,width:h,height:d,transform:p}=o,g=this.cachedCanvases.getCanvas("maskCanvas",h,d),y=g.context;y.save();const b=this.getObject(l,o);fy(y,b),y.globalCompositeOperation="source-in",y.fillStyle=a?s.getPattern(y,this,Bn(e),Me.FILL):s,y.fillRect(0,0,h,d),y.restore(),e.save(),e.transform(...p),e.scale(1,-1),Sl(e,g.canvas,0,0,h,d,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){At("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,a){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){At("Dependent image isn't ready yet");return}const l=o.width,h=o.height,d=[];for(let p=0,g=a.length;p<g;p+=2)d.push({transform:[e,0,0,s,a[p],a[p+1]],x:0,y:0,w:l,h});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,a=this.ctx;this.save();const{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none"),a.scale(1/e,-1/s);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",e,s).context;dy(p,t),l=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(l,Bn(a));a.imageSmoothingEnabled=py(Wt(a),t.interpolate),Sl(a,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const o=t.width,l=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,l).context;dy(d,t),a=this.applyTransferMapsToCanvas(d)}for(const o of e)s.save(),s.transform(...o.transform),s.scale(1,-1),Sl(s,a,o.x,o.y,o.w,o.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const a=this.ctx;this.pendingClip&&(s||(this.pendingClip===gy?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Wt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:a,d:o}=this.ctx.getTransform();let l,h;if(s===0&&a===0){const d=Math.abs(e),p=Math.abs(o);if(d===p)if(t===0)l=h=1/d;else{const g=d*t;l=h=g<1?1/g:1}else if(t===0)l=1/d,h=1/p;else{const g=d*t,y=p*t;l=g<1?1/g:1,h=y<1?1/y:1}}else{const d=Math.abs(e*o-s*a),p=Math.hypot(e,s),g=Math.hypot(a,o);if(t===0)l=g/d,h=p/d;else{const y=t*d;l=g>y?g/y:1,h=p>y?p/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(a||1)*o,s.stroke(t);return}const h=s.getLineDash();e&&s.save(),s.scale(o,l),Lh.a=1/o,Lh.d=1/l;const d=new Path2D;if(d.addPath(t,Lh),h.length>0){const p=Math.max(o,l);s.setLineDash(h.map(g=>g/p)),s.lineDashOffset/=p}s.lineWidth=a||1,s.stroke(d),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const c in Or)ua.prototype[c]!==void 0&&(ua.prototype[Or[c]]=ua.prototype[c]);class Fi{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class _E{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const oa=Symbol("INTERNAL");class xE{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:s,usage:a,rbGroups:o}){this.#t=!!(t&on.DISPLAY),this.#e=!!(t&on.PRINT),this.name=e,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,s=!1){t!==oa&&Ht("Internal method `_setVisible` called."),this.#n=s,this.#i=e}}class TE{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=on.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new xE(e,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(oa,!1);for(const s of t.on)this.#e.get(s)._setVisible(oa,!0);for(const s of t.off)this.#e.get(s)._setVisible(oa,!1);this.#n=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let a=1;a<e;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#a(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return At(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Vl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(At(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return At(`Unknown optional content policy ${t.policy}.`),!0}return At(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){const a=this.#e.get(t);if(!a){At(`Optional content group not found: ${t}`);return}if(s&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(oa,!1,!0);a._setVisible(oa,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=this.#e.get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Db;for(const[e,s]of this.#e)t.update(`${e}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class RE{constructor(t,{disableRange:e=!1,disableStream:s=!1}){ge(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=h,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),t.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});ge(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ge(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new CE(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new ME(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class CE{constructor(t,e,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=Yl(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ME{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function DE(c){let t=!0,e=s("filename\\*","i").exec(c);if(e){e=e[1];let g=h(e);return g=unescape(g),g=d(g),g=p(g),o(g)}if(e=l(c),e){const g=p(e);return o(g)}if(e=s("filename","i").exec(c),e){e=e[1];let g=h(e);return g=p(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),A=Xr(y);y=b.decode(A),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function l(g){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(g))!==null;){let[,w,E,x]=b;if(w=parseInt(w,10),w in y){if(w===0)break;continue}y[w]=[E,x]}const v=[];for(let w=0;w<y.length&&w in y;++w){let[E,x]=y[w];x=h(x),E&&(x=unescape(x),w===0&&(x=d(x))),v.push(x)}return v.join("")}function h(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),v=g.slice(y+1).replace(/^[^']*'/,"");return a(b,v)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,v){if(A==="q"||A==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,E){return String.fromCharCode(parseInt(E,16))}),a(b,v);try{v=atob(v)}catch{}return a(b,v)})}return""}function Ub(c,t){const e=new Headers;if(!c||!t||typeof t!="object")return e;for(const s in t){const a=t[s];a!==void 0&&e.append(s,a)}return e}function $l(c){return URL.parse(c)?.origin??null}function Ib({responseHeaders:c,isHttp:t,rangeChunkSize:e,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(c.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||s||!t||c.get("Accept-Ranges")!=="bytes"||(c.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function zb(c){const t=c.get("Content-Disposition");if(t){let e=DE(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Yl(e))return e}return null}function Qr(c,t){return new kr(`Unexpected server response (${c}) while retrieving PDF "${t}".`,c,c===404||c===0&&t.startsWith("file:"))}function Hb(c){return c===200||c===206}function jb(c,t,e){return{method:"GET",headers:c,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Gb(c){return c instanceof Uint8Array?c.buffer:c instanceof ArrayBuffer?c:(At(`getArrayBuffer - unexpected data format: ${c}`),new Uint8Array(c).buffer)}class LE{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Ub(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ge(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new NE(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new OE(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class NE{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),a=e.url;fetch(a,jb(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=$l(o.url),!Hb(o.status))throw Qr(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:h,suggestedLength:d}=Ib({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=zb(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ui("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Gb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class OE{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${s-1}`);const l=a.url;fetch(l,jb(o,this._withCredentials,this._abortController)).then(h=>{const d=$l(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!Hb(h.status))throw Qr(h.status,l);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Gb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Nh=200,Oh=206;function kE(c){const t=c.response;return typeof t!="string"?t:Xr(t).buffer}class PE{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Ub(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Oh):a.expectedStatus=Nh,e.responseType="arraybuffer",ge(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){const s=this.pendingRequests[t];s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const o=a.status||Nh;if(!(o===Nh&&s.expectedStatus===Oh)&&o!==s.expectedStatus){s.onError(a.status);return}const h=kE(a);if(o===Oh){const d=a.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);p?s.onDone({begin:parseInt(p[1],10),chunk:h}):(At('Missing or invalid "Content-Range" header.'),s.onError(0))}else h?s.onDone({begin:0,chunk:h}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class BE{constructor(t){this._source=t,this._manager=new PE(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ge(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new FE(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new UE(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class FE{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=$l(e.responseURL);const s=e.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...p]=h.split(": ");return[d,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=Ib({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=zb(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Qr(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class UE{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=$l(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Qr(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const IE=/^[a-z][a-z0-9\-+.]+:/i;function zE(c){if(IE.test(c))return new URL(c);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(c))}class HE{constructor(t){this.source=t,this.url=zE(t.url),ge(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ge(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new jE(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new GE(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class jE{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Qr(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ui("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class GE{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const _r=Symbol("INITIAL_DATA");class qb{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:_r}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const s=this.#t[t];if(!s||s.data===_r)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=this.#t[t];return!!e&&e.data!==_r}delete(t){const e=this.#t[t];return!e||e.data===_r?!1:(delete this.#t[t],!0)}resolve(t,e=null){const s=this.#e(t);s.data=e,s.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==_r&&(yield[t,e])}}}const qE=1e5,my=30;let Pr=class An{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#o=0;#r=0;#h=null;#l=null;#d=0;#u=0;#f=Object.create(null);#p=[];#g=null;#c=[];#m=new WeakMap;#y=null;static#b=new Map;static#A=new Map;static#S=new WeakMap;static#w=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#u=s.scale*Tn.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:h}=s.rawDims;this.#y=[1,0,0,-1,-l,h+o],this.#r=a,this.#o=o,An.#L(),Ui(e,s),this.#t.promise.finally(()=>{An.#x.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=_e.platform;return Ct(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#h.read().then(({value:e,done:s})=>{if(s){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#R(e.items),t()},this.#t.reject)};return this.#h=this.#g.getReader(),An.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const s=t.scale*Tn.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Ui(this.#l,{rotation:a})),s!==this.#u){e?.(),this.#u=s;const o={div:null,properties:null,ctx:An.#C(this.#a)};for(const l of this.#c)o.properties=this.#m.get(l),o.div=l,this.#E(o)}}cancel(){const t=new ui("TextLayer task cancelled.");this.#h?.cancel(t).catch(()=>{}),this.#h=null,this.#t.reject(t)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#p}#R(t){if(this.#n)return;this.#s.ctx??=An.#C(this.#a);const e=this.#c,s=this.#p;for(const a of t){if(e.length>qE){At("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id!==null&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(a.str),this.#M(a)}}#M(t){const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#c.push(e);const a=ht.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let h=this.#i&&l.fontSubstitution||l.fontFamily;h=An.fontFamilyMap.get(h)||h;const d=Math.hypot(a[2],a[3]),p=d*An.#N(h,l,this.#a);let g,y;o===0?(g=a[4],y=a[5]-p):(g=a[4]+p*Math.sin(o),y=a[5]-p*Math.cos(o));const b="calc(var(--total-scale-factor) *",A=e.style;this.#e===this.#l?(A.left=`${(100*g/this.#r).toFixed(2)}%`,A.top=`${(100*y/this.#o).toFixed(2)}%`):(A.left=`${b}${g.toFixed(2)}px)`,A.top=`${b}${y.toFixed(2)}px)`),A.fontSize=`${b}${(An.#w*d).toFixed(2)}px)`,A.fontFamily=h,s.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);w!==E&&Math.max(w,E)/Math.min(w,E)>1.5&&(v=!0)}if(v&&(s.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,s),this.#s.div=e,this.#s.properties=s,this.#E(this.#s),s.hasText&&this.#e.append(e),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#E(t){const{div:e,properties:s,ctx:a}=t,{style:o}=e;let l="";if(An.#w>1&&(l=`scale(${1/An.#w})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:h}=o,{canvasWidth:d,fontSize:p}=s;An.#T(a,p*this.#u,h);const{width:g}=a.measureText(e.textContent);g>0&&(l=`scaleX(${d*this.#u/g}) ${l}`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:t}of this.#A.values())t.remove();this.#A.clear()}}static#C(t=null){let e=this.#A.get(t||="");if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#A.set(t,e),this.#S.set(e,{size:0,family:""})}return e}static#T(t,e,s){const a=this.#S.get(t);e===a.size&&s===a.family||(t.font=`${e}px ${s}`,a.size=e,a.family=s)}static#L(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#N(t,e,s){const a=this.#b.get(t);if(a)return a;const o=this.#C(s);o.canvas.width=o.canvas.height=my,this.#T(o,my,t);const l=o.measureText(""),h=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return h?p=h/(h+d):(_e.platform.isFirefox&&At("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),this.#b.set(t,p),p}};class Br{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const h=o.name;if(h==="#text")l=o.value;else if(Br.shouldBuildText(h))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const VE=100;function Ad(c={}){typeof c=="string"||c instanceof URL?c={url:c}:(c instanceof ArrayBuffer||ArrayBuffer.isView(c))&&(c={data:c});const t=new Sd,{docId:e}=t,s=c.url?eE(c.url):null,a=c.data?nE(c.data):null,o=c.httpHeaders||null,l=c.withCredentials===!0,h=c.password??null,d=c.range instanceof wd?c.range:null,p=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:2**16;let g=c.worker instanceof ga?c.worker:null;const y=c.verbosity,b=typeof c.docBaseUrl=="string"&&!$r(c.docBaseUrl)?c.docBaseUrl:null,A=vl(c.cMapUrl),v=c.cMapPacked!==!1,w=c.CMapReaderFactory||(Ie?cE:sy),E=vl(c.iccUrl),x=vl(c.standardFontDataUrl),R=c.StandardFontDataFactory||(Ie?uE:ay),T=vl(c.wasmUrl),D=c.WasmFactory||(Ie?hE:ry),C=c.stopAtErrors!==!0,U=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,F=c.isEvalSupported!==!1,V=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!Ie,$=typeof c.isImageDecoderSupported=="boolean"?c.isImageDecoderSupported:!Ie&&(_e.platform.isFirefox||!globalThis.chrome),J=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,tt=typeof c.disableFontFace=="boolean"?c.disableFontFace:Ie,st=c.fontExtraProperties===!0,ct=c.enableXfa===!0,at=c.ownerDocument||globalThis.document,ut=c.disableRange===!0,N=c.disableStream===!0,H=c.disableAutoFetch===!0,et=c.pdfBug===!0,yt=c.CanvasFactory||(Ie?lE:aE),L=c.FilterFactory||(Ie?oE:rE),X=c.enableHWA===!0,Z=c.useWasm!==!1,Q=d?d.length:c.length??NaN,nt=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!Ie&&!tt,bt=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:!!(w===sy&&R===ay&&D===ry&&A&&x&&T&&Rr(A,document.baseURI)&&Rr(x,document.baseURI)&&Rr(T,document.baseURI)),ot=null;F1(y);const St={canvasFactory:new yt({ownerDocument:at,enableHWA:X}),filterFactory:new L({docId:e,ownerDocument:at}),cMapReaderFactory:bt?null:new w({baseUrl:A,isCompressed:v}),standardFontDataFactory:bt?null:new R({baseUrl:x}),wasmFactory:bt?null:new D({baseUrl:T})};g||(g=ga.create({verbosity:y,port:Fi.workerPort}),t._worker=g);const Dt={docId:e,apiVersion:"5.3.93",data:a,password:h,disableAutoFetch:H,rangeChunkSize:p,length:Q,docBaseUrl:b,enableXfa:ct,evaluatorOptions:{maxImageSize:U,disableFontFace:tt,ignoreErrors:C,isEvalSupported:F,isOffscreenCanvasSupported:V,isImageDecoderSupported:$,canvasMaxAreaInBytes:J,fontExtraProperties:st,useSystemFonts:nt,useWasm:Z,useWorkerFetch:bt,cMapUrl:A,iccUrl:E,standardFontDataUrl:x,wasmUrl:T}},ue={ownerDocument:at,pdfBug:et,styleElement:ot,loadingParams:{disableAutoFetch:H,enableXfa:ct}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const jt=g.messageHandler.sendWithPromise("GetDocRequest",Dt,a?[a.buffer]:null);let He;if(d)He=new RE(d,{disableRange:ut,disableStream:N});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Ze=Rr(s)?LE:Ie?HE:BE;He=new Ze({url:s,length:Q,httpHeaders:o,withCredentials:l,rangeChunkSize:p,disableRange:ut,disableStream:N})}return jt.then(Ze=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Lt=new Cr(e,Ze,g.port),Ft=new $E(Lt,t,He,ue,St);t._transport=Ft,Lt.send("Ready",null)})}).catch(t._capability.reject),t}class Sd{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Sd.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let wd=class{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,e,s=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=a}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const s of this.#a)s(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const s of this.#i)s(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Ht("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class XE{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class YE{#t=!1;constructor(t,e,s,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=a?new ey:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new qb,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new Yr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:a=Hn.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1}){this._stats?.time("Overall");const b=this._transport.getRenderingIntent(s,a,g,y),{renderingIntent:A,cacheKey:v}=b;this.#t=!1,h||=this._transport.getOptionalContentConfig(A);let w=this._intentStates.get(v);w||(w=Object.create(null),this._intentStates.set(v,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const E=!!(A&on.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b));const x=D=>{w.renderTasks.delete(R),E&&(this.#t=!0),this.#e(),D?(R.capability.reject(D),this._abortOperatorList({intentState:w,reason:D instanceof Error?D:new Error(D)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new ca({callback:x,params:{canvasContext:t,viewport:e,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:p});(w.renderTasks||=new Set).add(R);const T=R.task;return Promise.all([w.displayReadyCapability.promise,h]).then(([D,C])=>{if(this.destroyed){x();return}if(this._stats?.time("Rendering"),!(C.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:D,optionalContentConfig:C}),R.operatorListChanged()}).catch(x),T}getOperatorList({intent:t="display",annotationMode:e=Hn.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,s,a,!0);let h=this._intentStates.get(l.cacheKey);h||(h=Object.create(null),this._intentStates.set(l.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Br.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,a){function o(){l.read().then(function({value:d,done:p}){if(p){s(h);return}h.lang??=d.lang,Object.assign(h.styles,d.styles),h.items.push(...d.items),o()},a)}const l=e.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new ey),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const s=this._intentStates.get(e);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let s=0,a=t.length;s<a;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},l).getReader(),p=this._intentStates.get(e);p.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();this.#e()}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof Xl){let a=VE;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new ui(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Bi,xn,oi,cs,Bl,us,hs,ze,Dl,Vb,Xb,Mr,fa,Ll;const $t=class $t{constructor({name:t=null,port:e=null,verbosity:s=U1()}={}){On(this,ze);On(this,Bi,Promise.withResolvers());On(this,xn,null);On(this,oi,null);On(this,cs,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(Yt($t,hs).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Yt($t,hs).set(e,this),kn(this,ze,Vb).call(this,e)}else kn(this,ze,Xb).call(this)}get promise(){return Yt(this,Bi).promise}get port(){return Yt(this,oi)}get messageHandler(){return Yt(this,xn)}destroy(){this.destroyed=!0,Yt(this,cs)?.terminate(),Ye(this,cs,null),Yt($t,hs).delete(Yt(this,oi)),Ye(this,oi,null),Yt(this,xn)?.destroy(),Ye(this,xn,null)}static create(t){const e=Yt(this,hs).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new $t(t)}static get workerSrc(){if(Fi.workerSrc)return Fi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ct(this,"_setupFakeWorkerGlobal",(async()=>Yt(this,fa,Ll)?Yt(this,fa,Ll):(await import(this.workerSrc)).WorkerMessageHandler)())}};Bi=new WeakMap,xn=new WeakMap,oi=new WeakMap,cs=new WeakMap,Bl=new WeakMap,us=new WeakMap,hs=new WeakMap,ze=new WeakSet,Dl=function(){Yt(this,Bi).resolve(),Yt(this,xn).send("configure",{verbosity:this.verbosity})},Vb=function(t){Ye(this,oi,t),Ye(this,xn,new Cr("main","worker",t)),Yt(this,xn).on("ready",()=>{}),kn(this,ze,Dl).call(this)},Xb=function(){if(Yt($t,us)||Yt($t,fa,Ll)){kn(this,ze,Mr).call(this);return}let{workerSrc:t}=$t;try{$t._isSameOrigin(window.location,t)||(t=$t._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Cr("main","worker",e),a=()=>{o.abort(),s.destroy(),e.terminate(),this.destroyed?Yt(this,Bi).reject(new Error("Worker was destroyed")):kn(this,ze,Mr).call(this)},o=new AbortController;e.addEventListener("error",()=>{Yt(this,cs)||a()},{signal:o.signal}),s.on("test",h=>{if(o.abort(),this.destroyed||!h){a();return}Ye(this,xn,s),Ye(this,oi,e),Ye(this,cs,e),kn(this,ze,Dl).call(this)}),s.on("ready",h=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{kn(this,ze,Mr).call(this)}});const l=()=>{const h=new Uint8Array;s.send("test",h,[h.buffer])};l();return}catch{Vl("The worker has been disabled.")}kn(this,ze,Mr).call(this)},Mr=function(){Yt($t,us)||(At("Setting up fake worker."),Ye($t,us,!0)),$t._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Yt(this,Bi).reject(new Error("Worker was destroyed"));return}const e=new sE;Ye(this,oi,e);const s=`fake${Sm($t,Bl)._++}`,a=new Cr(s+"_worker",s,e);t.setup(a,e),Ye(this,xn,new Cr(s,s+"_worker",e)),kn(this,ze,Dl).call(this)}).catch(t=>{Yt(this,Bi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},fa=new WeakSet,Ll=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},On($t,fa),On($t,Bl,0),On($t,us,!1),On($t,hs,new WeakMap),Ie&&(Ye($t,us,!0),Fi.workerSrc||="./pdf.worker.mjs"),$t._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const a=new URL(e,s);return s.origin===a.origin},$t._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},$t.fromPort=t=>{if(Y1("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return $t.create(t)};let ga=$t;class $E{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#a=null;constructor(t,e,s,a,o){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new qb,this.fontLoader=new J1({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,e=null){const s=this.#t.get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return Ct(this,"annotationStorage",new md)}getRenderingIntent(t,e=Hn.ENABLE,s=null,a=!1,o=!1){let l=on.DISPLAY,h=qh;switch(t){case"any":l=on.ANY;break;case"display":break;case"print":l=on.PRINT;break;default:At(`getRenderingIntent - invalid intent: ${t}`)}const d=l&on.PRINT&&s instanceof Lb?s:this.annotationStorage;switch(e){case Hn.DISABLE:l+=on.ANNOTATIONS_DISABLE;break;case Hn.ENABLE:break;case Hn.ENABLE_FORMS:l+=on.ANNOTATIONS_FORMS;break;case Hn.ENABLE_STORAGE:l+=on.ANNOTATIONS_STORAGE,h=d.serializable;break;default:At(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(l+=on.IS_EDITING),o&&(l+=on.OPLIST);const{ids:p,hash:g}=d.modifiedIds,y=[l,h.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Pr.cleanup(),this._networkStream?.cancelAllRequests(new ui("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,a)=>{ge(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}ge(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{e.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,a)=>{ge(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:h}){if(h){a.close();return}ge(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new XE(s,this))}),t.on("DocException",s=>{e._capability.reject($e(s))}),t.on("PasswordRequest",s=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw $e(s);const a=o=>{o instanceof Error?this.#a.reject(o):this.#a.resolve({password:o})};e.onPassword(a,s.code)}catch(a){this.#a.reject(a)}return this.#a.promise}),t.on("DataLoaded",s=>{e.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const p=o.error;At(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,h=new tE(o,l);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&(h.data=null),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:d}=o;ge(d,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,g]of p.objs)if(g?.ref===d)return g.dataLen?(this.commonObjs.resolve(s,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,l])=>{if(this.destroyed)return;const h=this.#e.get(a);if(!h.objs.has(s)){if(h._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||e.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&At("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#n.get(e);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,t);const l=new YE(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#n.set(e,a),a}getPageIndex(t){return Vh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new TE(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new _E(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Pr.cleanup()}}cachedPageNumber(t){if(!Vh(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class KE{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ca{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:h,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new KE(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ca.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ca.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:a,transform:o,background:l}=this.params;this.gfx=new ua(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ca.#e.delete(this._canvas),t||=new Xl(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ca.#e.delete(this._canvas),this.callback())))}}const Ed="5.3.93",Yb="cbeef3233";function yy(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function xr(c){return Math.max(0,Math.min(255,255*c))}class by{static CMYK_G([t,e,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=xr(t),[t,t,t]}static G_HTML([t]){const e=yy(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(xr)}static RGB_HTML(t){return`#${t.map(yy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,s,a]){return[xr(1-Math.min(1,t+a)),xr(1-Math.min(1,s+a)),xr(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const a=1-t,o=1-e,l=1-s,h=Math.min(a,o,l);return["CMYK",a,o,l,h]}}class WE{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ht("Abstract method `_createSVG` called.")}}class Fr extends WE{_createSVG(t){return document.createElementNS(ri,t)}}class _d{static setupStorage(t,e,s,a,o){const l=a.getValue(e,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const h of s.children)h.attributes.value===l.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:a,linkService:o}){const{attributes:l}=e,h=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,p]of Object.entries(l))if(p!=null)switch(d){case"class":p.length&&t.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,p)}h&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,e,s)}static render(t){const e=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:s});const h=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}h&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);l.append(y),h&&Br.shouldBuildText(a.name)&&p.push(y)}return{textDivs:p}}const g=[[a,-1,l]];for(;g.length>0;){const[y,b,A]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const v=y.children[++g.at(-1)[1]];if(v===null)continue;const{name:w}=v;if(w==="#text"){const x=document.createTextNode(v.value);p.push(x),A.append(x);continue}const E=v?.attributes?.xmlns?document.createElementNS(v.attributes.xmlns,w):document.createElement(w);if(A.append(E),v.attributes&&this.setAttributes({html:E,element:v,storage:e,intent:o,linkService:s}),v.children?.length>0)g.push([v,-1,E]);else if(v.value){const x=document.createTextNode(v.value);h&&Br.shouldBuildText(w)&&p.push(x),E.append(x)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const QE=9,gs=new WeakSet;class vy{static create(t){switch(t.data.annotationType){case re.LINK:return new $b(t);case re.TEXT:return new ZE(t);case re.WIDGET:switch(t.data.fieldType){case"Tx":return new JE(t);case"Btn":return t.data.radioButton?new Kb(t):t.data.checkBox?new e_(t):new n_(t);case"Ch":return new i_(t);case"Sig":return new t_(t)}return new vs(t);case re.POPUP:return new Yh(t);case re.FREETEXT:return new Wb(t);case re.LINE:return new a_(t);case re.SQUARE:return new r_(t);case re.CIRCLE:return new o_(t);case re.POLYLINE:return new Qb(t);case re.CARET:return new c_(t);case re.INK:return new xd(t);case re.POLYGON:return new l_(t);case re.HIGHLIGHT:return new Zb(t);case re.UNDERLINE:return new u_(t);case re.SQUIGGLY:return new h_(t);case re.STRIKEOUT:return new d_(t);case re.STAMP:return new Jb(t);case re.FILEATTACHMENT:return new f_(t);default:return new ce(t)}}}class ce{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ce._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#i(e),this.#n?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:h,pageY:d}}}}=this;s?.splice(0,4,...t),e.left=`${100*(t[0]-h)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof vs||(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex++,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof Yh){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(w>0||E>0){const R=`calc(${w}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;l.borderRadius=R}else if(this instanceof Kb){const R=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=R}switch(e.borderStyle.style){case ra.SOLID:l.borderStyle="solid";break;case ra.DASHED:l.borderStyle="dashed";break;case ra.BEVELED:At("Unimplemented border style: beveled");break;case ra.INSET:At("Unimplemented border style: inset");break;case ra.UNDERLINE:l.borderBottomStyle="solid";break}const x=e.borderColor||null;x?(this.#e=!0,l.borderColor=ht.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):l.borderWidth=0}const p=ht.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:A}=a.rawDims;l.left=`${100*(p[0]-b)/g}%`,l.top=`${100*(p[1]-A)/y}%`;const{rotation:v}=e;return e.hasOwnCanvas||v===0?(l.width=`${100*h/g}%`,l.height=`${100*d/y}%`):this.setRotation(v,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/s}%`,e.style.height=`${100*l/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,a)=>{const o=a.detail[e],l=o[0],h=o.slice(1);a.target.style[s]=by[`${l}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[s]:by[`${l}_rgb`](h)})};return Ct(this,"_commonActions",{display:e=>{const{display:s}=e.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||s[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[a,o]of Object.entries(e)){const l=s[a];if(l){const h={detail:{[a]:o},target:t};l(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,a,o]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,E,x,R]=t.subarray(2,6);if(a===w&&o===E&&e===x&&s===R)return}const{style:l}=this.container;let h;if(this.#e){const{borderColor:w,borderWidth:E}=l;l.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=a-e,p=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const A=g.createElement("clipPath"),v=`clippath_${this.data.id}`;A.setAttribute("id",v),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let w=2,E=t.length;w<E;w+=8){const x=t[w],R=t[w+1],T=t[w+2],D=t[w+3],C=g.createElement("rect"),U=(T-e)/d,F=(o-R)/p,V=(x-T)/d,$=(R-D)/p;C.setAttribute("x",U),C.setAttribute("y",F),C.setAttribute("width",V),C.setAttribute("height",$),A.append(C),h?.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${F}" width="${V}" height="${$}"/>`)}this.#e&&(h.push("</g></svg>')"),l.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:t}=this,e=this.#n=new Yh({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){Ht("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:h}of a){if(o===-1||l===e)continue;const d=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${l}"]`);if(p&&!gs.has(p)){At(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:p})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==e&&gs.has(a)&&s.push({id:l,exportValue:o,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class $b extends ce{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action),a=!0):t.attachment?(this.#e(s,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(this.#n(s,t.setOCGState),a=!0):t.dest?(this._bindLink(s,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,s=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,s),!1),this.#t()}#n(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=s.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){At('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:a,refs:o,include:l}=e,h=[];if(a.length!==0||o.length!==0){const g=new Set(o);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:A}of b)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===l&&h.push(b)}else for(const g of Object.values(this._fieldObjects))h.push(...g);const d=this.annotationStorage,p=[];for(const g of h){const{id:y}=g;switch(p.push(y),g.type){case"text":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!gs.has(b)){At(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class ZE extends ce{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class vs extends ce{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return _e.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,a,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,e,s,a){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ht.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||QE,o=t.style;let l;const h=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(p/(Th*a))||1,y=p/g;l=Math.min(a,d(y/Th))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);l=Math.min(a,d(p/Th))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=ht.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class JE extends vs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=s),o.setValue(l.id,{[a]:s})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let h=a.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),gs.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const p=this.data.dateFormat||this.data.timeFormat;p&&(s.title=p),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",y=>{t.setValue(e,{value:y.target.value}),this.setPropertyOnSiblings(s,"value",y.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",y=>{const b=this.data.defaultFieldValue??"";s.value=d.userValue=b,d.formattedValue=null});let g=y=>{const{formattedValue:b}=d;b!=null&&(y.target.value=b),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",b=>{if(d.focused)return;const{target:A}=b;d.userValue&&(A.value=d.userValue),d.lastCommittedValue=A.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const A={value(v){d.userValue=v.detail.value??"",t.setValue(e,{value:d.userValue.toString()}),v.target.value=d.userValue},formattedValue(v){const{formattedValue:w}=v.detail;d.formattedValue=w,w!=null&&v.target!==document.activeElement&&(v.target.value=w),t.setValue(e,{formattedValue:w})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{const{charLimit:w}=v.detail,{target:E}=v;if(w===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",w);let x=d.userValue;!x||x.length<=w||(x=x.slice(0,w),E.value=d.userValue=x,t.setValue(e,{value:x}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(A,b)}),s.addEventListener("keydown",b=>{d.commitKey=1;let A=-1;if(b.key==="Escape"?A=0:b.key==="Enter"&&!this.data.multiLine?A=2:b.key==="Tab"&&(d.commitKey=3),A===-1)return;const{value:v}=b.target;d.lastCommittedValue!==v&&(d.lastCommittedValue=v,d.userValue=v,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:A,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const y=g;g=null,s.addEventListener("blur",b=>{if(!d.focused||!b.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:A}=b.target;d.userValue=A,d.lastCommittedValue!==A&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:d.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}),y(b)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",b=>{d.lastCommittedValue=null;const{data:A,target:v}=b,{value:w,selectionStart:E,selectionEnd:x}=v;let R=E,T=x;switch(b.inputType){case"deleteWordBackward":{const D=w.substring(0,E).match(/\w*[^\w]*$/);D&&(R-=D[0].length);break}case"deleteWordForward":{const D=w.substring(E).match(/^[^\w]*\w*/);D&&(T+=D[0].length);break}case"deleteContentBackward":E===x&&(R-=1);break;case"deleteContentForward":E===x&&(T+=1);break}b.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,change:A||"",willCommit:!1,selStart:R,selEnd:T}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${b}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class t_ extends vs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class e_ extends vs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return gs.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const p of this._getElementsByName(h,s)){const g=d&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const h=e.defaultFieldValue||"Off";l.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Kb extends vs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(s,{value:a})),a)for(const l of this._getElementsByName(e.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(gs.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const p of this._getElementsByName(h,s))t.setValue(p.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const h=e.defaultFieldValue;l.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",h=>{const d={value:p=>{const g=l===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class n_ extends $b{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class i_ extends vs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");gs.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),l=()=>{g.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const h=g=>{const y=g?"value":"textContent",{options:b,multiple:A}=a;return A?Array.prototype.filter.call(b,v=>v.selected).map(v=>v[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=h(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(b){l?.();const A=b.detail.value,v=new Set(Array.isArray(A)?A:[A]);for(const w of a.options)w.selected=v.has(w.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(b){a.multiple=!0},remove(b){const A=a.options,v=b.detail.remove;A[v].selected=!1,a.remove(v),A.length>0&&Array.prototype.findIndex.call(A,E=>E.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:h(!0),items:p(b)}),d=h(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(b){const{index:A,displayValue:v,exportValue:w}=b.detail.insert,E=a.children[A],x=document.createElement("option");x.textContent=v,x.value=w,E?E.before(x):a.append(x),t.setValue(e,{value:h(!0),items:p(b)}),d=h(!1)},items(b){const{items:A}=b.detail;for(;a.length!==0;)a.remove(0);for(const v of A){const{displayValue:w,exportValue:E}=v,x=document.createElement("option");x.textContent=w,x.value=E,a.append(x)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:p(b)}),d=h(!1)},indices(b){const A=new Set(b.detail.indices);for(const v of b.target.options)v.selected=A.has(v.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{const y=h(!0),b=h(!1);t.setValue(e,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Yh extends ce{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:ce._hasPopupData(e)}),this.elements=s,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new s_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${hd}${a}`).join(",")),this.container}}class s_{#t=this.#R.bind(this);#e=this.#T.bind(this);#n=this.#C.bind(this);#i=this.#E.bind(this);#a=null;#s=null;#o=null;#r=null;#h=null;#l=null;#d=null;#u=!1;#f=null;#p=null;#g=null;#c=null;#m=null;#y=null;#b=!1;constructor({container:t,color:e,elements:s,titleObj:a,modificationDate:o,contentsObj:l,richText:h,parent:d,rect:p,parentRect:g,open:y}){this.#s=t,this.#m=a,this.#o=l,this.#c=h,this.#l=d,this.#a=e,this.#g=p,this.#d=g,this.#h=s,this.#r=dd.toDateObject(o),this.trigger=s.flatMap(b=>b.getElementsToTriggerPopup());for(const b of this.trigger)b.addEventListener("click",this.#i),b.addEventListener("mouseenter",this.#n),b.addEventListener("mouseleave",this.#e),b.classList.add("popupTriggerArea");for(const b of s)b.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,y&&this.#E()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#a){const o=t.style.outlineColor=ht.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=this.#m,t.append(e),this.#r){const o=document.createElement("time");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#r.valueOf()})),o.dateTime=this.#r.toISOString(),e.append(o)}const a=this.#A;if(a)_d.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(this.#o);t.append(o)}this.#s.append(t)}get#A(){const t=this.#c,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#c.html||null}get#S(){return this.#A?.attributes?.style?.fontSize||0}get#w(){return this.#A?.attributes?.style?.color||null}#x(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#w,fontSize:this.#S?`calc(${this.#S}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return s}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let o=0,l=a.length;o<l;++o){const h=a[o];s.append(document.createTextNode(h)),o<l-1&&s.append(document.createElement("br"))}return s}#R(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#u)&&this.#E()}updateEdited({rect:t,popupContent:e}){this.#y||={contentsObj:this.#o,richText:this.#c},t&&(this.#p=null),e&&(this.#c=this.#x(e),this.#o=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#o,richText:this.#c}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#p=null)}#M(){if(this.#p!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:a,pageY:o}}}=this.#l;let l=!!this.#d,h=l?this.#d:this.#g;for(const v of this.#h)if(!h||ht.intersect(v.data.rect,h)!==null){h=v.data.rect,l=!0;break}const d=ht.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),g=l?h[2]-h[0]+5:0,y=d[0]+g,b=d[1];this.#p=[100*(y-a)/e,100*(b-o)/s];const{style:A}=this.#s;A.left=`${this.#p[0]}%`,A.top=`${this.#p[1]}%`}#E(){this.#u=!this.#u,this.#u?(this.#C(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#t)):(this.#T(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#t))}#C(){this.#f||this.render(),this.isVisible?this.#u&&this.#s.classList.add("focused"):(this.#M(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#T(){this.#s.classList.remove("focused"),!(this.#u||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#s.hidden=!0)}maybeShow(){this.#b&&(this.#f||this.#C(),this.#b=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class Wb extends ce{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=vt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class a_ extends ce{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class r_ extends ce{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class o_ extends ce{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",s/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Qb extends ce{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:s,popupRef:a},width:o,height:l}=this;if(!e)return this.container;const h=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,y=e.length;g<y;g+=2){const b=e[g]-t[0],A=t[3]-e[g+1];d.push(`${b},${A}`)}d=d.join(" ");const p=this.#t=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",d),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class l_ extends Qb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class c_ extends ce{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class xd extends ce{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?vt.HIGHLIGHT:vt.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:l,width:h,height:d}=this.#n(e,t),p=this.svgFactory.create(h,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");p.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),g.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:s,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),s)for(let l=0,h=this.#e.length;l<h;l++)this.#e[l].setAttribute("points",s[l].join(","));if(a){const{transform:l,width:h,height:d}=this.#n(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Zb extends ce{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=vt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class u_ extends ce{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class h_ extends ce{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class d_ extends ce{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Jb extends ce{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=vt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class f_ extends ce{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let s;e.hasAppearance||e.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:a}=_e.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Td=class tv{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:h}){this.div=t,this.#t=e,this.#e=s,this.#i=h||null,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,s){const a=t.firstChild||t,o=a.id=`${hd}${e}`,l=await this.#i?.getAriaAttributes(o);if(l)for(const[h,d]of l)a.setAttribute(h,d);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,s=this.div;Ui(s,this.viewport);const a=new Map,o={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Fr,annotationStorage:t.annotationStorage||new md,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const h=l.annotationType===re.POPUP;if(h){const g=a.get(l.id);if(!g)continue;o.elements=g}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=vy.create(o);if(!d.isRenderable)continue;if(!h&&l.popupRef){const g=a.get(l.popupRef);g?g.push(d):a.set(l.popupRef,[d])}const p=d.render();l.hidden&&(p.style.visibility="hidden"),await this.#a(p,l.id,o.elements),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#s()}async addLinkAnnotations(t,e){const s={data:null,layer:this.div,linkService:e,svgFactory:new Fr,parent:this};for(const a of t){a.borderStyle||=tv._defaultBorderStyle,s.data=a;const o=vy.create(s);if(!o.isRenderable)continue;const l=o.render();await this.#a(l,a.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Ui(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[e,s]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return Ct(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ra.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const El=/\r\n?|\n/g;class be extends dt{#t;#e="";#n=`${this.id}-editor`;#i=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=be.prototype,e=o=>o.isEmpty(),s=hi.TRANSLATE_SMALL,a=hi.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new Kr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=vt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||be._defaultColor||dt._defaultLineColor,this.#a=t.fontSize||be._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){dt.initialize(t,e);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Mt.FREETEXT_SIZE:be._defaultFontSize=e;break;case Mt.FREETEXT_COLOR:be._defaultColor=e;break}}updateParams(t,e){switch(t){case Mt.FREETEXT_SIZE:this.#s(e);break;case Mt.FREETEXT_COLOR:this.#o(e);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,be._defaultFontSize],[Mt.FREETEXT_COLOR,be._defaultColor||dt._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,this.#a],[Mt.FREETEXT_COLOR,this.#t]]}#s(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#a)*this.parentScale),this.#a=a,this.#h()},s=this.#a;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const e=a=>{this.#t=this.editorDiv.style.color=a},s=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-be._internalPadding*t,-(be._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const t=[];this.editorDiv.normalize();let e=null;for(const s of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(be.#l(s)),e=s);return t.join(`
`)}#h(){const[t,e]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,h=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/e):(this.width=s.height/t,this.height=s.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#r().trimEnd();if(t===e)return;const s=a=>{if(this.#e=a,!a){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{s(e)},undo:()=>{s(t)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){be._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,s.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[p,g]=this.pageDimensions,[y,b]=this.pageTranslation;let A,v;switch(this.rotation){case 0:A=t+(l[0]-y)/p,v=e+this.height-(l[1]-b)/g;break;case 90:A=t+(l[0]-y)/p,v=e-(l[1]-b)/g,[h,d]=[d,-h];break;case 180:A=t-this.width+(l[0]-y)/p,v=e-(l[1]-b)/g,[h,d]=[-h,-d];break;case 270:A=t+(l[0]-y-this.height*g)/p,v=e+(l[1]-b-this.width*p)/g,[h,d]=[-d,h];break}this.setAt(A*a,v*o,h,d)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(El,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:s}=e;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=be.#f(e.getData("text")||"").replaceAll(El,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:h,startOffset:d}=l,p=[],g=[];if(h.nodeType===Node.TEXT_NODE){const A=h.parentElement;if(g.push(h.nodeValue.slice(d).replaceAll(El,"")),A!==this.editorDiv){let v=p;for(const w of this.editorDiv.childNodes){if(w===A){v=g;continue}v.push(be.#l(w))}}p.push(h.nodeValue.slice(0,d).replaceAll(El,""))}else if(h===this.editorDiv){let A=p,v=0;for(const w of this.editorDiv.childNodes)v++===d&&(A=g),A.push(be.#l(w))}this.#e=`${p.join(`
`)}${a}${g.join(`
`)}`,this.#d();const y=new Range;let b=Math.sumPrecise(p.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const v=A.nodeValue.length;if(b<=v){y.setStart(A,b),y.setEnd(A,b);break}b-=v}o.removeAllRanges(),o.addRange(y)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#u(){return this.#e.replaceAll(" "," ")}static#f(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,s){let a=null;if(t instanceof Wb){const{data:{defaultAppearanceData:{fontSize:l,fontColor:h},rect:d,rotation:p,id:g,popupRef:y},textContent:b,textPosition:A,parent:{page:{pageNumber:v}}}=t;if(!b||b.length===0)return null;a=t={annotationType:vt.FREETEXT,color:Array.from(h),fontSize:l,value:b.join(`
`),position:A,pageIndex:v-1,rect:d.slice(0),rotation:p,annotationElementId:g,id:g,deleted:!1,popupRef:y}}const o=await super.deserialize(t,e,s);return o.#a=t.fontSize,o.#t=ht.makeHexColor(...t.color),o.#e=be.#f(t.value),o._initialData=a,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=be._internalPadding*this.parentScale,s=this.getRect(e,e),a=dt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),o={annotationType:vt.FREETEXT,color:a,fontSize:this.#a,value:this.#u(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!this.#p(o)?null:(o.id=this.annotationElementId,o)}#p(t){const{value:e,fontSize:s,color:a,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==s||t.color.some((l,h)=>l!==a[h])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:s}=e;s.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,s.color=this.#t,e.replaceChildren();for(const o of this.#e.split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),e.append(l)}const a=be._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class it{static PRECISION=1e-4;toSVGPath(){Ht("Abstract method `toSVGPath` must be implemented.")}get box(){Ht("Abstract getter `box` must be implemented.")}serialize(t,e){Ht("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,a,o,l){l||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)l[h]=e+t[h]*a,l[h+1]=s+t[h+1]*o;return l}static _rescaleAndSwap(t,e,s,a,o,l){l||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)l[h]=e+t[h+1]*a,l[h+1]=s+t[h]*o;return l}static _translate(t,e,s,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,a,o){switch(o){case 90:return[1-e/s,t/a];case 180:return[1-t/s,1-e/a];case 270:return[e/s,1-t/a];default:return[t/s,e/a]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,a,o,l){return[(t+5*s)/6,(e+5*a)/6,(5*s+o)/6,(5*a+l)/6,(s+o)/2,(a+l)/2]}}class ls{#t;#e=[];#n;#i;#a=[];#s=new Float32Array(18);#o;#r;#h;#l;#d;#u;#f=[];static#p=8;static#g=2;static#c=ls.#p+ls.#g;constructor({x:t,y:e},s,a,o,l,h=0){this.#t=s,this.#u=o*a,this.#i=l,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=h,this.#l=ls.#p*a,this.#h=ls.#c*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[s,a,o,l]=this.#t;return[(this.#o+(t[0]-e[0])/2-s)/o,(this.#r+(t[1]-e[1])/2-a)/l,(this.#o+(e[0]-t[0])/2-s)/o,(this.#r+(e[1]-t[1])/2-a)/l]}add({x:t,y:e}){this.#o=t,this.#r=e;const[s,a,o,l]=this.#t;let[h,d,p,g]=this.#s.subarray(8,12);const y=t-p,b=e-g,A=Math.hypot(y,b);if(A<this.#h)return!1;const v=A-this.#l,w=v/A,E=w*y,x=w*b;let R=h,T=d;h=p,d=g,p+=E,g+=x,this.#f?.push(t,e);const D=-x/v,C=E/v,U=D*this.#u,F=C*this.#u;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([p+U,g+F],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([p-U,g-F],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([h+U,d+F],2),this.#a.push(NaN,NaN,NaN,NaN,(h+U-s)/o,(d+F-a)/l),this.#s.set([h-U,d-F],14),this.#e.push(NaN,NaN,NaN,NaN,(h-U-s)/o,(d-F-a)/l)),this.#s.set([R,T,h,d,p,g],6),!this.isEmpty()):(this.#s.set([R,T,h,d,p,g],6),Math.abs(Math.atan2(T-d,R-h)-Math.atan2(x,E))<Math.PI/2?([h,d,p,g]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((h+p)/2-s)/o,((d+g)/2-a)/l),[h,d,R,T]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((R+h)/2-s)/o,((T+d)/2-a)/l),!0):([R,T,h,d,p,g]=this.#s.subarray(0,6),this.#a.push(((R+5*h)/6-s)/o,((T+5*d)/6-a)/l,((5*h+p)/6-s)/o,((5*d+g)/6-a)/l,((h+p)/2-s)/o,((d+g)/2-a)/l),[p,g,h,d,R,T]=this.#s.subarray(12,18),this.#e.push(((R+5*h)/6-s)/o,((T+5*d)/6-a)/l,((5*h+p)/6-s)/o,((5*d+g)/6-a)/l,((h+p)/2-s)/o,((d+g)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#A(s);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?s.push(`L${e[a+4]} ${e[a+5]}`):s.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#b(s),s.join(" ")}#y(){const[t,e,s,a]=this.#t,[o,l,h,d]=this.#m();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-e)/a} L${(this.#s[4]-t)/s} ${(this.#s[5]-e)/a} L${o} ${l} L${h} ${d} L${(this.#s[16]-t)/s} ${(this.#s[17]-e)/a} L${(this.#s[14]-t)/s} ${(this.#s[15]-e)/a} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#A(t){const[e,s,a,o]=this.#t,l=this.#s.subarray(4,6),h=this.#s.subarray(16,18),[d,p,g,y]=this.#m();t.push(`L${(l[0]-e)/a} ${(l[1]-s)/o} L${d} ${p} L${g} ${y} L${(h[0]-e)/a} ${(h[1]-s)/o}`)}newFreeDrawOutline(t,e,s,a,o,l){return new ev(t,e,s,a,o,l)}getOutlines(){const t=this.#a,e=this.#e,s=this.#s,[a,o,l,h]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-a)/l,d[y+1]=(this.#f[y+1]-o)/h;if(d[d.length-2]=(this.#o-a)/l,d[d.length-1]=(this.#r-o)/h,isNaN(s[6])&&!this.isEmpty())return this.#S(d);const p=new Float32Array(this.#a.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){p[y]=p[y+1]=NaN;continue}p[y]=t[y],p[y+1]=t[y+1]}g=this.#x(p,g);for(let y=e.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(e[y+b])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=e[y+b],p[g+1]=e[y+b+1],g+=2}return this.#w(p,g),this.newFreeDrawOutline(p,d,this.#t,this.#d,this.#n,this.#i)}#S(t){const e=this.#s,[s,a,o,l]=this.#t,[h,d,p,g]=this.#m(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-s)/o,(e[3]-a)/l,NaN,NaN,NaN,NaN,(e[4]-s)/o,(e[5]-a)/l,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(e[16]-s)/o,(e[17]-a)/l,NaN,NaN,NaN,NaN,(e[14]-s)/o,(e[15]-a)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#w(t,e){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6}#x(t,e){const s=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[o,l,h,d]=this.#t,[p,g,y,b]=this.#m();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/h,(s[1]-l)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-o)/h,(a[1]-l)/d],e),e+=24}}class ev extends it{#t;#e=new Float32Array(4);#n;#i;#a;#s;#o;constructor(t,e,s,a,o,l){super(),this.#o=t,this.#a=e,this.#t=s,this.#s=a,this.#n=o,this.#i=l,this.lastPoint=[NaN,NaN],this.#r(l);const[h,d,p,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-h)/p,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=e.length;y<b;y+=2)e[y]=(e[y]-h)/p,e[y+1]=(e[y+1]-d)/g}toSVGPath(){const t=[`M${this.#o[4]} ${this.#o[5]}`];for(let e=6,s=this.#o.length;e<s;e+=6){if(isNaN(this.#o[e])){t.push(`L${this.#o[e+4]} ${this.#o[e+5]}`);continue}t.push(`C${this.#o[e]} ${this.#o[e+1]} ${this.#o[e+2]} ${this.#o[e+3]} ${this.#o[e+4]} ${this.#o[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,s,a],o){const l=s-t,h=a-e;let d,p;switch(o){case 0:d=it._rescale(this.#o,t,a,l,-h),p=it._rescale(this.#a,t,a,l,-h);break;case 90:d=it._rescaleAndSwap(this.#o,t,e,l,h),p=it._rescaleAndSwap(this.#a,t,e,l,h);break;case 180:d=it._rescale(this.#o,s,e,-l,h),p=it._rescale(this.#a,s,e,-l,h);break;case 270:d=it._rescaleAndSwap(this.#o,s,a,-l,-h),p=it._rescaleAndSwap(this.#a,s,a,-l,-h);break}return{outline:Array.from(d),points:[Array.from(p)]}}#r(t){const e=this.#o;let s=e[4],a=e[5];const o=[s,a,s,a];let l=s,h=a;const d=t?Math.max:Math.min;for(let g=6,y=e.length;g<y;g+=6){const b=e[g+4],A=e[g+5];if(isNaN(e[g]))ht.pointBoundingBox(b,A,o),h<A?(l=b,h=A):h===A&&(l=d(l,b));else{const v=[1/0,1/0,-1/0,-1/0];ht.bezierBoundingBox(s,a,...e.slice(g,g+6),v),ht.rectBoundingBox(...v,o),h<v[3]?(l=v[2],h=v[3]):h===v[3]&&(l=d(l,v[2]))}s=b,a=A}const p=this.#e;p[0]=o[0]-this.#n,p[1]=o[1]-this.#n,p[2]=o[2]-o[0]+2*this.#n,p[3]=o[3]-o[1]+2*this.#n,this.lastPoint=[l,h]}get box(){return this.#e}newOutliner(t,e,s,a,o,l=0){return new ls(t,e,s,a,o,l)}getNewOutline(t,e){const[s,a,o,l]=this.#e,[h,d,p,g]=this.#t,y=o*p,b=l*g,A=s*p+h,v=a*g+d,w=this.newOutliner({x:this.#a[0]*y+A,y:this.#a[1]*b+v},this.#t,this.#s,t,this.#i,e??this.#n);for(let E=2;E<this.#a.length;E+=2)w.add({x:this.#a[E]*y+A,y:this.#a[E+1]*b+v});return w.getOutlines()}}class $h{#t;#e;#n=[];#i=[];constructor(t,e=0,s=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:A,y:v,width:w,height:E}of t){const x=Math.floor((A-e)/l)*l,R=Math.ceil((A+w+e)/l)*l,T=Math.floor((v-e)/l)*l,D=Math.ceil((v+E+e)/l)*l,C=[x,T,D,!0],U=[R,T,D,!1];this.#n.push(C,U),ht.rectBoundingBox(x,T,R,D,o)}const h=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,p=o[0]-s,g=o[1]-s,y=this.#n.at(a?-1:-2),b=[y[0],y[2]];for(const A of this.#n){const[v,w,E]=A;A[0]=(v-p)/h,A[1]=(w-g)/d,A[2]=(E-g)/d}this.#t=new Float32Array([p,g,h,d]),this.#e=b}getOutlines(){this.#n.sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#h(e)),this.#o(e)):(this.#r(e),t.push(...this.#h(e)));return this.#a(t)}#a(t){const e=[],s=new Set;for(const l of t){const[h,d,p]=l;e.push([h,d,l],[h,p,l])}e.sort((l,h)=>l[1]-h[1]||l[0]-h[0]);for(let l=0,h=e.length;l<h;l+=2){const d=e[l][2],p=e[l+1][2];d.push(p),p.push(d),s.add(d),s.add(p)}const a=[];let o;for(;s.size>0;){const l=s.values().next().value;let[h,d,p,g,y]=l;s.delete(l);let b=h,A=d;for(o=[h,p],a.push(o);;){let v;if(s.has(g))v=g;else if(s.has(y))v=y;else break;s.delete(v),[h,d,p,g,y]=v,b!==h&&(o.push(b,A,h,A===d?d:p),b=h),A=A===d?p:d}o.push(b,A)}return new p_(a,this.#t,this.#e)}#s(t){const e=this.#i;let s=0,a=e.length-1;for(;s<=a;){const o=s+a>>1,l=e[o][0];if(l===t)return o;l<t?s=o+1:a=o-1}return a+1}#o([,t,e]){const s=this.#s(t);this.#i.splice(s,0,[t,e])}#r([,t,e]){const s=this.#s(t);for(let a=s;a<this.#i.length;a++){const[o,l]=this.#i[a];if(o!==t)break;if(o===t&&l===e){this.#i.splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,l]=this.#i[a];if(o!==t)break;if(o===t&&l===e){this.#i.splice(a,1);return}}}#h(t){const[e,s,a]=t,o=[[e,s,a]],l=this.#s(a);for(let h=0;h<l;h++){const[d,p]=this.#i[h];for(let g=0,y=o.length;g<y;g++){const[,b,A]=o[g];if(!(p<=b||A<=d)){if(b>=d){if(A>p)o[g][1]=p;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,A>p&&o.push([e,p,A])}}}return o}}class p_ extends it{#t;#e;constructor(t,e,s){super(),this.#e=t,this.#t=e,this.lastPoint=s}toSVGPath(){const t=[];for(const e of this.#e){let[s,a]=e;t.push(`M${s} ${a}`);for(let o=2;o<e.length;o+=2){const l=e[o],h=e[o+1];l===s?(t.push(`V${h}`),a=h):h===a&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,e,s,a],o){const l=[],h=s-t,d=a-e;for(const p of this.#e){const g=new Array(p.length);for(let y=0;y<p.length;y+=2)g[y]=t+p[y]*h,g[y+1]=a-p[y+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Kh extends ls{newFreeDrawOutline(t,e,s,a,o,l){return new g_(t,e,s,a,o,l)}}class g_ extends ev{newOutliner(t,e,s,a,o,l=0){return new Kh(t,e,s,a,o,l)}}class ln{#t=null;#e=null;#n;#i=null;#a=!1;#s=!1;#o=null;#r;#h=null;#l=null;#d;static#u=null;static get _keyboardManager(){return Ct(this,"_keyboardManager",new Kr([[["Escape","mac+Escape"],ln.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ln.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ln.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ln.prototype._moveToPrevious],[["Home","mac+Home"],ln.prototype._moveToBeginning],[["End","mac+End"],ln.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#d=Mt.HIGHLIGHT_COLOR,this.#o=t):(this.#s=!0,this.#d=Mt.HIGHLIGHT_DEFAULT_COLOR),this.#l=t?._uiManager||e,this.#r=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",ln.#u||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#o&&(t.ariaControls=`${this.#o.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#c.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#f();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#f(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Sn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#o&&(t.id=`${this.#o.id}_colorpicker_dropdown`);for(const[s,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",ln.#u[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#n,o.addEventListener("click",this.#p.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#r.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#c(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#y){this.#c(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#c(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#y){this.#c(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#y){this.#c(t);return}this.#i.lastChild?.focus()}#g(t){ln._keyboardManager.exec(this,t)}#c(t){if(this.#y){this.hideDropdown();return}if(this.#a=t.detail===0,this.#h||(this.#h=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#l.combinedSignal(this.#h)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#f();this.#t.append(e)}#m(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#h?.abort(),this.#h=null}get#y(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#y){this.#o?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class oe extends dt{#t=null;#e=0;#n;#i=null;#a=null;#s=null;#o=null;#r=0;#h=null;#l=null;#d=null;#u=!1;#f=null;#p;#g=null;#c="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=vt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=oe.prototype;return Ct(this,"_keyboardManager",new Kr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||oe._defaultColor,this.#m=t.thickness||oe._defaultThickness,this.#p=t.opacity||oe._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#c=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#A(t),this.#M()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#o=t.focusNode,this.#r=t.focusOffset,this.#b(),this.#M(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new $h(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new $h(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:s}=this.#s;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#A({highlightOutlines:t,highlightId:e,clipPathId:s}){this.#l=t;const a=1.5;if(this.#s=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#d=e,this.#i=s,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:oe.#E(this.#l.box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:oe.#E(this.#s.box,g),path:{d:this.#s.toSVGPath()}})}const[o,l,h,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=h,this.height=d;break;case 90:{const[g,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=h*y/g,this.height=d*g/y;break}case 180:this.x=1-o,this.y=1-l,this.width=h,this.height=d;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=h*y/g,this.height=d*g/y;break}}const{lastPoint:p}=this.#s;this.#f=[(p[0]-o)/h,(p[1]-l)/d]}static initialize(t,e){dt.initialize(t,e),oe._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Mt.HIGHLIGHT_DEFAULT_COLOR:oe._defaultColor=e;break;case Mt.HIGHLIGHT_THICKNESS:oe._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case Mt.HIGHLIGHT_COLOR:this.#S(e);break;case Mt.HIGHLIGHT_THICKNESS:this.#w(e);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_DEFAULT_COLOR,oe._defaultColor],[Mt.HIGHLIGHT_THICKNESS,oe._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||oe._defaultColor],[Mt.HIGHLIGHT_THICKNESS,this.#m||oe._defaultThickness],[Mt.HIGHLIGHT_FREE,this.#u]]}#S(t){const e=(o,l)=>{this.color=o,this.#p=l,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:o,"fill-opacity":l}}),this.#a?.updateColor(o)},s=this.color,a=this.#p;this.addCommands({cmd:e.bind(this,t,oe._defaultOpacity),undo:e.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#w(t){const e=this.#m,s=a=>{this.#m=a,this.#x(a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new ln({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#L())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#L())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#R(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#R():t&&(this.#M(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){if(!this.#u)return;this.#A({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,s]=this.parentDimensions;this.setDims(this.width*e,this.height*s)}#R(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#M(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#u),this.#h&&(this.#h.style.clipPath=this.#i))}static#E([t,e,s,a],o){switch(o){case 90:return[1-e-a,t,a,s];case 180:return[1-t-s,1-e-a,s,a];case 270:return[e,1-t-s,a,s]}return[t,e,s,a]}rotate(t){const{drawLayer:e}=this.parent;let s;this.#u?(t=(t-this.rotation+360)%360,s=oe.#E(this.#l.box,t)):s=oe.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:oe.#E(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#c&&(t.setAttribute("aria-label",this.#c),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#C.bind(this),{signal:this._uiManager._signal});const e=this.#h=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),Mb(this,this.#h,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#C(t){oe._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#o,this.#r)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#u||this.#T(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#L(){return this.#u?this.rotation:0}#N(){if(this.#u)return null;const[t,e]=this.pageDimensions,[s,a]=this.pageTranslation,o=this.#n,l=new Float32Array(o.length*8);let h=0;for(const{x:d,y:p,width:g,height:y}of o){const b=d*t+s,A=(1-p)*e+a;l[h]=l[h+4]=b,l[h+1]=l[h+3]=A,l[h+2]=l[h+6]=b+g*t,l[h+5]=l[h+7]=A-y*e,h+=8}return l}#O(t){return this.#l.serialize(t,this.#L())}static startHighlighting(t,e,{target:s,x:a,y:o}){const{x:l,y:h,width:d,height:p}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=A=>{g.abort(),this.#_(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",le,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Sn,{signal:y}),s.addEventListener("pointermove",this.#z.bind(this,t),{signal:y}),this._freeHighlight=new Kh({x:a,y:o},[l,h,d,p],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#z(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#_(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,s){let a=null;if(t instanceof Zb){const{data:{quadPoints:v,rect:w,rotation:E,id:x,color:R,opacity:T,popupRef:D},parent:{page:{pageNumber:C}}}=t;a=t={annotationType:vt.HIGHLIGHT,color:Array.from(R),opacity:T,quadPoints:v,boxes:null,pageIndex:C-1,rect:w.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,popupRef:D}}else if(t instanceof xd){const{data:{inkLists:v,rect:w,rotation:E,id:x,color:R,borderStyle:{rawWidth:T},popupRef:D},parent:{page:{pageNumber:C}}}=t;a=t={annotationType:vt.HIGHLIGHT,color:Array.from(R),thickness:T,inkLists:v,boxes:null,pageIndex:C-1,rect:w.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,popupRef:D}}const{color:o,quadPoints:l,inkLists:h,opacity:d}=t,p=await super.deserialize(t,e,s);p.color=ht.makeHexColor(...o),p.#p=d||1,h&&(p.#m=t.thickness),p._initialData=a;const[g,y]=p.pageDimensions,[b,A]=p.pageTranslation;if(l){const v=p.#n=[];for(let w=0;w<l.length;w+=8)v.push({x:(l[w]-b)/g,y:1-(l[w+1]-A)/y,width:(l[w+2]-l[w])/g,height:(l[w+1]-l[w+5])/y});p.#b(),p.#M(),p.rotate(p.rotation)}else if(h){p.#u=!0;const v=h[0],w={x:v[0]-b,y:y-(v[1]-A)},E=new Kh(w,[0,0,g,y],1,p.#m/2,!0,.001);for(let T=0,D=v.length;T<D;T+=2)w.x=v[T]-b,w.y=y-(v[T+1]-A),E.add(w);const{id:x,clipPathId:R}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);p.#A({highlightOutlines:E.getOutlines(),highlightId:x,clipPathId:R}),p.#M(),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),s=dt._colorManager.convert(this.color),a={annotationType:vt.HIGHLIGHT,color:s,opacity:this.#p,thickness:this.#m,quadPoints:this.#N(),outlines:this.#O(e),pageIndex:this.pageIndex,rect:e,rotation:this.#L(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#v(a)?null:(a.id=this.annotationElementId,a)}#v(t){const{color:e}=this._initialData;return t.color.some((s,a)=>s!==e[a])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class nv{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Ht("Not implemented")}}class gt extends dt{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static#s=NaN;static#o=null;static#r=null;static#h=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#c(t.box)}#d(t,e){const{id:s}=e.drawLayer.draw(gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,e){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Ht("Not implemented")}static get typesMap(){Ht("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,e),this._currentParent&&(gt.#n.updateProperty(s,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,e[a]]);return t}_updateProperty(t,e,s){const a=this._drawingOptions,o=a[e],l=h=>{a.updateProperty(e,h);const d=this.#t.updateProperty(e,h);d&&this.#c(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#g()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#g()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#c(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#p([t,e,s,a]){const{parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[e,1-t,s*(l/o),a*(o/l)];case 180:return[1-t,1-e,s,a];case 270:return[1-e,t,s*(l/o),a*(o/l)];default:return[t,e,s,a]}}#g(){const{x:t,y:e,width:s,height:a,parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[1-e,t,s*(o/l),a*(l/o)];case 180:return[1-t,1-e,s,a];case 270:return[e,1-t,s*(o/l),a*(l/o)];default:return[t,e,s,a]}}#c(t){if([this.x,this.y,this.width,this.height]=this.#p(t),this.div){this.fixAndSetPosition();const[e,s]=this.parentDimensions;this.setDims(this.width*e,this.height*s)}this._onResized()}#m(){const{x:t,y:e,width:s,height:a,rotation:o,parentRotation:l,parentDimensions:[h,d]}=this;switch((o*4+l)/90){case 1:return[1-e-a,t,a,s];case 2:return[1-t-s,1-e-a,s,a];case 3:return[e,1-t-s,a,s];case 4:return[t,e-s*(h/d),a*(d/h),s*(h/d)];case 5:return[1-e,t,s*(h/d),a*(d/h)];case 6:return[1-t-a*(d/h),1-e,a*(d/h),s*(h/d)];case 7:return[e-s*(h/d),1-t-a*(d/h),s*(h/d),a*(d/h)];case 8:return[t-s,e-a,s,a];case 9:return[1-e,t-s,a,s];case 10:return[1-t,1-e,s,a];case 11:return[e-a,1-t,a,s];case 12:return[t-a*(d/h),e,a*(d/h),s*(h/d)];case 13:return[1-e-s*(h/d),t-a*(d/h),s*(h/d),a*(d/h)];case 14:return[1-t,1-e-s*(h/d),a*(d/h),s*(h/d)];case 15:return[e,1-t,s*(h/d),a*(d/h)];default:return[t,e,s,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#c(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),s}static createDrawerInstance(t,e,s,a,o){Ht("Not implemented")}static startDrawing(t,e,s,a){const{target:o,offsetX:l,offsetY:h,pointerId:d,pointerType:p}=a;if(gt.#o&&gt.#o!==p)return;const{viewport:{rotation:g}}=t,{width:y,height:b}=o.getBoundingClientRect(),A=gt.#i=new AbortController,v=t.combinedSignal(A);if(gt.#s||=d,gt.#o??=p,window.addEventListener("pointerup",w=>{gt.#s===w.pointerId?this._endDraw(w):gt.#r?.delete(w.pointerId)},{signal:v}),window.addEventListener("pointercancel",w=>{gt.#s===w.pointerId?this._currentParent.endDrawingSession():gt.#r?.delete(w.pointerId)},{signal:v}),window.addEventListener("pointerdown",w=>{gt.#o===w.pointerType&&((gt.#r||=new Set).add(w.pointerId),gt.#n.isCancellable()&&(gt.#n.removeLastElement(),gt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Sn,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",w=>{w.timeStamp===gt.#h&&le(w)},{signal:v}),t.toggleDrawing(),e._editorUndoBar?.hide(),gt.#n){t.drawLayer.updateProperties(this._currentDrawId,gt.#n.startNew(l,h,y,b,g));return}e.updateUIForDefaultProperties(this),gt.#n=this.createDrawerInstance(l,h,y,b,g),gt.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(gt.#a.toSVGProperties(),gt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(gt.#h=-1,!gt.#n)return;const{offsetX:e,offsetY:s,pointerId:a}=t;if(gt.#s===a){if(gt.#r?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,gt.#n.add(e,s)),gt.#h=t.timeStamp,le(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,gt.#n=null,gt.#a=null,gt.#o=null,gt.#h=NaN),gt.#i&&(gt.#i.abort(),gt.#i=null,gt.#s=NaN,gt.#r=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,gt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=gt.#n,a=this._currentDrawId,o=s.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Mt.DRAW_STEP),!gt.#n.isEmpty()){const{pageDimensions:[s,a],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:gt.#n.getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:gt.#a,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,s,a,o,l){Ht("Not implemented")}static async deserialize(t,e,s){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:h}}=e.viewport,d=this.deserializeDraw(l,h,a,o,this._INNER_MARGIN,t),p=await super.deserialize(t,e,s);return p.createDrawingOptions(t),p.#l({drawOutlines:d}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[e,s]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class m_{#t=new Float64Array(6);#e;#n;#i;#a;#s;#o="";#r=0;#h=new Zr;#l;#d;constructor(t,e,s,a,o,l){this.#l=s,this.#d=a,this.#i=o,this.#a=l,[t,e]=this.#u(t,e);const h=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#n=[{line:h,points:this.#s}],this.#t.set(h,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#u(t,e){return it._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#u(t,e);const[s,a,o,l]=this.#t.subarray(2,6),h=t-o,d=e-l;return Math.hypot(this.#l*h,this.#d*d)<=2?null:(this.#s.push(t,e),isNaN(s)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,a,o,l,t,e],0),this.#e.push(...it.createBezierPoints(s,a,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,a,o){this.#l=s,this.#d=a,this.#i=o,[t,e]=this.#u(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const h=this.#n.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#n.push({line:l,points:this.#s}),this.#t.set(l,0),this.#r=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#r=0,{path:{d:this.toSVGPath()}}):this.#h.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#h.removeLastElement();this.#n.pop(),this.#o="";for(let t=0,e=this.#n.length;t<e;t++){const{line:s,points:a}=this.#n[t];this.#e=s,this.#s=a,this.#r=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const t=it.svgRound(this.#e[4]),e=it.svgRound(this.#e[5]);if(this.#s.length===2)return this.#o=`${this.#o} M ${t} ${e} Z`,this.#o;if(this.#s.length<=6){const a=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,a)} M ${t} ${e}`,this.#r=6}if(this.#s.length===4){const a=it.svgRound(this.#e[10]),o=it.svgRound(this.#e[11]);return this.#o=`${this.#o} L ${a} ${o}`,this.#r=12,this.#o}const s=[];this.#r===0&&(s.push(`M ${t} ${e}`),this.#r=6);for(let a=this.#r,o=this.#e.length;a<o;a+=6){const[l,h,d,p,g,y]=this.#e.slice(a,a+6).map(it.svgRound);s.push(`C${l} ${h} ${d} ${p} ${g} ${y}`)}return this.#o+=s.join(" "),this.#r=this.#e.length,this.#o}getOutlines(t,e,s,a){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#h.build(this.#n,t,e,s,this.#i,this.#a,a),this.#t=null,this.#e=null,this.#n=null,this.#o=null,this.#h}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Zr extends it{#t;#e=0;#n;#i;#a;#s;#o;#r;#h;build(t,e,s,a,o,l,h){this.#a=e,this.#s=s,this.#o=a,this.#r=o,this.#h=l,this.#n=h??0,this.#i=t,this.#u()}get thickness(){return this.#h}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${it.svgRound(e[4])} ${it.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${it.svgRound(e[10])} ${it.svgRound(e[11])}`);continue}for(let s=6,a=e.length;s<a;s+=6){const[o,l,h,d,p,g]=e.subarray(s,s+6).map(it.svgRound);t.push(`C${o} ${l} ${h} ${d} ${p} ${g}`)}}return t.join("")}serialize([t,e,s,a],o){const l=[],h=[],[d,p,g,y]=this.#d();let b,A,v,w,E,x,R,T,D;switch(this.#r){case 0:D=it._rescale,b=t,A=e+a,v=s,w=-a,E=t+d*s,x=e+(1-p-y)*a,R=t+(d+g)*s,T=e+(1-p)*a;break;case 90:D=it._rescaleAndSwap,b=t,A=e,v=s,w=a,E=t+p*s,x=e+d*a,R=t+(p+y)*s,T=e+(d+g)*a;break;case 180:D=it._rescale,b=t+s,A=e,v=-s,w=a,E=t+(1-d-g)*s,x=e+p*a,R=t+(1-d)*s,T=e+(p+y)*a;break;case 270:D=it._rescaleAndSwap,b=t+s,A=e+a,v=-s,w=-a,E=t+(1-p-y)*s,x=e+(1-d-g)*a,R=t+(1-p)*s,T=e+(1-d)*a;break}for(const{line:C,points:U}of this.#i)l.push(D(C,b,A,v,w,o?new Array(C.length):null)),h.push(D(U,b,A,v,w,o?new Array(U.length):null));return{lines:l,points:h,rect:[E,x,R,T]}}static deserialize(t,e,s,a,o,{paths:{lines:l,points:h},rotation:d,thickness:p}){const g=[];let y,b,A,v,w;switch(d){case 0:w=it._rescale,y=-t/s,b=e/a+1,A=1/s,v=-1/a;break;case 90:w=it._rescaleAndSwap,y=-e/a,b=-t/s,A=1/a,v=1/s;break;case 180:w=it._rescale,y=t/s+1,b=-e/a,A=-1/s,v=1/a;break;case 270:w=it._rescaleAndSwap,y=e/a+1,b=t/s+1,A=-1/a,v=-1/s;break}if(!l){l=[];for(const x of h){const R=x.length;if(R===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(R===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const T=new Float32Array(3*(R-2));l.push(T);let[D,C,U,F]=x.subarray(0,4);T.set([NaN,NaN,NaN,NaN,D,C],0);for(let V=4;V<R;V+=2){const $=x[V],J=x[V+1];T.set(it.createBezierPoints(D,C,U,F,$,J),(V-2)*3),[D,C,U,F]=[U,F,$,J]}}}for(let x=0,R=l.length;x<R;x++)g.push({line:w(l[x].map(T=>T??NaN),y,b,A,v),points:w(h[x].map(T=>T??NaN),y,b,A,v)});const E=new this.prototype.constructor;return E.build(g,s,a,1,d,p,o),E}#l(t=this.#h){const e=this.#n+t/2*this.#o;return this.#r%180===0?[e/this.#a,e/this.#s]:[e/this.#s,e/this.#a]}#d(){const[t,e,s,a]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,s-2*o,a-2*l]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#i){if(a.length<=12){for(let h=4,d=a.length;h<d;h+=6)ht.pointBoundingBox(a[h],a[h+1],t);continue}let o=a[4],l=a[5];for(let h=6,d=a.length;h<d;h+=6){const[p,g,y,b,A,v]=a.subarray(h,h+6);ht.bezierBoundingBox(o,l,p,g,y,b,A,v,t),o=A,l=v}}const[e,s]=this.#l();t[0]=ke(t[0]-e,0,1),t[1]=ke(t[1]-s,0,1),t[2]=ke(t[2]+e,0,1),t[3]=ke(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,s]=this.#l();this.#h=t;const[a,o]=this.#l(),[l,h]=[a-e,o-s],d=this.#t;return d[0]-=l,d[1]-=h,d[2]+=2*l,d[3]+=2*h,d}updateParentDimensions([t,e],s){const[a,o]=this.#l();this.#a=t,this.#s=e,this.#o=s;const[l,h]=this.#l(),d=l-a,p=h-o,g=this.#t;return g[0]-=d,g[1]-=p,g[2]+=2*d,g[3]+=2*p,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(it.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let s=0,a=0,o=0,l=0,h=0,d=0;switch(this.#e){case 90:a=e/t,o=-t/e,h=t;break;case 180:s=-1,l=-1,h=t,d=e;break;case 270:a=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${s} ${a} ${o} ${l} ${it.svgRound(h)} ${it.svgRound(d)})`}getPathResizingSVGProperties([t,e,s,a]){const[o,l]=this.#l(),[h,d,p,g]=this.#t;if(Math.abs(p-o)<=it.PRECISION||Math.abs(g-l)<=it.PRECISION){const w=t+s/2-(h+p/2),E=e+a/2-(d+g/2);return{path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(e)}`,transform:`${this.rotationTransform} translate(${w} ${E})`}}}const y=(s-2*o)/(p-2*o),b=(a-2*l)/(g-2*l),A=p/s,v=g/a;return{path:{"transform-origin":`${it.svgRound(h)} ${it.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${v}) translate(${it.svgRound(o)} ${it.svgRound(l)}) scale(${y} ${b}) translate(${it.svgRound(-o)} ${it.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,s,a]){const[o,l]=this.#l(),h=this.#t,[d,p,g,y]=h;if(h[0]=t,h[1]=e,h[2]=s,h[3]=a,Math.abs(g-o)<=it.PRECISION||Math.abs(y-l)<=it.PRECISION){const E=t+s/2-(d+g/2),x=e+a/2-(p+y/2);for(const{line:R,points:T}of this.#i)it._translate(R,E,x,R),it._translate(T,E,x,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(g-2*o),A=(a-2*l)/(y-2*l),v=-b*(d+o)+t+o,w=-A*(p+l)+e+l;if(b!==1||A!==1||v!==0||w!==0)for(const{line:E,points:x}of this.#i)it._rescale(E,v,w,b,A,E),it._rescale(x,v,w,b,A,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],s){const[a,o]=s,l=this.#t,h=t-l[0],d=e-l[1];if(this.#a===a&&this.#s===o)for(const{line:p,points:g}of this.#i)it._translate(p,h,d,p),it._translate(g,h,d,g);else{const p=this.#a/a,g=this.#s/o;this.#a=a,this.#s=o;for(const{line:y,points:b}of this.#i)it._rescale(y,h,d,p,g,y),it._rescale(b,h,d,p,g,b);l[2]*=p,l[3]*=g}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t)} ${it.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t[0])} ${it.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Kl extends nv{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:dt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Kl(this._viewParameters);return t.updateAll(this),t}}class Rd extends gt{static _type="ink";static _editorType=vt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){dt.initialize(t,e),this._defaultDrawingOptions=new Kl(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ct(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,s,a,o){return new m_(t,e,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,s,a,o,l){return Zr.deserialize(t,e,s,a,o,l)}static async deserialize(t,e,s){let a=null;if(t instanceof xd){const{data:{inkLists:l,rect:h,rotation:d,id:p,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:A},parent:{page:{pageNumber:v}}}=t;a=t={annotationType:vt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:l},boxes:null,pageIndex:v-1,rect:h.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:A}}const o=await super.deserialize(t,e,s);return o._initialData=a,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:s}=this;e.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:s}){this._drawingOptions=Rd.getDefaultDrawingOptions({stroke:ht.makeHexColor(...t),"stroke-width":e,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:s,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":h}}=this,d={annotationType:vt.INK,color:dt._colorManager.convert(o),opacity:l,thickness:h,paths:{lines:e,points:s},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(d.isCopy=!0,d):this.annotationElementId&&!this.#t(d)?null:(d.id=this.annotationElementId,d)}#t(t){const{color:e,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((l,h)=>l!==e[h])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){const{points:e,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:e}),null}}class Wh extends Zr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const _l=8,Tr=3;class rs{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,s,a){return s-=t,a-=e,s===0?a>0?0:4:s===1?a+6:2-a}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,s,a,o,l,h){const d=this.#e(s,a,o,l);for(let p=0;p<8;p++){const g=(-p+d-h+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*e+(a+b)]!==0)return g}return-1}static#a(t,e,s,a,o,l,h){const d=this.#e(s,a,o,l);for(let p=0;p<8;p++){const g=(p+d+h+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*e+(a+b)]!==0)return g}return-1}static#s(t,e,s,a){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=a?1:0;for(let g=1;g<s-1;g++)l[g*e]=l[g*e+e-1]=0;for(let g=0;g<e;g++)l[g]=l[e*s-1-g]=0;let h=1,d;const p=[];for(let g=1;g<s-1;g++){d=1;for(let y=1;y<e-1;y++){const b=g*e+y,A=l[b];if(A===0)continue;let v=g,w=y;if(A===1&&l[b-1]===0)h+=1,w-=1;else if(A>=1&&l[b+1]===0)h+=1,w+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const E=[y,g],x=w===y+1,R={isHole:x,points:E,id:h,parent:0};p.push(R);let T;for(const tt of p)if(tt.id===d){T=tt;break}T?T.isHole?R.parent=x?T.parent:d:R.parent=x?d:T.parent:R.parent=x?d:0;const D=this.#i(l,e,g,y,v,w,0);if(D===-1){l[b]=-h,l[b]!==1&&(d=Math.abs(l[b]));continue}let C=this.#n[2*D],U=this.#n[2*D+1];const F=g+C,V=y+U;v=F,w=V;let $=g,J=y;for(;;){const tt=this.#a(l,e,$,J,v,w,1);C=this.#n[2*tt],U=this.#n[2*tt+1];const st=$+C,ct=J+U;E.push(ct,st);const at=$*e+J;if(l[at+1]===0?l[at]=-h:l[at]===1&&(l[at]=h),st===g&&ct===y&&$===F&&J===V){l[b]!==1&&(d=Math.abs(l[b]));break}else v=$,w=J,$=st,J=ct}}}return p}static#o(t,e,s,a){if(s-e<=4){for(let F=e;F<s-2;F+=2)a.push(t[F],t[F+1]);return}const o=t[e],l=t[e+1],h=t[s-4]-o,d=t[s-3]-l,p=Math.hypot(h,d),g=h/p,y=d/p,b=g*l-y*o,A=d/h,v=1/p,w=Math.atan(A),E=Math.cos(w),x=Math.sin(w),R=v*(Math.abs(E)+Math.abs(x)),T=v*(1-R+R**2),D=Math.max(Math.atan(Math.abs(x+E)*T),Math.atan(Math.abs(x-E)*T));let C=0,U=e;for(let F=e+2;F<s-2;F+=2){const V=Math.abs(b-g*t[F+1]+y*t[F]);V>C&&(U=F,C=V)}C>(p*D)**2?(this.#o(t,e,U+2,a),this.#o(t,U,s,a)):a.push(o,l)}static#r(t){const e=[],s=t.length;return this.#o(t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e}static#h(t,e,s,a,o,l){const h=new Float32Array(l**2),d=-2*a**2,p=l>>1;for(let w=0;w<l;w++){const E=(w-p)**2;for(let x=0;x<l;x++)h[w*l+x]=Math.exp((E+(x-p)**2)/d)}const g=new Float32Array(256),y=-2*o**2;for(let w=0;w<256;w++)g[w]=Math.exp(w**2/y);const b=t.length,A=new Uint8Array(b),v=new Uint32Array(256);for(let w=0;w<s;w++)for(let E=0;E<e;E++){const x=w*e+E,R=t[x];let T=0,D=0;for(let U=0;U<l;U++){const F=w+U-p;if(!(F<0||F>=s))for(let V=0;V<l;V++){const $=E+V-p;if($<0||$>=e)continue;const J=t[F*e+$],tt=h[U*l+V]*g[Math.abs(J-R)];T+=J*tt,D+=tt}}const C=A[x]=Math.round(T/D);v[C]++}return[A,v]}static#l(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e}static#d(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let h=0,d=s.length;h<d;h++){if(t[(h<<2)+3]===0){a=s[h]=255;continue}const g=s[h]=t[h<<2];g>a&&(a=g),g<o&&(o=g)}const l=255/(a-o);for(let h=0;h<e;h++)s[h]=(s[h]-o)*l;return s}static#u(t){let e,s=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,h=o;for(e=o;e<256;e++){const d=t[e];d>s&&(e-l>a&&(a=e-l,h=e-1),s=d,l=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:s,height:a}=t,{maxDim:o}=this.#t;let l=s,h=a;if(s>o||a>o){let b=s,A=a,v=Math.log2(Math.max(s,a)/o);const w=Math.floor(v);v=v===w?w-1:w;for(let x=0;x<v;x++){l=Math.ceil(b/2),h=Math.ceil(A/2);const R=new OffscreenCanvas(l,h);R.getContext("2d").drawImage(t,0,0,b,A,0,0,l,h),b=l,A=h,t!==e&&t.close(),t=R.transferToImageBitmap()}const E=Math.min(o/l,o/h);l=Math.round(l*E),h=Math.round(h*E)}const p=new OffscreenCanvas(l,h).getContext("2d",{willReadFrequently:!0});p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,l,h);const g=p.getImageData(0,0,l,h).data;return[this.#d(g),l,h]}static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:a},o,l,h,d){let p=new OffscreenCanvas(1,1),g=p.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:v,actualBoundingBoxAscent:w,actualBoundingBoxDescent:E,fontBoundingBoxAscent:x,fontBoundingBoxDescent:R,width:T}=g.measureText(t),D=1.5,C=Math.ceil(Math.max(Math.abs(A)+Math.abs(v)||0,T)*D),U=Math.ceil(Math.max(Math.abs(w)+Math.abs(E)||y,Math.abs(x)+Math.abs(R)||y)*D);p=new OffscreenCanvas(C,U),g=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,C,U),g.fillStyle="black",g.fillText(t,C*(D-1)/2,U*(3-D)/2);const F=this.#d(g.getImageData(0,0,C,U).data),V=this.#l(F),$=this.#u(V),J=this.#s(F,C,U,$);return this.processDrawnLines({lines:{curves:J,width:C,height:U},pageWidth:o,pageHeight:l,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,s,a,o){const[l,h,d]=this.#f(t),[p,g]=this.#h(l,h,d,Math.hypot(h,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#u(g),b=this.#s(p,h,d,y);return this.processDrawnLines({lines:{curves:b,width:h,height:d},pageWidth:e,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:l,areContours:h}){a%180!==0&&([e,s]=[s,e]);const{curves:d,width:p,height:g}=t,y=t.thickness??0,b=[],A=Math.min(e/p,s/g),v=A/e,w=A/s,E=[];for(const{points:R}of d){const T=l?this.#r(R):R;if(!T)continue;E.push(T);const D=T.length,C=new Float32Array(D),U=new Float32Array(3*(D===2?2:D-2));if(b.push({line:U,points:C}),D===2){C[0]=T[0]*v,C[1]=T[1]*w,U.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[F,V,$,J]=T;F*=v,V*=w,$*=v,J*=w,C.set([F,V,$,J],0),U.set([NaN,NaN,NaN,NaN,F,V],0);for(let tt=4;tt<D;tt+=2){const st=C[tt]=T[tt]*v,ct=C[tt+1]=T[tt+1]*w;U.set(it.createBezierPoints(F,V,$,J,st,ct),(tt-2)*3),[F,V,$,J]=[$,J,st,ct]}}if(b.length===0)return null;const x=h?new Wh:new Zr;return x.build(b,e,s,1,a,h?0:y,o),{outline:x,newCurves:E,areContours:h,thickness:y,width:p,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:a,height:o}){let l=1/0,h=-1/0,d=0;for(const T of t){d+=T.length;for(let D=2,C=T.length;D<C;D++){const U=T[D]-T[D-2];l=Math.min(l,U),h=Math.max(h,U)}}let p;l>=-128&&h<=127?p=Int8Array:l>=-32768&&h<=32767?p=Int16Array:p=Int32Array;const g=t.length,y=_l+Tr*g,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*p.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=a,b[A++]=o,b[A++]=e?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=g,b[A++]=p.BYTES_PER_ELEMENT;for(const T of t)b[A++]=T.length-2,b[A++]=T[0],b[A++]=T[1];const v=new CompressionStream("deflate-raw"),w=v.writable.getWriter();await w.ready,w.write(b);const E=p.prototype.constructor;for(const T of t){const D=new E(T.length-2);for(let C=2,U=T.length;C<U;C++)D[C-2]=T[C]-T[C-2];w.write(D)}w.close();const x=await new Response(v.readable).arrayBuffer(),R=new Uint8Array(x);return xb(R)}static async decompressSignature(t){try{const e=X1(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,h=0;for await(const T of s)l||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),l.set(T,h),h+=T.length;const d=new Uint32Array(l.buffer,0,l.length>>2),p=d[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const g=d[2],y=d[3],b=d[4]===0,A=d[5],v=d[6],w=d[7],E=[],x=(_l+Tr*v)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(w){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(l.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(l.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(l.buffer,x);break}h=0;for(let T=0;T<v;T++){const D=d[Tr*T+_l],C=new Float32Array(D+2);E.push(C);for(let U=0;U<Tr-1;U++)C[U]=d[Tr*T+_l+U+1];for(let U=0;U<D;U++)C[U+2]=C[U]+R[h++]}return{areContours:b,thickness:A,outlines:E,width:g,height:y}}catch(e){return At(`decompressSignature: ${e}`),null}}}class Cd extends nv{constructor(){super(),super.updateProperties({fill:dt._defaultLineColor,"stroke-width":0})}clone(){const t=new Cd;return t.updateAll(this),t}}class Md extends Kl{constructor(t){super(t),super.updateProperties({stroke:dt._defaultLineColor,"stroke-width":1})}clone(){const t=new Md(this._viewParameters);return t.updateAll(this),t}}class Un extends gt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=vt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){dt.initialize(t,e),this._defaultDrawingOptions=new Cd,this._defaultDrawnSignatureOptions=new Md(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ct(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:a,mustSmooth:o,areContours:l,description:h,uuid:d,heightInPage:p}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,A=rs.processDrawnLines({lines:a,pageWidth:g,pageHeight:y,rotation:b,innerMargin:Un._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(A,p,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:s,width:a,height:o}=this.#n,l=Math.max(a,o),h=rs.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,s,a){const{x:o,y:l}=this,{outline:h}=this.#n=t;this.#t=h instanceof Wh,this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let d;this.#t?d=Un.getDefaultDrawingOptions():(d=Un._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[p,g]=this.parentDimensions,[,y]=this.pageDimensions;let b=e/y;b=b>=1?.5:b,this.width*=b/this.height,this.width>=1&&(b*=.9/this.width,this.width=.9),this.height=b,this.setDims(p*this.width,g*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:a}=this.parent.viewport;return rs.process(t,e,s,a,Un._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return rs.extractContoursFromText(t,e,s,a,o,Un._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:a}=this.parent.viewport;return rs.processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:Un._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Un.getDefaultDrawingOptions():(this._drawingOptions=Un._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:s,rect:a}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:vt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:o,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(l.paths={lines:e,points:s},l.uuid=this.#i,l.isCopy=!0):l.lines=e,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,e,s,a,o,l){return l.areContours?Wh.deserialize(t,e,s,a,o,l):Zr.deserialize(t,e,s,a,o,l)}static async deserialize(t,e,s){const a=await super.deserialize(t,e,s);return a.#t=t.areContours,a.#e=t.accessibilityData?.alt||"",a.#i=t.uuid,a}}class y_ extends dt{#t=null;#e=null;#n=null;#i=null;#a=null;#s="";#o=null;#r=!1;#h=null;#l=!1;#d=!1;static _type="stamp";static _editorType=vt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){dt.initialize(t,e)}static isHandlingMimeForPasting(t){return Pl.includes(t)}static paste(t,e){e.pasteEditor({mode:vt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,h=await s.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#u(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(a=>this.#u(a)).finally(()=>this.#f());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(a=>this.#u(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Pl.join(",");const e=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(a)}s()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#o?.remove(),this.#o=null,this.#h&&(clearTimeout(this.#h),this.#h=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#r)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#r||(this.#t?this.#g():this.#p()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,a&&(this.#t=a),this.#r=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#h!==null&&clearTimeout(this.#h);const t=200;this.#h=setTimeout(()=>{this.#h=null,this.#m()},t)}#g(){const{div:t}=this;let{width:e,height:s}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*a,s=this.height*o;else if(e>l*a||s>l*o){const g=Math.min(l*a/e,l*o/s);e*=g,s*=g}const[h,d]=this.parentDimensions;this.setDims(e*h/a,s*d/o),this._uiManager.enableWaiting(!1);const p=this.#o=document.createElement("canvas");p.setAttribute("role","img"),this.addContainer(p),this.width=e/a,this.height=s/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,s=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Tn;let h=this.#t,d=a,p=o,g=null;if(e){if(a>e||o>e){const U=Math.min(e/a,e/o);d=Math.floor(a*U),p=Math.floor(o*U)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*l.sx),A=g.height=Math.ceil(p*l.sy);this.#l||(h=this.#c(b,A));const v=g.getContext("2d");v.filter=this._uiManager.hcmFilter;let w="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",E="#42414d");const x=15,R=x*l.sx,T=x*l.sy,D=new OffscreenCanvas(R*2,T*2),C=D.getContext("2d");C.fillStyle=w,C.fillRect(0,0,R*2,T*2),C.fillStyle=E,C.fillRect(0,0,R,T),C.fillRect(R,T,R,T),v.fillStyle=v.createPattern(D,"repeat"),v.fillRect(0,0,b,A),v.drawImage(h,0,0,h.width,h.height,0,0,b,A)}let y=null;if(s){let b,A;if(l.symmetric&&h.width<t&&h.height<t)b=h.width,A=h.height;else if(h=this.#t,a>t||o>t){const E=Math.min(t/a,t/o);b=Math.floor(a*E),A=Math.floor(o*E),this.#l||(h=this.#c(b,A))}const w=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});w.drawImage(h,0,0,h.width,h.height,0,0,b,A),y={width:b,height:A,data:w.getImageData(0,0,b,A).data}}return{canvas:g,width:d,height:p,imageData:y}}#c(t,e){const{width:s,height:a}=this.#t;let o=s,l=a,h=this.#t;for(;o>2*t||l>2*e;){const d=o,p=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(h,0,0,d,p,0,0,o,l),h=g.transferToImageBitmap()}return h}#m(){const[t,e]=this.parentDimensions,{width:s,height:a}=this,o=new Tn,l=Math.ceil(s*t*o.sx),h=Math.ceil(a*e*o.sy),d=this.#o;if(!d||d.width===l&&d.height===h)return;d.width=l,d.height=h;const p=this.#l?this.#t:this.#c(l,h),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,l,h)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,s]=this.pageDimensions,a=Math.round(this.width*e*ps.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ps.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,s){let a=null,o=!1;if(t instanceof Jb){const{data:{rect:w,rotation:E,id:x,structParent:R,popupRef:T},container:D,parent:{page:{pageNumber:C}},canvas:U}=t;let F,V;U?(delete t.canvas,{id:F,bitmap:V}=s.imageManager.getFromCanvas(D.id,U),U.remove()):(o=!0,t._hasNoCanvas=!0);const $=(await e._structTree.getAriaAttributes(`${hd}${x}`))?.get("aria-label")||"";a=t={annotationType:vt.STAMP,bitmapId:F,bitmap:V,pageIndex:C-1,rect:w.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:$},isSvg:!1,structParent:R,popupRef:T}}const l=await super.deserialize(t,e,s),{rect:h,bitmap:d,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,l),l.#r=!0):g&&s.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#i=p,l.#l=y;const[A,v]=l.pageDimensions;return l.width=(h[2]-h[0])/A,l.height=(h[3]-h[1])/v,b&&(l.altTextData=b),l._initialData=a,l.#d=!!a,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:vt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const h=this.#b(s);if(h.isSame)return null;h.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,e===null)return s;e.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const h=e.stamps.get(this.#e);l>h.area&&(h.area=l,h.serialized.bitmap.close(),h.serialized.bitmap=this.#y(!1))}return s}#b(t){const{pageIndex:e,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class zn{#t;#e=!1;#n=null;#i=null;#a=null;#s=new Map;#o=!1;#r=!1;#h=!1;#l=null;#d=null;#u=null;#f=null;#p=null;#g=-1;#c;static _initialized=!1;static#m=new Map([be,Rd,y_,oe,Un].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:h,textLayer:d,viewport:p,l10n:g}){const y=[...zn.#m.values()];if(!zn._initialized){zn._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#c=t,this.pageIndex=e,this.div=s,this.#t=o,this.#n=l,this.viewport=p,this.#u=d,this.drawLayer=h,this._structTree=a,this.#c.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===vt.NONE}updateToolbar(t){this.#c.updateToolbar(t)}updateMode(t=this.#c.getMode()){switch(this.#w(),t){case vt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case vt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case vt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of zn.#m.values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#c.setEditingState(t)}addCommands(t){this.#c.addCommands(t)}cleanUndoStack(t){this.#c.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#h=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#p?.abort(),this.#p=null;const t=new Set;for(const s of this.#s.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#c.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!this.#n){this.#h=!1;return}const e=this.#n.getEditableAnnotations();for(const s of e){if(s.hide(),this.#c.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}this.#h=!1}disable(){if(this.#r=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#p){this.#p=new AbortController;const a=this.#c.combinedSignal(this.#p);this.#u.div.addEventListener("pointerdown",o=>{const{clientX:h,clientY:d,timeStamp:p}=o,g=this.#g;if(p-g>500){this.#g=p;return}this.#g=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(h,d);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let A;const v=new RegExp(`^${Ab}[0-9]+$`);for(const E of b)if(v.test(E.id)){A=E.id;break}if(!A)return;const w=this.#s.get(A);w?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),w.dblclick())},{signal:a,capture:!0})}const t=new Map,e=new Map;for(const a of this.#s.values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}if(this.#n){const a=this.#n.getEditableAnnotations();for(const o of a){const{id:l}=o.data;if(this.#c.isDeletedAnnotationElement(l))continue;let h=e.get(l);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=t.get(l),h&&(this.#c.addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const a of zn.#m.values())s.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#r=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#c.getActive()!==t&&this.#c.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#c.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#y(t){this.#c.unselectAll();const{target:e}=t;if(e===this.#u.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#u.div.contains(e)){const{isMac:s}=_e.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#c.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),oe.startHighlighting(this,this.#c.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#c.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#c.isDeletedAnnotationElement(e)&&this.#c.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#r&&t.annotationElementId&&this.#c.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#c.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#c.addDeletedAnnotationElement(t.annotationElementId),dt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#c.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#h),this.#c.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return this.#c.getId()}get#b(){return zn.#m.get(this.#c.getMode())}combinedSignal(t){return this.#c.combinedSignal(t)}#A(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#c.updateMode(t.mode);const{offsetX:s,offsetY:a}=this.#S(),o=this.getNextId(),l=this.#A({parent:this,id:o,x:s,y:a,uiManager:this.#c,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await zn.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#c)||null}createAndAddNewEditor(t,e,s={}){const a=this.getNextId(),o=this.#A({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#c,isCentered:e,...s});return o&&this.add(o),o}#S(){const{x:t,y:e,width:s,height:a}=this.div.getBoundingClientRect(),o=Math.max(0,t),l=Math.max(0,e),h=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,e+a),p=(o+h)/2-t,g=(l+d)/2-e,[y,b]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#c.setSelected(t)}toggleSelected(t){this.#c.toggleSelected(t)}unselect(t){this.#c.unselect(t)}pointerup(t){const{isMac:e}=_e.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#o||(this.#o=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#c.getMode();if(s===vt.STAMP||s===vt.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#c.getMode()===vt.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:e}=_e.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#o=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#c.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#c,!1,t);return}this.#c.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#c.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#c,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#c.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,s){const a=this.#c.findParent(e,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#c.removeLayer(this)}#w(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Ui(this.div,t);for(const e of this.#c.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#c.commitOrRemove(),this.#w();const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Ui(this.div,{rotation:s}),e!==s)for(const a of this.#s.values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#c.viewParameters.realScale}}class Ee{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Ct(this,"_svgFactory",new Fr)}static#a(t,[e,s,a,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*e}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#s(){const t=Ee._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#o(t,e){const s=Ee._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${e}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Ee._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#r(t,e){for(const[s,a]of Object.entries(e))a===null?t.removeAttribute(s):t.setAttribute(s,a)}draw(t,e=!1,s=!1){const a=Ee.#i++,o=this.#s(),l=Ee._svgFactory.createElement("defs");o.append(l);const h=Ee._svgFactory.createElement("path");l.append(h);const d=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(a,h);const p=s?this.#o(l,d):null,g=Ee._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${p})`}}drawOutline(t,e){const s=Ee.#i++,a=this.#s(),o=Ee._svgFactory.createElement("defs");a.append(o);const l=Ee._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",h),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=Ee._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Ee._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=Ee._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${h}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const p=Ee._svgFactory.createElement("use");a.append(p),p.setAttribute("href",`#${h}`),d&&p.setAttribute("mask",`url(#${d})`);const g=p.cloneNode();return a.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(s,a),s}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:s,bbox:a,rootClass:o,path:l}=e,h=typeof t=="number"?this.#e.get(t):t;if(h){if(s&&this.#r(h,s),a&&Ee.#a(h,a),o){const{classList:d}=h;for(const[p,g]of Object.entries(o))d.toggle(p,g)}if(l){const p=h.firstChild.firstChild;this.#r(p,l)}}}updateParent(t,e){if(e===this)return;const s=this.#e.get(t);s&&(e.#t.append(s),this.#e.delete(t),e.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:$h};globalThis.pdfjsLib={AbortException:ui,AnnotationEditorLayer:zn,AnnotationEditorParamsType:Mt,AnnotationEditorType:vt,AnnotationEditorUIManager:hi,AnnotationLayer:Td,AnnotationMode:Hn,AnnotationType:re,build:Yb,ColorPicker:ln,createValidAbsoluteUrl:ld,DOMSVGFactory:Fr,DrawLayer:Ee,FeatureTest:_e,fetchData:Sa,getDocument:Ad,getFilenameFromUrl:Tb,getPdfFilenameFromUrl:Rb,getUuid:ud,getXfaPageViewport:Cb,GlobalWorkerOptions:Fi,ImageKind:Dr,InvalidPDFException:kl,isDataScheme:$r,isPdfFile:Yl,isValidExplicitDest:Nb,MathClamp:ke,noContextMenu:Sn,normalizeUnicode:_b,OPS:Or,OutputScale:Tn,PasswordResponses:wb,PDFDataRangeTransport:wd,PDFDateString:dd,PDFWorker:ga,PermissionFlag:Sb,PixelsPerInch:ps,RenderingCancelledException:Xl,ResponseException:kr,setLayerDimensions:Ui,shadow:Ct,SignatureExtractor:rs,stopEvent:le,SupportedImageMimeTypes:Pl,TextLayer:Pr,TouchManager:Wr,updateUrlHash:cd,Util:ht,VerbosityLevel:Vr,version:Ed,XfaLayer:_d};const b_=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ui,AnnotationEditorLayer:zn,AnnotationEditorParamsType:Mt,AnnotationEditorType:vt,AnnotationEditorUIManager:hi,AnnotationLayer:Td,AnnotationMode:Hn,AnnotationType:re,ColorPicker:ln,DOMSVGFactory:Fr,DrawLayer:Ee,FeatureTest:_e,GlobalWorkerOptions:Fi,ImageKind:Dr,InvalidPDFException:kl,MathClamp:ke,OPS:Or,OutputScale:Tn,PDFDataRangeTransport:wd,PDFDateString:dd,PDFWorker:ga,PasswordResponses:wb,PermissionFlag:Sb,PixelsPerInch:ps,RenderingCancelledException:Xl,ResponseException:kr,SignatureExtractor:rs,SupportedImageMimeTypes:Pl,TextLayer:Pr,TouchManager:Wr,Util:ht,VerbosityLevel:Vr,XfaLayer:_d,build:Yb,createValidAbsoluteUrl:ld,fetchData:Sa,getDocument:Ad,getFilenameFromUrl:Tb,getPdfFilenameFromUrl:Rb,getUuid:ud,getXfaPageViewport:Cb,isDataScheme:$r,isPdfFile:Yl,isValidExplicitDest:Nb,noContextMenu:Sn,normalizeUnicode:_b,setLayerDimensions:Ui,shadow:Ct,stopEvent:le,updateUrlHash:cd,version:Ed},Symbol.toStringTag,{value:"Module"}));function iv(c){var t,e,s="";if(typeof c=="string"||typeof c=="number")s+=c;else if(typeof c=="object")if(Array.isArray(c)){var a=c.length;for(t=0;t<a;t++)c[t]&&(e=iv(c[t]))&&(s&&(s+=" "),s+=e)}else for(e in c)c[e]&&(s&&(s+=" "),s+=e);return s}function Wl(){for(var c,t,e=0,s="",a=arguments.length;e<a;e++)(c=arguments[e])&&(t=iv(c))&&(s&&(s+=" "),s+=t);return s}var Ay=Object.prototype.hasOwnProperty;function Sy(c,t,e){for(e of c.keys())if(ha(e,t))return e}function ha(c,t){var e,s,a;if(c===t)return!0;if(c&&t&&(e=c.constructor)===t.constructor){if(e===Date)return c.getTime()===t.getTime();if(e===RegExp)return c.toString()===t.toString();if(e===Array){if((s=c.length)===t.length)for(;s--&&ha(c[s],t[s]););return s===-1}if(e===Set){if(c.size!==t.size)return!1;for(s of c)if(a=s,a&&typeof a=="object"&&(a=Sy(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(c.size!==t.size)return!1;for(s of c)if(a=s[0],a&&typeof a=="object"&&(a=Sy(t,a),!a)||!ha(s[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)c=new Uint8Array(c),t=new Uint8Array(t);else if(e===DataView){if((s=c.byteLength)===t.byteLength)for(;s--&&c.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(c)){if((s=c.byteLength)===t.byteLength)for(;s--&&c[s]===t[s];);return s===-1}if(!e||typeof c=="object"){s=0;for(e in c)if(Ay.call(c,e)&&++s&&!Ay.call(t,e)||!(e in t)||!ha(c[e],t[e]))return!1;return Object.keys(t).length===s}}return c!==c&&t!==t}function Jr(c){let t=!1;return{promise:new Promise((s,a)=>{c.then(o=>!t&&s(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const v_=["onCopy","onCut","onPaste"],A_=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],S_=["onFocus","onBlur"],w_=["onInput","onInvalid","onReset","onSubmit"],E_=["onLoad","onError"],__=["onKeyDown","onKeyPress","onKeyUp"],x_=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],T_=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],R_=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],C_=["onSelect"],M_=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],D_=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],L_=["onScroll"],N_=["onWheel"],O_=["onAnimationStart","onAnimationEnd","onAnimationIteration"],k_=["onTransitionEnd"],P_=["onToggle"],B_=["onChange"],F_=[...v_,...A_,...S_,...w_,...E_,...__,...x_,...T_,...R_,...C_,...M_,...D_,...L_,...N_,...O_,...k_,...B_,...P_];function sv(c,t){const e={};for(const s of F_){const a=c[s];a&&(t?e[s]=(o=>a(o,t(s))):e[s]=a)}return e}var U_="Invariant failed";function qt(c,t){if(!c)throw new Error(U_)}var kh,wy;function I_(){if(wy)return kh;wy=1;var c=function(){};return kh=c,kh}var z_=I_();const Be=DA(z_),av=k.createContext(null),H_="noopener noreferrer nofollow";class j_{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return qt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){qt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{qt(this.pdfDocument),qt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{qt(Array.isArray(e));const s=e[0];new Promise(a=>{qt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{a(o)}).catch(()=>{qt(!1)}):typeof s=="number"?a(s):qt(!1)}).then(a=>{const o=a+1;qt(this.pdfViewer),qt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;qt(this.pdfViewer),qt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,s){t.href=e,t.rel=this.externalLinkRel||H_,t.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function da({children:c,type:t}){return P.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:c})}const Ey={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function G_(c,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return c}}function ma(){return k.useReducer(G_,{value:void 0,error:void 0})}const Ql=typeof window<"u",rv=Ql&&window.location.protocol==="file:";function q_(c){return typeof c<"u"}function as(c){return q_(c)&&c!==null}function V_(c){return typeof c=="string"}function X_(c){return c instanceof ArrayBuffer}function Y_(c){return qt(Ql),c instanceof Blob}function Qh(c){return V_(c)&&/^data:/.test(c)}function _y(c){qt(Qh(c));const[t="",e=""]=c.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function $_(){return Ql&&window.devicePixelRatio||1}const ov="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function xy(){Be(!rv,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${ov}`)}function K_(){Be(!rv,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${ov}`)}function ms(c){c?.cancel&&c.cancel()}function Zh(c,t){return Object.defineProperty(c,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(c,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(c,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(c,"originalHeight",{get(){return this.view[3]},configurable:!0}),c}function W_(c){return c.name==="RenderingCancelledException"}function Q_(c){return new Promise((t,e)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return e(new Error("Error while reading a file."));t(s.result)},s.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},s.readAsArrayBuffer(c)})}const{PDFDataRangeTransport:Z_}=b_,J_=(c,t)=>{switch(t){case Ey.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");c(e);break}case Ey.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");c(e);break}}};function Ty(c){return typeof c=="object"&&c!==null&&("data"in c||"range"in c||"url"in c)}const tx=k.forwardRef(function({children:t,className:e,error:s="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:h,imageResourcesPath:d,loading:p="Loading PDF…",noData:g="No PDF file specified.",onItemClick:y,onLoadError:b,onLoadProgress:A,onLoadSuccess:v,onPassword:w=J_,onSourceError:E,onSourceSuccess:x,options:R,renderMode:T,rotate:D,scale:C,...U},F){const[V,$]=ma(),{value:J,error:tt}=V,[st,ct]=ma(),{value:at,error:ut}=st,N=k.useRef(new j_),H=k.useRef([]),et=k.useRef(void 0),yt=k.useRef(void 0);l&&l!==et.current&&Ty(l)&&(Be(!ha(l,et.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),et.current=l),R&&R!==yt.current&&(Be(!ha(R,yt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),yt.current=R);const L=k.useRef({scrollPageIntoView:Lt=>{const{dest:Ft,pageNumber:ie,pageIndex:he=ie-1}=Lt;if(y){y({dest:Ft,pageIndex:he,pageNumber:ie});return}const xe=H.current[he];if(xe){xe.scrollIntoView();return}Be(!1,`An internal link leading to page ${ie} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});k.useImperativeHandle(F,()=>({linkService:N,pages:H,viewer:L}),[]);function X(){x&&x()}function Z(){tt&&(Be(!1,tt.toString()),E&&E(tt))}function Q(){$({type:"RESET"})}k.useEffect(Q,[l,$]);const nt=k.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Qh(l)?{data:_y(l)}:(xy(),{url:l});if(l instanceof Z_)return{range:l};if(X_(l))return{data:l};if(Ql&&Y_(l))return{data:await Q_(l)};if(qt(typeof l=="object"),qt(Ty(l)),"url"in l&&typeof l.url=="string"){if(Qh(l.url)){const{url:Lt,...Ft}=l;return{data:_y(Lt),...Ft}}xy()}return l},[l]);k.useEffect(()=>{const Lt=Jr(nt());return Lt.promise.then(Ft=>{$({type:"RESOLVE",value:Ft})}).catch(Ft=>{$({type:"REJECT",error:Ft})}),()=>{ms(Lt)}},[nt,$]),k.useEffect(()=>{if(!(typeof J>"u")){if(J===!1){Z();return}X()}},[J]);function bt(){at&&(v&&v(at),H.current=new Array(at.numPages),N.current.setDocument(at))}function ot(){ut&&(Be(!1,ut.toString()),b&&b(ut))}k.useEffect(function(){ct({type:"RESET"})},[ct,J]),k.useEffect(function(){if(!J)return;const Ft=R?{...J,...R}:J,ie=Ad(Ft);A&&(ie.onProgress=A),w&&(ie.onPassword=w);const he=ie,xe=he.promise.then(Ii=>{ct({type:"RESOLVE",value:Ii})}).catch(Ii=>{he.destroyed||ct({type:"REJECT",error:Ii})});return()=>{xe.finally(()=>he.destroy())}},[R,ct,J]),k.useEffect(()=>{if(!(typeof at>"u")){if(at===!1){ot();return}bt()}},[at]),k.useEffect(function(){N.current.setViewer(L.current),N.current.setExternalLinkRel(a),N.current.setExternalLinkTarget(o)},[a,o]);const St=k.useCallback((Lt,Ft)=>{H.current[Lt]=Ft},[]),Dt=k.useCallback(Lt=>{delete H.current[Lt]},[]),ue=k.useMemo(()=>({imageResourcesPath:d,linkService:N.current,onItemClick:y,pdf:at,registerPage:St,renderMode:T,rotate:D,scale:C,unregisterPage:Dt}),[d,y,at,St,T,D,C,Dt]),jt=k.useMemo(()=>sv(U,()=>at),[U,at]);function He(){function Lt(ie){return!!ie?.pdf}if(!Lt(ue))throw new Error("pdf is undefined");const Ft=typeof t=="function"?t(ue):t;return P.jsx(av.Provider,{value:ue,children:Ft})}function Ze(){return l?at==null?P.jsx(da,{type:"loading",children:typeof p=="function"?p():p}):at===!1?P.jsx(da,{type:"error",children:typeof s=="function"?s():s}):He():P.jsx(da,{type:"no-data",children:typeof g=="function"?g():g})}return P.jsx("div",{className:Wl("react-pdf__Document",e),ref:h,...jt,children:Ze()})});function lv(){return k.useContext(av)}function cv(){for(var c=[],t=0;t<arguments.length;t++)c[t]=arguments[t];var e=c.filter(Boolean);if(e.length<=1){var s=e[0];return s||null}return function(o){for(var l=0,h=e;l<h.length;l++){var d=h[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const uv=k.createContext(null);function Zl(){return k.useContext(uv)}function ex(){const c=lv(),t=Zl();qt(t);const e={...c,...t},{imageResourcesPath:s,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:d,page:p,pdf:g,renderForms:y,rotate:b,scale:A=1}=e;qt(g),qt(p),qt(a);const[v,w]=ma(),{value:E,error:x}=v,R=k.useRef(null);Be(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function T(){E&&l&&l(E)}function D(){x&&(Be(!1,x.toString()),o&&o(x))}k.useEffect(function(){w({type:"RESET"})},[w,p]),k.useEffect(function(){if(!p)return;const $=Jr(p.getAnnotations()),J=$;return $.promise.then(tt=>{w({type:"RESOLVE",value:tt})}).catch(tt=>{w({type:"REJECT",error:tt})}),()=>{ms(J)}},[w,p]),k.useEffect(()=>{if(E!==void 0){if(E===!1){D();return}T()}},[E]);function C(){d&&d()}function U(V){Be(!1,`${V}`),h&&h(V)}const F=k.useMemo(()=>p.getViewport({scale:A,rotation:b}),[p,b,A]);return k.useEffect(function(){if(!g||!p||!a||!E)return;const{current:$}=R;if(!$)return;const J=F.clone({dontFlip:!0}),tt={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:$,l10n:null,page:p,structTreeLayer:null,viewport:J},st={annotations:E,annotationStorage:g.annotationStorage,div:$,imageResourcesPath:s,linkService:a,page:p,renderForms:y,viewport:J};$.innerHTML="";try{new Td(tt).render(st),C()}catch(ct){U(ct)}return()=>{}},[E,s,a,p,g,y,F]),P.jsx("div",{className:Wl("react-pdf__Page__annotations","annotationLayer"),ref:R})}const hv={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},nx=/^H(\d+)$/;function ix(c){return c in hv}function Jl(c){return"children"in c}function dv(c){return Jl(c)?c.children.length===1&&0 in c.children&&"id"in c.children[0]:!1}function sx(c){const t={};if(Jl(c)){const{role:e}=c,s=e.match(nx);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(ix(e)){const a=hv[e];a&&(t.role=a)}}return t}function fv(c){const t={};if(Jl(c)){if(c.alt!==void 0&&(t["aria-label"]=c.alt),c.lang!==void 0&&(t.lang=c.lang),dv(c)){const[e]=c.children;if(e){const s=fv(e);return{...t,...s}}}}else"id"in c&&(t["aria-owns"]=c.id);return t}function ax(c){return c?{...sx(c),...fv(c)}:null}function pv({className:c,node:t}){const e=k.useMemo(()=>ax(t),[t]),s=k.useMemo(()=>!Jl(t)||dv(t)?null:t.children.map((a,o)=>P.jsx(pv,{node:a},o)),[t]);return P.jsx("span",{className:c,...e,children:s})}function rx(){const c=Zl();qt(c);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=c,[s,a]=ma(),{value:o,error:l}=s,{customTextRenderer:h,page:d}=c;function p(){o&&e&&e(o)}function g(){l&&(Be(!1,l.toString()),t&&t(l))}return k.useEffect(function(){a({type:"RESET"})},[a,d]),k.useEffect(function(){if(h||!d)return;const b=Jr(d.getStructTree()),A=b;return b.promise.then(v=>{a({type:"RESOLVE",value:v})}).catch(v=>{a({type:"REJECT",error:v})}),()=>ms(A)},[h,d,a]),k.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}p()}},[o]),o?P.jsx(pv,{className:"react-pdf__Page__structTree structTree",node:o}):null}const Ry=Hn;function ox(c){const t=Zl();qt(t);const e={...t,...c},{_className:s,canvasBackground:a,devicePixelRatio:o=$_(),onRenderError:l,onRenderSuccess:h,page:d,renderForms:p,renderTextLayer:g,rotate:y,scale:b}=e,{canvasRef:A}=c;qt(d);const v=k.useRef(null);function w(){d&&h&&h(Zh(d,b))}function E(D){W_(D)||(Be(!1,D.toString()),l&&l(D))}const x=k.useMemo(()=>d.getViewport({scale:b*o,rotation:y}),[o,d,y,b]),R=k.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);k.useEffect(function(){if(!d)return;d.cleanup();const{current:C}=v;if(!C)return;C.width=x.width,C.height=x.height,C.style.width=`${Math.floor(R.width)}px`,C.style.height=`${Math.floor(R.height)}px`,C.style.visibility="hidden";const U={annotationMode:p?Ry.ENABLE_FORMS:Ry.ENABLE,canvasContext:C.getContext("2d",{alpha:!1}),viewport:x};a&&(U.background=a);const F=d.render(U),V=F;return F.promise.then(()=>{C.style.visibility="",w()}).catch(E),()=>ms(V)},[a,d,p,x,R]);const T=k.useCallback(()=>{const{current:D}=v;D&&(D.width=0,D.height=0)},[]);return k.useEffect(()=>T,[T]),P.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:cv(A,v),style:{display:"block",userSelect:"none"},children:g?P.jsx(rx,{}):null})}function lx(c){return"str"in c}function cx(){const c=Zl();qt(c);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:s,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:h,pageNumber:d,rotate:p,scale:g}=c;qt(l);const[y,b]=ma(),{value:A,error:v}=y,w=k.useRef(null);Be(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){A&&s&&s(A)}function x(){v&&(Be(!1,v.toString()),e&&e(v))}k.useEffect(function(){b({type:"RESET"})},[l,b]),k.useEffect(function(){if(!l)return;const V=Jr(l.getTextContent()),$=V;return V.promise.then(J=>{b({type:"RESOLVE",value:J})}).catch(J=>{b({type:"REJECT",error:J})}),()=>ms($)},[l,b]),k.useEffect(()=>{if(A!==void 0){if(A===!1){x();return}E()}},[A]);const R=k.useCallback(()=>{o&&o()},[o]),T=k.useCallback(F=>{Be(!1,F.toString()),a&&a(F)},[a]);function D(){const F=w.current;F&&F.classList.add("selecting")}function C(){const F=w.current;F&&F.classList.remove("selecting")}const U=k.useMemo(()=>l.getViewport({scale:g,rotation:p}),[l,p,g]);return k.useLayoutEffect(function(){if(!l||!A)return;const{current:V}=w;if(!V)return;V.innerHTML="";const $=l.streamTextContent({includeMarkedContent:!0}),J={container:V,textContentSource:$,viewport:U},tt=new Pr(J),st=tt;return tt.render().then(()=>{const ct=document.createElement("div");ct.className="endOfContent",V.append(ct);const at=V.querySelectorAll('[role="presentation"]');if(t){let ut=0;A.items.forEach((N,H)=>{if(!lx(N))return;const et=at[ut];if(!et)return;const yt=t({pageIndex:h,pageNumber:d,itemIndex:H,...N});et.innerHTML=yt,ut+=N.str&&N.hasEOL?2:1})}R()}).catch(T),()=>ms(st)},[t,T,R,l,h,d,A,U]),P.jsx("div",{className:Wl("react-pdf__Page__textContent","textLayer"),onMouseUp:C,onMouseDown:D,ref:w})}const Cy=1;function ux(c){const e={...lv(),...c},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:h,className:d,customRenderer:p,customTextRenderer:g,devicePixelRatio:y,error:b="Failed to load the page.",height:A,inputRef:v,loading:w="Loading page…",noData:E="No page specified.",onGetAnnotationsError:x,onGetAnnotationsSuccess:R,onGetStructTreeError:T,onGetStructTreeSuccess:D,onGetTextError:C,onGetTextSuccess:U,onLoadError:F,onLoadSuccess:V,onRenderAnnotationLayerError:$,onRenderAnnotationLayerSuccess:J,onRenderError:tt,onRenderSuccess:st,onRenderTextLayerError:ct,onRenderTextLayerSuccess:at,pageIndex:ut,pageNumber:N,pdf:H,registerPage:et,renderAnnotationLayer:yt=!0,renderForms:L=!1,renderMode:X="canvas",renderTextLayer:Z=!0,rotate:Q,scale:nt=Cy,unregisterPage:bt,width:ot,...St}=e,[Dt,ue]=ma(),{value:jt,error:He}=Dt,Ze=k.useRef(null);qt(H);const Lt=as(N)?N-1:ut??null,Ft=N??(as(ut)?ut+1:null),ie=Q??(jt?jt.rotate:null),he=k.useMemo(()=>{if(!jt)return null;let Zt=1;const Fe=nt??Cy;if(ot||A){const Jt=jt.getViewport({scale:1,rotation:ie});ot?Zt=ot/Jt.width:A&&(Zt=A/Jt.height)}return Fe*Zt},[A,jt,ie,nt,ot]);k.useEffect(function(){return()=>{as(Lt)&&a&&bt&&bt(Lt)}},[a,H,Lt,bt]);function xe(){if(V){if(!jt||!he)return;V(Zh(jt,he))}if(a&&et){if(!as(Lt)||!Ze.current)return;et(Lt,Ze.current)}}function Ii(){He&&(Be(!1,He.toString()),F&&F(He))}k.useEffect(function(){ue({type:"RESET"})},[ue,H,Lt]),k.useEffect(function(){if(!H||!Ft)return;const Fe=Jr(H.getPage(Ft)),Jt=Fe;return Fe.promise.then(wa=>{ue({type:"RESOLVE",value:wa})}).catch(wa=>{ue({type:"REJECT",error:wa})}),()=>ms(Jt)},[ue,H,Ft]),k.useEffect(()=>{if(jt!==void 0){if(jt===!1){Ii();return}xe()}},[jt,he]);const As=k.useMemo(()=>as(Lt)&&Ft&&as(ie)&&as(he)?{_className:s,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:x,onGetAnnotationsSuccess:R,onGetStructTreeError:T,onGetStructTreeSuccess:D,onGetTextError:C,onGetTextSuccess:U,onRenderAnnotationLayerError:$,onRenderAnnotationLayerSuccess:J,onRenderError:tt,onRenderSuccess:st,onRenderTextLayerError:ct,onRenderTextLayerSuccess:at,page:jt,pageIndex:Lt,pageNumber:Ft,renderForms:L,renderTextLayer:Z,rotate:ie,scale:he}:null,[s,o,g,y,x,R,T,D,C,U,$,J,tt,st,ct,at,jt,Lt,Ft,L,Z,ie,he]),to=k.useMemo(()=>sv(St,()=>jt&&(he?Zh(jt,he):void 0)),[St,jt,he]),qn=`${Lt}@${he}/${ie}`;function tc(){switch(X){case"custom":return qt(p),P.jsx(p,{},`${qn}_custom`);case"none":return null;case"canvas":default:return P.jsx(ox,{canvasRef:l},`${qn}_canvas`)}}function eo(){return Z?P.jsx(cx,{},`${qn}_text`):null}function ec(){return yt?P.jsx(ex,{},`${qn}_annotations`):null}function nc(){function Zt(Jt){return!!Jt?.page}if(!Zt(As))throw new Error("page is undefined");const Fe=typeof h=="function"?h(As):h;return P.jsxs(uv.Provider,{value:As,children:[tc(),eo(),ec(),Fe]})}function zi(){return Ft?H===null||jt===void 0||jt===null?P.jsx(da,{type:"loading",children:typeof w=="function"?w():w}):H===!1||jt===!1?P.jsx(da,{type:"error",children:typeof b=="function"?b():b}):nc():P.jsx(da,{type:"no-data",children:typeof E=="function"?E():E})}return P.jsx("div",{className:Wl(s,d),"data-page-number":Ft,ref:cv(v,Ze),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${he}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...to,children:zi()})}K_();Fi.workerSrc="pdf.worker.mjs";Fi.workerSrc=`https://unpkg.com/pdfjs-dist@${Ed}/build/pdf.worker.min.mjs`;const My=({pdfFile:c,pageNumber:t,onPageChange:e,pdfPages:s,onLoadSuccess:a})=>{const[o,l]=k.useState(!0),[h,d]=k.useState(null),p=({numPages:b})=>{l(!1),d(null),a&&a({numPages:b})},g=b=>{l(!1),d("Failed to load PDF"),console.error("PDF load error:",b)},y=s&&s>1;return P.jsxs("div",{className:"relative w-full h-full bg-white border-0 lg:border lg:border-gray-200 lg:rounded-lg lg:shadow-sm overflow-hidden flex flex-col",children:[P.jsxs("div",{className:"flex-1 bg-gray-100 relative overflow-auto scrollbar-hide",style:{height:"calc(100% - 52px)"},children:[c?P.jsx("div",{className:"w-full h-full flex items-start justify-center py-2 px-2 md:py-4 md:px-2",children:P.jsx(tx,{file:c,onLoadSuccess:p,onLoadError:g,className:"flex items-start justify-center w-full max-w-full",loading:P.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[P.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-purple-500 mb-2"}),P.jsx("span",{className:"text-sm text-gray-600",children:"Loading PDF..."})]}),error:P.jsxs("div",{className:"flex flex-col items-center justify-center text-red-500 p-4",children:[P.jsx("svg",{className:"w-6 h-6 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),P.jsx("p",{className:"text-sm text-center",children:h||"Failed to load PDF"})]}),children:P.jsx(ux,{pageNumber:t,width:window.innerWidth>768?void 0:window.innerWidth-32,height:void 0,scale:window.innerWidth>768?1:void 0,className:"pdf-page-container bg-white shadow-lg w-full max-w-full",style:{width:"100%",maxWidth:"100%",height:"auto"},renderTextLayer:!0,renderAnnotationLayer:!0,loading:P.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 border border-gray-300 min-h-64 w-full mx-auto",children:P.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"})}),error:P.jsx("div",{className:"flex items-center justify-center p-4 bg-red-50 border border-red-300 min-h-64 text-red-500 w-full mx-auto",children:P.jsxs("div",{className:"text-center",children:[P.jsx("svg",{className:"w-6 h-6 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),P.jsx("p",{className:"text-sm",children:"Error loading page"})]})})})})}):P.jsx("div",{className:"flex items-center justify-center text-gray-500 h-full p-4",children:P.jsxs("div",{className:"text-center",children:[P.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),P.jsx("p",{className:"text-sm",children:"No PDF loaded"})]})}),y&&!o&&P.jsxs("div",{className:"fixed bottom-4 left-4 lg:bottom-16 lg:left-4 flex space-x-2 z-20",children:[P.jsx("button",{onClick:()=>e(Math.max(t-1,1)),disabled:t<=1,className:"p-2 sm:p-3 bg-white border border-gray-300 rounded-full shadow-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:shadow-xl",title:"Previous Page",children:P.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),P.jsx("button",{onClick:()=>e(Math.min(t+1,s||1)),disabled:t>=(s||1),className:"p-2 sm:p-3 bg-white border border-gray-300 rounded-full shadow-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:shadow-xl",title:"Next Page",children:P.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),P.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 border-t border-gray-200 bg-gray-50 flex-shrink-0",children:[P.jsx("div",{className:"flex items-center space-x-2",children:P.jsxs("div",{className:"flex items-center space-x-1",children:[P.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:P.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),P.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Document"})]})}),P.jsx("div",{className:"flex items-center space-x-2",children:P.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["Page ",t," of ",s||"?"]})})]})]})},Dy=({pdfFile:c})=>{const[t,e]=k.useState(""),[s,a]=k.useState([]),[o,l]=k.useState(!1),h=k.useRef(null),d=()=>{h.current?.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{d()},[s]);const p=async b=>{if(b?.preventDefault(),t.trim()){const A={text:t,type:"user",timestamp:new Date};a(v=>[...v,A]),l(!0),e("");try{const v=await ne.post("http://localhost:5000/api/chat",{question:t,pdfFile:c});console.log("this is the response",v);const w={text:v.data.answer||v.data.message||"I received your question and processed it successfully.",type:"bot",timestamp:new Date};a(E=>[...E,w]),l(!1)}catch(v){console.error("API Error:",v);const w={text:"Sorry, I encountered an error while processing your question. Please try again.",type:"bot",timestamp:new Date};a(E=>[...E,w]),l(!1)}}},g=b=>{e(b)},y=b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),p())};return P.jsxs("div",{className:"flex flex-col h-full bg-white border-0 lg:border-l lg:border-gray-200 overflow-hidden",children:[P.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 px-4 sm:px-6 py-3 sm:py-4",children:P.jsx("div",{className:"flex items-center space-x-3",children:P.jsxs("div",{children:[P.jsx("h3",{className:"text-white font-semibold text-base sm:text-lg",children:"Your document is ready!"}),P.jsx("p",{className:"text-purple-100 text-xs sm:text-sm",children:"You can now ask questions about your document. For example:"})]})})}),P.jsxs("div",{className:"flex-1 overflow-y-auto px-3 sm:px-6 py-3 sm:py-4 space-y-3 sm:space-y-4 bg-gray-50",children:[s.length===0&&P.jsx("div",{className:"space-y-3 sm:space-y-4",children:P.jsx("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-100",children:P.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[P.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[P.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:P.jsx("span",{className:"text-purple-600 text-xs font-medium",children:"•"})}),P.jsx("button",{onClick:()=>g("What is the main topic of this document?"),className:"text-purple-600 hover:text-purple-800 text-left transition-colors cursor-pointer text-sm sm:text-base",children:'"What is the main topic of this document?"'})]}),P.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[P.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:P.jsx("span",{className:"text-purple-600 text-xs font-medium",children:"•"})}),P.jsx("button",{onClick:()=>g("Can you summarize the key points?"),className:"text-purple-600 hover:text-purple-800 text-left transition-colors cursor-pointer text-sm sm:text-base",children:'"Can you summarize the key points?"'})]}),P.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[P.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:P.jsx("span",{className:"text-purple-600 text-xs font-medium",children:"•"})}),P.jsx("button",{onClick:()=>g("What are the conclusions or recommendations?"),className:"text-purple-600 hover:text-purple-800 text-left transition-colors cursor-pointer text-sm sm:text-base",children:'"What are the conclusions or recommendations?"'})]})]})})}),s.map((b,A)=>P.jsx("div",{className:`flex ${b.type==="user"?"justify-end":"justify-start"}`,children:P.jsx("div",{className:`max-w-xs sm:max-w-sm lg:max-w-md px-3 sm:px-4 py-2 sm:py-3 rounded-2xl ${b.type==="user"?"bg-purple-500 text-white rounded-br-md":"bg-white text-gray-800 shadow-sm border border-gray-100 rounded-bl-md"}`,children:P.jsx("p",{className:"text-xs sm:text-sm leading-relaxed",children:b.text})})},A)),o&&P.jsx("div",{className:"flex justify-start",children:P.jsx("div",{className:"bg-white px-3 sm:px-4 py-2 sm:py-3 rounded-2xl rounded-bl-md shadow-sm border border-gray-100",children:P.jsxs("div",{className:"flex items-center space-x-2",children:[P.jsxs("div",{className:"flex space-x-1",children:[P.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-purple-400 rounded-full animate-bounce"}),P.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),P.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),P.jsx("span",{className:"text-xs text-gray-500",children:"AI is analyzing..."})]})})}),P.jsx("div",{ref:h})]}),P.jsx("div",{className:"border-t border-gray-200 bg-white px-3 sm:px-6 py-3 sm:py-4",children:P.jsxs("div",{className:"relative",children:[P.jsx("input",{type:"text",value:t,onChange:b=>e(b.target.value),onKeyPress:y,className:"w-full px-3 sm:px-4 py-2 sm:py-3 pr-10 sm:pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent placeholder-gray-400 text-sm",placeholder:"Ask about the document...",disabled:o}),P.jsx("button",{onClick:p,disabled:o||!t.trim(),className:"absolute right-1 sm:right-2 top-1/2 transform -translate-y-1/2 w-7 h-7 sm:w-8 sm:h-8 bg-purple-500 text-white rounded-full hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center",children:P.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})};function hx(){const[c,t]=k.useState(null),[e,s]=k.useState(null),[a,o]=k.useState(0),[l,h]=k.useState(1),[d,p]=k.useState(0),[g,y]=k.useState(!0),[b,A]=k.useState("pdf"),v=zy();k.useEffect(()=>{(async()=>{try{const T=sessionStorage.getItem("uploadedPdf"),D=sessionStorage.getItem("uploadedPdfName");if(T&&D){console.log("Loading PDF from session storage...");const C=atob(T),U=new Array(C.length);for(let tt=0;tt<C.length;tt++)U[tt]=C.charCodeAt(tt);const F=new Uint8Array(U),V=new Blob([F],{type:"application/pdf"}),$=new File([V],D,{type:"application/pdf"});t($);const J=URL.createObjectURL(V);s(J),console.log("PDF loaded from session storage successfully")}}catch(T){console.error("Error loading PDF from session storage:",T),sessionStorage.removeItem("uploadedPdf"),sessionStorage.removeItem("uploadedPdfName")}finally{y(!1)}})()},[]),k.useEffect(()=>{g||window.location.pathname==="/chat"&&(!c||!e)&&(console.log("No PDF found on chat page, redirecting to upload..."),v("/"))},[c,e,v,g]);const w=async R=>{console.log("PDF upload started:",R.name),t(R),e&&URL.revokeObjectURL(e);const T=URL.createObjectURL(R);s(T);try{const C=new FileReader;C.onload=function(U){const F=U.target.result,$=new Uint8Array(F).reduce((tt,st)=>tt+String.fromCharCode(st),""),J=btoa($);sessionStorage.setItem("uploadedPdf",J),sessionStorage.setItem("uploadedPdfName",R.name),console.log("PDF stored in session storage")},C.readAsArrayBuffer(R)}catch(C){console.error("Error storing PDF in session storage:",C)}h(1),o(0),p(10);const D=setInterval(()=>{p(C=>C>=100?(clearInterval(D),setTimeout(()=>{console.log("Navigating to chat page..."),v("/chat")},1e3),100):Math.min(C+12,95))},400);setTimeout(()=>{p(100)},3e3)},E=({numPages:R})=>{console.log("PDF loaded successfully. Pages:",R),o(R)},x=()=>{e&&URL.revokeObjectURL(e),sessionStorage.removeItem("uploadedPdf"),sessionStorage.removeItem("uploadedPdfName"),t(null),s(null),p(0),h(1),o(0),v("/")};return k.useEffect(()=>()=>{e&&URL.revokeObjectURL(e)},[e]),k.useEffect(()=>{console.log("AppContent state:",{pdfFile:!!c,pdfUrl:!!e,uploadProgress:d,pdfPages:a,isLoading:g})},[c,e,d,a,g]),g?P.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:P.jsxs("div",{className:"flex flex-col items-center",children:[P.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mb-4"}),P.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):P.jsx("div",{className:"h-screen bg-gray-50 overflow-hidden",children:P.jsxs(DS,{children:[P.jsx(Bh,{path:"/",element:P.jsx("div",{className:"max-w-full mx-auto p-4",children:P.jsx(B1,{onPdfUpload:w,uploadProgress:d})})}),P.jsx(Bh,{path:"/chat",element:c&&e?P.jsxs("div",{className:"h-screen flex flex-col relative",children:[P.jsx("div",{className:"fixed top-2 right-2 sm:top-3 sm:right-3 md:top-4 md:right-4 z-50",children:P.jsx("button",{onClick:x,className:"flex cursor-pointer items-center justify-center   w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 lg:w-11 lg:h-11 text-white bg-red-700 border border-red-700 rounded-full  hover:bg-red-600 hover:text-white transition-all    shadow-lg hover:shadow-xl    active:scale-95 transform",title:"Close and return to upload","aria-label":"Close and return to upload",children:P.jsx("svg",{className:"w-4 h-4 sm:w-4 sm:h-4 md:w-5 md:h-5 lg:w-5 lg:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2.5,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})}),P.jsxs("div",{className:"lg:hidden bg-white border-b border-gray-200 flex z-10 sticky top-0",children:[P.jsx("button",{onClick:()=>A("pdf"),className:`flex-1 py-3 px-2 sm:px-4 text-center font-medium transition-colors ${b==="pdf"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-800"}`,children:P.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[P.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),P.jsx("span",{className:"text-sm sm:text-base",children:"Document"})]})}),P.jsx("button",{onClick:()=>A("chat"),className:`flex-1 py-3 px-2 sm:px-4 text-center font-medium transition-colors ${b==="chat"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-800"}`,children:P.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[P.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),P.jsx("span",{className:"text-sm sm:text-base",children:"Chat"})]})})]}),P.jsxs("div",{className:"flex-1 flex min-h-0",children:[P.jsxs("div",{className:"hidden lg:flex flex-1 min-h-0",children:[P.jsx("div",{className:"w-1/2 h-full",children:P.jsx(My,{pdfFile:e,pageNumber:l,onPageChange:h,pdfPages:a,onLoadSuccess:E})}),P.jsx("div",{className:"w-1/2 h-full",children:P.jsx(Dy,{pdfFile:c})})]}),P.jsxs("div",{className:"lg:hidden flex-1 min-h-0 relative",children:[P.jsx("div",{className:`h-full ${b==="pdf"?"block":"hidden"} overflow-hidden`,children:P.jsx("div",{className:"h-full p-2 sm:p-3 md:p-4",children:P.jsx(My,{pdfFile:e,pageNumber:l,onPageChange:h,pdfPages:a,onLoadSuccess:E})})}),P.jsx("div",{className:`h-full ${b==="chat"?"block":"hidden"} overflow-hidden`,children:P.jsx("div",{className:"h-full",children:P.jsx(Dy,{pdfFile:c})})})]})]})]}):P.jsx("div",{className:"h-screen flex items-center justify-center p-4",children:P.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 max-w-md mx-auto w-full",children:[P.jsx("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.684-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"})}),P.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2 text-center",children:"No PDF Uploaded"}),P.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-6 text-center",children:"Please upload a PDF file first to start chatting"}),P.jsx("button",{onClick:()=>v("/"),className:"w-full bg-purple-500 text-white px-6 py-2 sm:py-3 rounded-lg hover:bg-purple-600 transition-colors font-medium text-sm sm:text-base",children:"Upload PDF"})]})})})]})})}function dx(){return P.jsx(JS,{children:P.jsx(hx,{})})}zA.createRoot(document.getElementById("root")).render(P.jsx(k.StrictMode,{children:P.jsx(dx,{})}));
